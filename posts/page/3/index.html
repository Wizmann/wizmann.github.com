<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Maerlyn's Rainbow</title>
<meta name=keywords content><meta name=description content="Posts - Maerlyn's Rainbow"><meta name=author content="wizmann"><link rel=canonical href=https://wizmann.top/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://wizmann.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wizmann.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wizmann.top/favicon-32x32.png><link rel=apple-touch-icon href=https://wizmann.top/apple-touch-icon.png><link rel=mask-icon href=https://wizmann.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wizmann.top/posts/index.xml><link rel=alternate hreflang=zh-cn href=https://wizmann.top/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-2X5NE9PX0B"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2X5NE9PX0B")</script><meta property="og:url" content="https://wizmann.top/posts/"><meta property="og:site_name" content="Maerlyn's Rainbow"><meta property="og:title" content="Posts"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wizmann.top/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wizmann.top/ accesskey=h title="Maerlyn's Rainbow (Alt + H)">Maerlyn's Rainbow</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>STUP - another (stupid) TCP over UDP protocol (1)</h2></header><div class=entry-content><p>What is STUP? STUP is the abbreviation of “Speeded/Secure Tcp-like Udp Protocol”, which means that it’s another TCP over UDP protocol.
Why TCP over UDP?
TCP is a network protocol for general purpose, and it’s one of the most commonly used internet protocol on this planet. It is reliable, ordered and well optimized with decades of efforts.
But, there’s plenty of reasons to replace that protocol for my scenario.
Firstly, create my own network protocol is something geeky-nerdy, yep, suits me perfectly.
...</p></div><footer class=entry-footer><span title='2017-04-20 23:17:45 +0000 UTC'>April 20, 2017</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to STUP - another (stupid) TCP over UDP protocol (1)" href=https://wizmann.top/posts/stup-1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>WorkflowyMd Release Note</h2></header><div class=entry-content><p>What is it? I’ve writen several workflowy enhance plugins by UserScript. The very first one is show the full content of the note of a bullet. The second one is to show images under the bullet. Then I worked on the background image to make a more colorful workflowy.
Yeah, workflowy is a powerful tool for noting and orgainizing your knowledge. And it is FREE! (Say thankee) And the only drawback of this tool is the text format.
...</p></div><footer class=entry-footer><span title='2017-01-26 21:07:28 +0000 UTC'>January 26, 2017</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to WorkflowyMd Release Note" href=https://wizmann.top/posts/workflowymd/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Parallel patterns in C#</h2></header><div class=entry-content><p>写在前面 与C/C++所使用的，传统的基于线程的并行模式不同，C#实现了丰富的并发编程模型，其中以异步模型最为流行。
本文中我们重点讨论C#在发展过程中出现的几种异步编程模型：
...</p></div><footer class=entry-footer><span title='2017-01-22 22:52:28 +0000 UTC'>January 22, 2017</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to Parallel patterns in C#" href=https://wizmann.top/posts/parallel-in-csharp/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Twisted Defer and DeferredQueue</h2></header><div class=entry-content><p>写在最前面 这篇文章本来是想用英文写的，但是最近英文水平下降的和狗一样。还是怂一波吧。
写在前面 最近在用Twisted库写一个诡异的项目，具体内容暂且不在这里讨论。在写的过程中，被Twisted里面的一个重要概念 —— defer，折腾的不行。最终通过阅读twisted的部分源码，以及与代码做斗争的丰富经验，最终算是解决了问题。
...</p></div><footer class=entry-footer><span title='2016-12-10 11:34:38 +0000 UTC'>December 10, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to Twisted Defer and DeferredQueue" href=https://wizmann.top/posts/twisted-defer-and-deferredqueue/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Mosca源码阅读</h2></header><div class=entry-content><p>先在前面 最近心血来潮看了看一个比较有名的开源MQTT broker —— Mosca。不读不知道，读完才恍然大悟 —— 这是啥破玩意（哈哈）。
由于我是nodejs的超级初学者，所以本文会比较浅显，并且只关注big picture，不陷入细节。
...</p></div><footer class=entry-footer><span title='2016-11-11 22:04:13 +0000 UTC'>November 11, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to Mosca源码阅读" href=https://wizmann.top/posts/mosca/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>总结 - phxrpc代码阅读(8)</h2></header><div class=entry-content><p>写在前面 这应该是phxrpc代码阅读系列正文的最后一篇。通过阅读代码，发现了自己在知识上的若干不足。
临渊羡鱼，不如退而结网。接下来可能会在网络编程方面再下一点工夫。请大家期待下一个系列吧。
...</p></div><footer class=entry-footer><span title='2016-10-23 15:50:44 +0000 UTC'>October 23, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to 总结 - phxrpc代码阅读(8)" href=https://wizmann.top/posts/phxrpc-8/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>RPC - phxrpc代码阅读(7)</h2></header><div class=entry-content><p>前言 看了这么久代码，终于我们要接近phxrpc的核心部分了。
但是出人意料的是，rpc部分并没有过多的概念和magic trick。而且因为ucontext已经被封装好了，所以在rpc里的操作，可以完全按照同步的写法来搞，开发者们不需要切换同步异步的思维模式，就可以在底层的封装之上，做自己想做的事了。
...</p></div><footer class=entry-footer><span title='2016-10-22 23:03:36 +0000 UTC'>October 22, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to RPC - phxrpc代码阅读(7)" href=https://wizmann.top/posts/phxrpc-7/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>非阻塞TCP流和HttpClient - phxrpc代码阅读(6)</h2></header><div class=entry-content><p>写在前面 其实这点东西有点鸡肋。因为TCP流在前面已经讲过，难点在于“流”和“流缓冲区”部分。而HttpClient只是TCP流的一个应用，代码不多，且重点在于HTTP协议的调教上面。
...</p></div><footer class=entry-footer><span title='2016-10-19 00:03:12 +0000 UTC'>October 19, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to 非阻塞TCP流和HttpClient - phxrpc代码阅读(6)" href=https://wizmann.top/posts/phxrpc-6/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>使用epoll驱动ucontext - phxrpc代码阅读(5)</h2></header><div class=entry-content><p>用pipe叫醒你 — EpollNotifier class EpollNotifier类型封装了一个使用pipe传递信号的Notifier类。
Run()函数（其实我觉得叫Register或Activate会更好）首先声明了两个单向的pipe：pipe_fds_，从文档中我们可以知道pipe_fds_[0]是读管道，而pipe_fds_[1]是写管道。这里有一丁点反直觉，就是pipe拿了两个fd，但是仍旧是单工的。
...</p></div><footer class=entry-footer><span title='2016-10-17 01:28:40 +0000 UTC'>October 17, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to 使用epoll驱动ucontext - phxrpc代码阅读(5)" href=https://wizmann.top/posts/phxrpc-5/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ucontext - phxrpc代码阅读(4)</h2></header><div class=entry-content><p>写在前面 国庆假期过半，phxrpc的代码阅读大概要小小告一段落啦。因为这两天还要读工作相关的代码，以及最后几天还有一次短途旅行。
所以非阻塞TCP流可能要留到下一篇了，这一篇只涉及非阻塞TCP流使用到的ucontext协程库，及其使用的一些框架代码。
...</p></div><footer class=entry-footer><span title='2016-10-13 23:45:24 +0000 UTC'>October 13, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to ucontext - phxrpc代码阅读(4)" href=https://wizmann.top/posts/phxrpc-4/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>打造你的专属键盘 — ErgoDone</h2></header><div class=entry-content><p>写在前面 低能预警：这是最没有技术含量的一篇博客，无关人员可以撤离。
部分图片来自网络，侵删
这个十一假期，亲手DIY了一把键盘。当然，我只搞定了焊接部分，把不同的组件拼在了一起。
...</p></div><footer class=entry-footer><span title='2016-10-05 21:38:58 +0000 UTC'>October 5, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to 打造你的专属键盘 — ErgoDone" href=https://wizmann.top/posts/ergodone/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>阻塞TCP流 - phxrpc代码阅读(3)</h2></header><div class=entry-content><p>写在前面 phxrpc的流（stream和streambuf）与网络访问其实是耦合在一起的，所以本文可以结合着第一篇笔记一起来看。虽然我非常想吐槽这种强耦合性的设计，但是我决定还是好好理解phxrpc的设计之后。。。攒一波大的：）
...</p></div><footer class=entry-footer><span title='2016-10-03 22:22:14 +0000 UTC'>October 3, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to 阻塞TCP流 - phxrpc代码阅读(3)" href=https://wizmann.top/posts/phxrpc-3/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>定时器以及其它 - phxrpc阅读笔记(2)</h2></header><div class=entry-content><p>写在前面 phxrpc使用了协程(ucontext)和IO复用技术(epoll)来实现网络通信。定时器在其中起到了非常重要的作用。下面我们就来分析一下phxrpc的timer.[h|cpp]中的代码。
...</p></div><footer class=entry-footer><span title='2016-09-29 01:28:09 +0000 UTC'>September 29, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to 定时器以及其它 - phxrpc阅读笔记(2)" href=https://wizmann.top/posts/phxrpc-2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>自定义你的stream buffer - phxrpc阅读笔记(1)</h2></header><div class=entry-content><p>写在前面 phxrpc是微信团队开源的一个轻量级RPC框架。
我对RPC这些东西了解不多，看到phxrpc的代码相对简单，而且还在初步开发阶段（在本文写作时，版本号是0.8）。所以想读一读，提高一下姿势水平。
...</p></div><footer class=entry-footer><span title='2016-09-28 22:35:55 +0000 UTC'>September 28, 2016</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to 自定义你的stream buffer - phxrpc阅读笔记(1)" href=https://wizmann.top/posts/phxrpc-1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Code Golf - Heapify</h2></header><div class=entry-content><p>void heapify(vector&lt;int>& vec) { int n = vec.size(); for (int a = 0, b = 1; b - 1 &lt; n; a = b, b &lt;&lt;= 1) { nth_element(vec.begin() + a, vec.begin() + b, vec.end()); } } You can implement a “heapify” by only four lines of code. And the time complexity is O(n).</p></div><footer class=entry-footer><span title='2015-08-01 00:00:00 +0000 UTC'>August 1, 2015</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to Code Golf - Heapify" href=https://wizmann.top/posts/code-golf-heapify/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Using Set Cover to Optimize a Large-Scale Low Latency Distributed Graph</h2></header><div class=entry-content><p>Background Linkedin (or other social networks, such as Facebook and G+) use the “social graph information” to show the social relationship between you and other members.
Such as, “You and Mr.Obama share 10 mutual friends” or “You have 1,000 second-degree connections”.
This feature is very common for a social network. But where does it come from?
Basic API for Social Graph Information The information about a social relationship can be get from three basic APIs.
...</p></div><footer class=entry-footer><span title='2015-07-26 22:48:33 +0000 UTC'>July 26, 2015</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to Using Set Cover to Optimize a Large-Scale Low Latency Distributed Graph" href=https://wizmann.top/posts/using-set-cover-algorithm-to-optimize-a-large-scale-low-latency-distributed-graph/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Workflowy full notes</h2></header><div class=entry-content><p>Recently, I’m becoming a crazy fan of workflowy because its ability to build a personal wiki concisely.
However, there’s only one thing bothers me that workflowy hide all the notes as the screenshot below, and it annoys me a lot.
Luckily we can always find a way to get around those limitations. Here I recommand the “Stylish”, which is a powerful tool to manipulate the CSS style of the page.
...</p></div><footer class=entry-footer><span title='2015-05-22 09:51:47 +0000 UTC'>May 22, 2015</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to Workflowy full notes" href=https://wizmann.top/posts/workflowy-full-notes/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>用C++实现一个通用的sort函数</h2></header><div class=entry-content><p>问题 用C++实现一个尽可能通用的sort函数
分析 一个通用的sort函数应该包含以下要点：
确实可以排序(LOL) 可以应对C-style array和C++-style container的排序需求 可以应用于任意random access container 可以使用用户自定义的排序函数 / 仿函数 / lambda函数 实现 为了与std中的通用函数做区别，这里的命名规则，包括类型与函数，都在前面加了"my"以示区别。可能与标准的命名法有出入，所以仅做示例用。
...</p></div><footer class=entry-footer><span title='2015-04-25 11:17:01 +0000 UTC'>April 25, 2015</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to 用C++实现一个通用的sort函数" href=https://wizmann.top/posts/a-common-sorting-function-with-cpp/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Beauty-of-Programming 2015 Qualification Round Tutorial</h2></header><div class=entry-content><p>A. 2月29日 (Feb. 29th) Description Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.
Solution The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.
However, it’s not an effective way for the problem.
Let simplify the problem. “How many Feb. 29th from year A to year B?” Actually, it’t not a hard one. But there is a pitfall. Loot at this.
...</p></div><footer class=entry-footer><span title='2015-04-25 00:54:08 +0000 UTC'>April 25, 2015</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to Beauty-of-Programming 2015 Qualification Round Tutorial" href=https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>GCJ Qualification Round 2015 题解</h2></header><div class=entry-content><p>前言 这篇日志用中文写是因为想省点时间打游戏。。。（请鄙视我吧。。。
A. Standing Ovation 题意 这是一个骗掌声的故事。
当演出结束后，观众们要站起来鼓掌。但是有些观众比较羞涩，只有在k个人站起来鼓掌后才会故障。
...</p></div><footer class=entry-footer><span title='2015-04-12 00:00:00 +0000 UTC'>April 12, 2015</span>&nbsp;·&nbsp;wizmann</footer><a class=entry-link aria-label="post link to GCJ Qualification Round 2015 题解" href=https://wizmann.top/posts/gcj-qualification-round-2015-tutorial/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://wizmann.top/posts/page/2/>«&nbsp;&nbsp;
</a><a class=next href=https://wizmann.top/posts/page/4/>&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://wizmann.top/>Maerlyn's Rainbow</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>