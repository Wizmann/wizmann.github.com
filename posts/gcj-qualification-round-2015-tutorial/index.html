<!doctype html><html lang=zh-CN dir=ltr><head><script>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}}</script><script defer src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body class=notransition><div id=container><header id=main-header><div role=navigation aria-label=Main><div class=nav-left><a href=https://wizmann.top/ style=color:inherit>Maerlyn's Rainbow</a></div><div class=nav-right><div style=position:absolute;width:0;height:0><div id=nav-dropdown-menu class=hidden href=#><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div></div></div><a id=nav-dropdown-button href=#><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4 6H20M4 12H20M4 18H20" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a><div id=nav-menu><div class=nav-item><a aria-current=true class=ancestor href=/posts/>Posts</a></div></div><a id=theme-switcher href=#><svg class="light-icon" viewBox="0 0 24 24" fill="none"><path d="M12 3V4m0 16v1M4 12H3M6.31412 6.31412 5.5 5.5m12.1859.81412L18.5 5.5M6.31412 17.69 5.5 18.5001M17.6859 17.69 18.5 18.5001M21 12H20m-4 0c0 2.2091-1.7909 4-4 4-2.20914.0-4-1.7909-4-4 0-2.20914 1.79086-4 4-4 2.2091.0 4 1.79086 4 4z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg class="dark-icon" viewBox="0 0 24 24" fill="none"><path d="M3.32031 11.6835c0 4.9706 4.02944 9 8.99999 9 3.7872.0 7.028-2.3392 8.3565-5.6515C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834c-4.9706.0-8.99999-4.0294-8.99999-8.99998C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996 5.65605 4.66028 3.32031 7.89912 3.32031 11.6835z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a></div></div></header><div class="flex grow"><div id=main-pane><main id=main-content><div class=single-header><ol class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://wizmann.top/><span itemprop=name></span>
</a><meta itemprop=position content='1'></li><span>&nbsp»&nbsp</span><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://wizmann.top/posts/><span itemprop=name>Posts</span>
</a><meta itemprop=position content='2'></li><span>&nbsp»&nbsp</span></ol><h1>GCJ Qualification Round 2015 题解</h1><time class=dim datetime=2015-04-12T00:00:00+00:00>April 12, 2015</time><div class=term-container><div class=tag><a href=https://wizmann.top/tags/gcj/>#GCJ</a></div><div class=tag><a href=https://wizmann.top/tags/algorithm/>#algorithm</a></div><div class=tag><a href=https://wizmann.top/tags/%E7%AE%97%E6%B3%95/>#算法</a></div><div class=tag><a href=https://wizmann.top/tags/%E9%A2%98%E8%A7%A3/>#题解</a></div><div class=tag><a href=https://wizmann.top/tags/google/>#google</a></div></ol></div><section class=page-section><h2 id=前言>前言</h2><p>这篇日志用中文写是因为想省点时间打游戏。。。（请鄙视我吧。。。</p><h2 id=a-standing-ovation>A. Standing Ovation</h2><h3 id=题意>题意</h3><p>这是一个骗掌声的故事。</p><p>当演出结束后，观众们要站起来鼓掌。但是有些观众比较羞涩，只有在k个人站起来鼓掌后才会故障。</p><p>你的目标是在观众中安插一些卧底领掌，让所有观众都站起来鼓掌。（臭不要脸）</p><p>求最少的卧底数。</p><h3 id=数据规模>数据规模</h3><blockquote><p>抛开数据规模谈解题，都是TM耍流氓。 —— Wizmann</p></blockquote><p>100组数据。</p><p>小数据集，观众羞涩值的范围：0 ≤ Smax ≤ 6.</p><p>大数据集，观众羞涩值的范围：0 ≤ Smax ≤ 1000.</p><h3 id=解题>解题</h3><p>本题比较简单。有两种方法，一是暴力枚举，因为大数据集中，观众羞涩值最大只为1000,即最大安插卧底数不超过1000。(当然，二分也可以，不过对于1000的数据集，真心没啥必要。)</p><p>二是O(N)的一个遍历，在观众羞涩的不想鼓掌时，安插相应数量的卧底。</p><p>本题推荐方法一。因为个人感觉，在编程竞赛中，在时限和空间允许的情况下，尽量让方法简单化。这样不容易出错。但是在要体现逼格的时候，尽量“优化”你的代码，提升思考复杂度来换取尽可能多的优化。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>solve</span>():
</span></span><span style=display:flex><span>    (n, aud) <span style=color:#f92672>=</span> raw_input()<span style=color:#f92672>.</span>split()
</span></span><span style=display:flex><span>    n <span style=color:#f92672>=</span> int(n)
</span></span><span style=display:flex><span>    aud <span style=color:#f92672>=</span> map(int, aud)
</span></span><span style=display:flex><span>    stand <span style=color:#f92672>=</span> aud[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    res <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> xrange(<span style=color:#ae81ff>1</span>, n <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>        u <span style=color:#f92672>=</span> aud[i]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> u:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> i <span style=color:#f92672>&gt;</span> stand:
</span></span><span style=display:flex><span>            res <span style=color:#f92672>+=</span> i <span style=color:#f92672>-</span> stand
</span></span><span style=display:flex><span>            stand <span style=color:#f92672>=</span> i
</span></span><span style=display:flex><span>        stand <span style=color:#f92672>+=</span> u
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> res
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>T <span style=color:#f92672>=</span> int(raw_input())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> xrange(T):
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#39;Case #</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>: </span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span> (i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, solve())
</span></span></code></pre></div><h2 id=b-infinite-house-of-pancakes>B. Infinite House of Pancakes</h2><h3 id=题意-1>题意</h3><p>在一个宴会厅中（想到了“米阿的宴会厅”)，有无限的客人，但是只有有限的煎饼。你的目标是让所有客人尽可能快的吃完所有的煎饼。</p><p>每个客人在一个单位时间只能吃一块煎饼。你也可以在一个单位时间内，调整一个客人的煎饼，即把他的煎饼给别人。</p><p>求所有客人吃完所有煎饼的时间。</p><blockquote><p>&lsquo;Here comes Mia, daughter of none!&rsquo;<br>&ndash; <em>The Dark Tower V: Wolves of the Calla</em></p></blockquote><h3 id=数据规模-1>数据规模</h3><p>100组测试数据。</p><p>D为有煎饼的客人的数目。Pi为客人拥有煎饼的最大值。</p><p>小数据：<br>1 ≤ D ≤ 6.<br>1 ≤ Pi ≤ 9.</p><p>大数据：<br>1 ≤ D ≤ 1000.<br>1 ≤ Pi ≤ 1000.</p><h3 id=解题-1>解题</h3><p>一开始想用二分做。但是这道题并不能满足二分的条件。因为无论是二分时间还是二分最大煎饼数，客人都可以吃完煎饼，这样的二分是没有意义的。</p><p>换个思路，在吃煎饼前，我们可以对所有客人的煎饼数进行调整。又由于客人的数目是无限多的，所以我们的调整就是<strong>把煎饼送给没有煎饼的客人</strong>。调整的目标是<strong>让煎饼数尽量平均</strong>（“尽量”和“尽可能”是不同的，“尽量”的范围更宽范一些）。</p><p>于是，我们尝试枚举“调整后的最大煎饼数量”。通过枚举这个值，我们可以很容易得到“调整煎饼时间 + 吃煎饼时间”。又由于数据规模比较小，搞起来不是很困难。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdlib&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;set&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define print(x) cout &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define input(x) cin &gt;&gt; x
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SIZE <span style=color:#f92672>=</span> <span style=color:#ae81ff>1024</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>233</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> n;
</span></span><span style=display:flex><span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> vec;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> T, a, cas <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    input(T);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (T<span style=color:#f92672>--</span>) {
</span></span><span style=display:flex><span>        input(n);
</span></span><span style=display:flex><span>        vec.clear();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            input(a);
</span></span><span style=display:flex><span>            vec.push_back(a);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> ans <span style=color:#f92672>=</span> SIZE <span style=color:#f92672>*</span> <span style=color:#ae81ff>233</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;=</span> SIZE; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> step <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> maxi <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>auto</span><span style=color:#f92672>&amp;</span> num: vec) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (num <span style=color:#f92672>&gt;</span> i) {
</span></span><span style=display:flex><span>                    step <span style=color:#f92672>+=</span> num <span style=color:#f92672>%</span> i<span style=color:#f92672>?</span> num <span style=color:#f92672>/</span> i: num <span style=color:#f92672>/</span> i <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                    maxi <span style=color:#f92672>=</span> i;
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                    maxi <span style=color:#f92672>=</span> max(maxi, num);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            ans <span style=color:#f92672>=</span> min(ans, step <span style=color:#f92672>+</span> maxi);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>                
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;Case #%d: %d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, cas<span style=color:#f92672>++</span>, ans);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=c-dijkstra>C. Dijkstra</h2><h3 id=题意-2>题意</h3><p>给你一个代数系统（可以这么说吧），包括“1, i, j, k”。</p><p>已知它们的运算规律。</p><p><img src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/ba89abba98064a7e42e52e9e5b2de57f alt="Alt text"></p><p>现在，有一个包含"i, j, k"的连乘式。它是由一段连乘式重复X遍得出的。</p><p>问，能否把它转化为<code>i * j * k</code>的形式。</p><h3 id=数据规模-2>数据规模</h3><p>测试组数： 1 ≤ T ≤ 100.<br>给出的连乘式长度： 1 ≤ L ≤ 10000.</p><p>连乘式的重复次数为X。</p><p>小数据集：<br>1 ≤ X ≤ 10000.<br>1 ≤ L * X ≤ 10000.</p><p>大数据集：<br>1 ≤ X ≤ 10^12.<br>1 ≤ L * X ≤ 10^16.</p><h3 id=解题-2>解题</h3><p>题中给出了乘法的规律。我们不难从中推测出除法的规律。</p><p>假设我们已经把连乘式转化为<code>i * j</code>的形式，那么我们只需要把剩下的部分转化为数字<code>k</code>，即可满足题意。</p><p>我们可以去思考转化的过程，当然，也可以逆向思考，去思考转化后的结果。</p><p>我们知道，<code>i * j * k == -1</code>，当我们把前辍转化为<code>i * j</code>的形式后，如果判断整个连乘式的结果为<code>-1</code>，此时，我们可以断定，该连乘式可以转化为<code>i * j * k</code>的形式。</p><p>i与j的转化是类似的。</p><p>所以整个算法的时间复杂度为O(N)。</p><p>但是，O(N)的算法是无法通过大数据集的。因为，连乘式是循环的，总长度可能会非常长。</p><p>我们继续使用同样的思路。如果我们有了i和j，当整体连乘式之积为<code>-1</code>时，即断定满足条件。这里，我们使用快速幂算法，直接计算循环节的乘积。复杂度为<code>O(L) + O(logX)</code>。</p><p>对于i和j，我们可以这样考虑。循环节之积只有以下几种可能：<code>±1, ±i, ±j, ±k</code>。</p><p><img src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/252e0e81143f2dd5cb6e01e1e69d0709 alt="the table"></p><p>我们可以看出，对于<code>1, i, j, k</code>，乘法都是有一个循环节的。这里不需要定量分析，我们可以直接断定，如果在一定的循环节中，不能把算式转化为<code>i * j</code>的形式，那么就不可能转化。</p><p>所以，代码如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdlib&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define print(x) cout &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define input(x) cin &gt;&gt; x
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define error(x) cerr &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SIZE <span style=color:#f92672>=</span> <span style=color:#ae81ff>12345</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>enum</span> {
</span></span><span style=display:flex><span>    ONE <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    II  <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>    JJ  <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>,
</span></span><span style=display:flex><span>    KK  <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> trans[<span style=color:#ae81ff>5</span>][<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>,   <span style=color:#ae81ff>0</span>,    <span style=color:#ae81ff>0</span>,   <span style=color:#ae81ff>0</span>},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, ONE, II,   JJ,  KK},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, II,  <span style=color:#f92672>-</span>ONE, KK, <span style=color:#f92672>-</span>JJ},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, JJ,  <span style=color:#f92672>-</span>KK, <span style=color:#f92672>-</span>ONE, II},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, KK,  JJ,  <span style=color:#f92672>-</span>II, <span style=color:#f92672>-</span>ONE}
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>conv</span>(<span style=color:#66d9ef>char</span> c) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> (c) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;1&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> ONE;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;i&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> II;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;j&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> JJ;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;k&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> KK;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Number</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> sign;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> value;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Number() {}
</span></span><span style=display:flex><span>    Number(<span style=color:#66d9ef>char</span> c) {
</span></span><span style=display:flex><span>        sign <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        value <span style=color:#f92672>=</span> conv(c);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    Number(<span style=color:#66d9ef>int</span> isign, <span style=color:#66d9ef>int</span> ivalue)<span style=color:#f92672>:</span> sign(isign), value(ivalue){}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Number <span style=color:#66d9ef>operator</span> <span style=color:#f92672>*</span> (<span style=color:#66d9ef>const</span> Number<span style=color:#f92672>&amp;</span> num) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> num.sign <span style=color:#f92672>*</span> sign;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> b <span style=color:#f92672>=</span> trans[value][num.value];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (b <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            a <span style=color:#f92672>*=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>            b <span style=color:#f92672>=</span> abs(b);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Number{a, b};
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>string _word;
</span></span><span style=display:flex><span>string word;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> L, X;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>get_whole</span>() {
</span></span><span style=display:flex><span>    Number num(<span style=color:#e6db74>&#39;1&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>auto</span><span style=color:#f92672>&amp;</span> c: _word) {
</span></span><span style=display:flex><span>        num <span style=color:#f92672>=</span> num <span style=color:#f92672>*</span> Number(c);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    Number ans(<span style=color:#e6db74>&#39;1&#39;</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> x <span style=color:#f92672>=</span> X;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (x) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (x <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>            ans <span style=color:#f92672>=</span> ans <span style=color:#f92672>*</span> num;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        num <span style=color:#f92672>=</span> num <span style=color:#f92672>*</span> num;
</span></span><span style=display:flex><span>        x <span style=color:#f92672>&gt;&gt;=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ans.sign <span style=color:#f92672>==</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> and ans.value <span style=color:#f92672>==</span> ONE;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> T, cas <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    input(T);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (T<span style=color:#f92672>--</span>) {
</span></span><span style=display:flex><span>        input(L <span style=color:#f92672>&gt;&gt;</span> X);
</span></span><span style=display:flex><span>        input(_word);
</span></span><span style=display:flex><span>        word <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> min(X, <span style=color:#ae81ff>19LL</span>); i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            word <span style=color:#f92672>+=</span> _word;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        Number num(<span style=color:#e6db74>&#39;1&#39;</span>);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> ii <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> jj <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> kk <span style=color:#f92672>=</span> get_whole();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> n <span style=color:#f92672>=</span> word.size();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            num <span style=color:#f92672>=</span> num <span style=color:#f92672>*</span> word[i];
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (num.sign <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> num.value <span style=color:#f92672>==</span> II) {
</span></span><span style=display:flex><span>                ii <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>            }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (ii <span style=color:#f92672>&amp;&amp;</span> num.sign <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> num.value <span style=color:#f92672>==</span> KK) {
</span></span><span style=display:flex><span>                jj <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        kk <span style=color:#f92672>=</span> (kk <span style=color:#f92672>&amp;&amp;</span> ii <span style=color:#f92672>&amp;&amp;</span> jj);
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;Case #%d: &#34;</span>, cas<span style=color:#f92672>++</span>);
</span></span><span style=display:flex><span>        puts(kk<span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;YES&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;NO&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>19</code>是一个magic number。还有，小心<del>Dandelo</del>数据超int。</p><p><img src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/625c5bb804b76545978bcb11310099a6 alt="Alt text"></p><h2 id=d-ominous-omino>D. Ominous Omino</h2><p>充满玄学的一题。网上看到的最精彩的题解是人工模拟出了所有可能。</p><p>我觉得像我这种内存小的人，估计是想不出来的。</p><p>貌似也有人用模拟。。。我觉得。。。可能会有更优雅的方法。。。</p><p>题解在<a href=http://www.huangwenchao.com.cn/2015/04/gcj-2015-qual-d.html>这里</a>，真心是给跪了。</p></section></main><footer id=main-footer><div class=footer><a href=#></a><div class=footer-copyright><div class=dim>© 2025</div><div></div></div></div></footer></div><aside id=side-pane class=side-sticky><div class=side-details><span>2235 </span><span>8 - 10</span></div><h3></h3><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#a-standing-ovation>A. Standing Ovation</a><ul><li><a href=#题意>题意</a></li><li><a href=#数据规模>数据规模</a></li><li><a href=#解题>解题</a></li></ul></li><li><a href=#b-infinite-house-of-pancakes>B. Infinite House of Pancakes</a><ul><li><a href=#题意-1>题意</a></li><li><a href=#数据规模-1>数据规模</a></li><li><a href=#解题-1>解题</a></li></ul></li><li><a href=#c-dijkstra>C. Dijkstra</a><ul><li><a href=#题意-2>题意</a></li><li><a href=#数据规模-2>数据规模</a></li><li><a href=#解题-2>解题</a></li></ul></li><li><a href=#d-ominous-omino>D. Ominous Omino</a></li></ul></nav><h3></h3><ul><li><a href=/posts/cf-289-div-2/>Codeforces Round #289 (Div. 2) Tutorial</a></li><li><a href=/posts/cf-288-div-2/>Codeforces Round #288 (Div. 2)</a></li><li><a href=/posts/cf-447d/>Codeforces 447D DZY Loves Modification</a></li><li><a href=/posts/cf-242-div-2/>Codeforces Round #242 (Div. 2) Tutorials and Solutions</a></li><li><a href=/posts/cf-240-div-2/>Codeforces Round #240 (Div. 2) Tutorials and Solutions(incomplete and incorrect)</a></li></ul></aside></div></div></body></html>