<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=Content-Security-Policy content="script-src 'self'; style-src 'self' 'unsafe-inline'; object-src 'none'; base-uri 'none'"><link rel=stylesheet href=/css/style.feedcd92d05c2cf19ee7487656b358ee4805f831b7b39711851199d0a6f8934cf9ba379d02425d485c5b65ae299bdffda3770739545d595074076bf3ead284ab.css media=screen integrity="sha512-/u3NktBcLPGe50h2VrNY7kgF+DG3s5cRhRGZ0Kb4k0z5ujedAkJdSFxbZa4pm9/9o3cHOVRdWVB0B2vz6tKEqw==" crossorigin=anonymous><title>GCJ Qualification Round 2015 题解</title>
<meta name=description content="前言 这篇日志用中文写是因为想省点时间打游戏。。。（请鄙视我吧。。。
A. Standing Ovation 题意 这是一个骗掌声的故事。
当演出结束后，观众们要站起来鼓掌。但是有些观众比较羞涩，只有在k个人站起来鼓掌后才会故障。
"><link rel=canonical href=https://wizmann.top/posts/gcj-qualification-round-2015-tutorial/><link rel=alternate hreflang=zh-CN href=https://wizmann.top/posts/gcj-qualification-round-2015-tutorial/><link rel=alternate hreflang=x-default href=https://wizmann.top/posts/gcj-qualification-round-2015-tutorial/><meta property="og:title" content="GCJ Qualification Round 2015 题解"><meta property="og:description" content="前言
这篇日志用中文写是因为想省点时间打游戏。。。（请鄙视我吧。。。
A. Standing Ovation
题意
这是一个骗掌声的故事。
当演出结束后，观众们要站起来鼓掌。但是有些观众比较羞涩，只有在k个人站起来鼓掌后才会故障。"><meta property="og:type" content="article"><meta property="og:url" content="https://wizmann.top/posts/gcj-qualification-round-2015-tutorial/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-04-12T00:00:00+00:00"><meta property="article:modified_time" content="2015-04-12T00:00:00+00:00"><meta property="og:site_name" content="Maerlyn's Rainbow"><meta name=twitter:card content="summary"><meta name=twitter:title content="GCJ Qualification Round 2015 题解"><meta name=twitter:description content="前言
这篇日志用中文写是因为想省点时间打游戏。。。（请鄙视我吧。。。
A. Standing Ovation
题意
这是一个骗掌声的故事。
当演出结束后，观众们要站起来鼓掌。但是有些观众比较羞涩，只有在k个人站起来鼓掌后才会故障。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"GCJ Qualification Round 2015 题解","datePublished":"2015-04-12T00:00:00+00:00","dateModified":"2015-04-12T00:00:00+00:00","mainEntityOfPage":"https://wizmann.top/","publisher":{"@type":"Organization","name":"Maerlyn's Rainbow"},"wordcount":2235,"description":"前言 这篇日志用中文写是因为想省点时间打游戏。。。（请鄙视我吧。。。\nA. Standing Ovation 题意 这是一个骗掌声的故事。\n当演出结束后，观众们要站起来鼓掌。但是有些观众比较羞涩，只有在k个人站起来鼓掌后才会故障。\n","keywords":null}</script></head><body class="posts single d-flex flex-column min-vh-100"><header class=main-header><nav class="navbar navbar-expand-lg"><div class=container><a class=navbar-brand href=/>Maerlyn's Rainbow
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="menu-main navbar-nav me-auto mb-2 mb-lg-0"></ul></div></div></nav></header><div id=content><div class="container py-3"><h2 id=前言>前言</h2><p>这篇日志用中文写是因为想省点时间打游戏。。。（请鄙视我吧。。。</p><h2 id=a-standing-ovation>A. Standing Ovation</h2><h3 id=题意>题意</h3><p>这是一个骗掌声的故事。</p><p>当演出结束后，观众们要站起来鼓掌。但是有些观众比较羞涩，只有在k个人站起来鼓掌后才会故障。</p><p>你的目标是在观众中安插一些卧底领掌，让所有观众都站起来鼓掌。（臭不要脸）</p><p>求最少的卧底数。</p><h3 id=数据规模>数据规模</h3><blockquote><p>抛开数据规模谈解题，都是TM耍流氓。 —— Wizmann</p></blockquote><p>100组数据。</p><p>小数据集，观众羞涩值的范围：0 ≤ Smax ≤ 6.</p><p>大数据集，观众羞涩值的范围：0 ≤ Smax ≤ 1000.</p><h3 id=解题>解题</h3><p>本题比较简单。有两种方法，一是暴力枚举，因为大数据集中，观众羞涩值最大只为1000,即最大安插卧底数不超过1000。(当然，二分也可以，不过对于1000的数据集，真心没啥必要。)</p><p>二是O(N)的一个遍历，在观众羞涩的不想鼓掌时，安插相应数量的卧底。</p><p>本题推荐方法一。因为个人感觉，在编程竞赛中，在时限和空间允许的情况下，尽量让方法简单化。这样不容易出错。但是在要体现逼格的时候，尽量“优化”你的代码，提升思考复杂度来换取尽可能多的优化。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>solve</span>():
</span></span><span style=display:flex><span>    (n, aud) <span style=color:#f92672>=</span> raw_input()<span style=color:#f92672>.</span>split()
</span></span><span style=display:flex><span>    n <span style=color:#f92672>=</span> int(n)
</span></span><span style=display:flex><span>    aud <span style=color:#f92672>=</span> map(int, aud)
</span></span><span style=display:flex><span>    stand <span style=color:#f92672>=</span> aud[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    res <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> xrange(<span style=color:#ae81ff>1</span>, n <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>        u <span style=color:#f92672>=</span> aud[i]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> u:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> i <span style=color:#f92672>&gt;</span> stand:
</span></span><span style=display:flex><span>            res <span style=color:#f92672>+=</span> i <span style=color:#f92672>-</span> stand
</span></span><span style=display:flex><span>            stand <span style=color:#f92672>=</span> i
</span></span><span style=display:flex><span>        stand <span style=color:#f92672>+=</span> u
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> res
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>T <span style=color:#f92672>=</span> int(raw_input())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> xrange(T):
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#39;Case #</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>: </span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span> (i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, solve())
</span></span></code></pre></div><h2 id=b-infinite-house-of-pancakes>B. Infinite House of Pancakes</h2><h3 id=题意-1>题意</h3><p>在一个宴会厅中（想到了“米阿的宴会厅”)，有无限的客人，但是只有有限的煎饼。你的目标是让所有客人尽可能快的吃完所有的煎饼。</p><p>每个客人在一个单位时间只能吃一块煎饼。你也可以在一个单位时间内，调整一个客人的煎饼，即把他的煎饼给别人。</p><p>求所有客人吃完所有煎饼的时间。</p><blockquote><p>&lsquo;Here comes Mia, daughter of none!&rsquo;<br>&ndash; <em>The Dark Tower V: Wolves of the Calla</em></p></blockquote><h3 id=数据规模-1>数据规模</h3><p>100组测试数据。</p><p>D为有煎饼的客人的数目。Pi为客人拥有煎饼的最大值。</p><p>小数据：<br>1 ≤ D ≤ 6.<br>1 ≤ Pi ≤ 9.</p><p>大数据：<br>1 ≤ D ≤ 1000.<br>1 ≤ Pi ≤ 1000.</p><h3 id=解题-1>解题</h3><p>一开始想用二分做。但是这道题并不能满足二分的条件。因为无论是二分时间还是二分最大煎饼数，客人都可以吃完煎饼，这样的二分是没有意义的。</p><p>换个思路，在吃煎饼前，我们可以对所有客人的煎饼数进行调整。又由于客人的数目是无限多的，所以我们的调整就是<strong>把煎饼送给没有煎饼的客人</strong>。调整的目标是<strong>让煎饼数尽量平均</strong>（“尽量”和“尽可能”是不同的，“尽量”的范围更宽范一些）。</p><p>于是，我们尝试枚举“调整后的最大煎饼数量”。通过枚举这个值，我们可以很容易得到“调整煎饼时间 + 吃煎饼时间”。又由于数据规模比较小，搞起来不是很困难。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdlib&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;set&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define print(x) cout &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define input(x) cin &gt;&gt; x
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SIZE <span style=color:#f92672>=</span> <span style=color:#ae81ff>1024</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>233</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> n;
</span></span><span style=display:flex><span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> vec;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> T, a, cas <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    input(T);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (T<span style=color:#f92672>--</span>) {
</span></span><span style=display:flex><span>        input(n);
</span></span><span style=display:flex><span>        vec.clear();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            input(a);
</span></span><span style=display:flex><span>            vec.push_back(a);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> ans <span style=color:#f92672>=</span> SIZE <span style=color:#f92672>*</span> <span style=color:#ae81ff>233</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;=</span> SIZE; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> step <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> maxi <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>auto</span><span style=color:#f92672>&amp;</span> num: vec) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (num <span style=color:#f92672>&gt;</span> i) {
</span></span><span style=display:flex><span>                    step <span style=color:#f92672>+=</span> num <span style=color:#f92672>%</span> i<span style=color:#f92672>?</span> num <span style=color:#f92672>/</span> i: num <span style=color:#f92672>/</span> i <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                    maxi <span style=color:#f92672>=</span> i;
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                    maxi <span style=color:#f92672>=</span> max(maxi, num);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            ans <span style=color:#f92672>=</span> min(ans, step <span style=color:#f92672>+</span> maxi);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>                
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;Case #%d: %d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, cas<span style=color:#f92672>++</span>, ans);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=c-dijkstra>C. Dijkstra</h2><h3 id=题意-2>题意</h3><p>给你一个代数系统（可以这么说吧），包括“1, i, j, k”。</p><p>已知它们的运算规律。</p><p><img src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/ba89abba98064a7e42e52e9e5b2de57f alt="Alt text"></p><p>现在，有一个包含"i, j, k"的连乘式。它是由一段连乘式重复X遍得出的。</p><p>问，能否把它转化为<code>i * j * k</code>的形式。</p><h3 id=数据规模-2>数据规模</h3><p>测试组数： 1 ≤ T ≤ 100.<br>给出的连乘式长度： 1 ≤ L ≤ 10000.</p><p>连乘式的重复次数为X。</p><p>小数据集：<br>1 ≤ X ≤ 10000.<br>1 ≤ L * X ≤ 10000.</p><p>大数据集：<br>1 ≤ X ≤ 10^12.<br>1 ≤ L * X ≤ 10^16.</p><h3 id=解题-2>解题</h3><p>题中给出了乘法的规律。我们不难从中推测出除法的规律。</p><p>假设我们已经把连乘式转化为<code>i * j</code>的形式，那么我们只需要把剩下的部分转化为数字<code>k</code>，即可满足题意。</p><p>我们可以去思考转化的过程，当然，也可以逆向思考，去思考转化后的结果。</p><p>我们知道，<code>i * j * k == -1</code>，当我们把前辍转化为<code>i * j</code>的形式后，如果判断整个连乘式的结果为<code>-1</code>，此时，我们可以断定，该连乘式可以转化为<code>i * j * k</code>的形式。</p><p>i与j的转化是类似的。</p><p>所以整个算法的时间复杂度为O(N)。</p><p>但是，O(N)的算法是无法通过大数据集的。因为，连乘式是循环的，总长度可能会非常长。</p><p>我们继续使用同样的思路。如果我们有了i和j，当整体连乘式之积为<code>-1</code>时，即断定满足条件。这里，我们使用快速幂算法，直接计算循环节的乘积。复杂度为<code>O(L) + O(logX)</code>。</p><p>对于i和j，我们可以这样考虑。循环节之积只有以下几种可能：<code>±1, ±i, ±j, ±k</code>。</p><p><img src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/252e0e81143f2dd5cb6e01e1e69d0709 alt="the table"></p><p>我们可以看出，对于<code>1, i, j, k</code>，乘法都是有一个循环节的。这里不需要定量分析，我们可以直接断定，如果在一定的循环节中，不能把算式转化为<code>i * j</code>的形式，那么就不可能转化。</p><p>所以，代码如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdlib&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define print(x) cout &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define input(x) cin &gt;&gt; x
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define error(x) cerr &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SIZE <span style=color:#f92672>=</span> <span style=color:#ae81ff>12345</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>enum</span> {
</span></span><span style=display:flex><span>    ONE <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    II  <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>    JJ  <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>,
</span></span><span style=display:flex><span>    KK  <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> trans[<span style=color:#ae81ff>5</span>][<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>,   <span style=color:#ae81ff>0</span>,    <span style=color:#ae81ff>0</span>,   <span style=color:#ae81ff>0</span>},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, ONE, II,   JJ,  KK},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, II,  <span style=color:#f92672>-</span>ONE, KK, <span style=color:#f92672>-</span>JJ},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, JJ,  <span style=color:#f92672>-</span>KK, <span style=color:#f92672>-</span>ONE, II},
</span></span><span style=display:flex><span>    {<span style=color:#ae81ff>0</span>, KK,  JJ,  <span style=color:#f92672>-</span>II, <span style=color:#f92672>-</span>ONE}
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>conv</span>(<span style=color:#66d9ef>char</span> c) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> (c) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;1&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> ONE;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;i&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> II;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;j&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> JJ;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;k&#39;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> KK;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Number</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> sign;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> value;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Number() {}
</span></span><span style=display:flex><span>    Number(<span style=color:#66d9ef>char</span> c) {
</span></span><span style=display:flex><span>        sign <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        value <span style=color:#f92672>=</span> conv(c);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    Number(<span style=color:#66d9ef>int</span> isign, <span style=color:#66d9ef>int</span> ivalue)<span style=color:#f92672>:</span> sign(isign), value(ivalue){}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Number <span style=color:#66d9ef>operator</span> <span style=color:#f92672>*</span> (<span style=color:#66d9ef>const</span> Number<span style=color:#f92672>&amp;</span> num) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> num.sign <span style=color:#f92672>*</span> sign;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> b <span style=color:#f92672>=</span> trans[value][num.value];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (b <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            a <span style=color:#f92672>*=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>            b <span style=color:#f92672>=</span> abs(b);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Number{a, b};
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>string _word;
</span></span><span style=display:flex><span>string word;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> L, X;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>get_whole</span>() {
</span></span><span style=display:flex><span>    Number num(<span style=color:#e6db74>&#39;1&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>auto</span><span style=color:#f92672>&amp;</span> c: _word) {
</span></span><span style=display:flex><span>        num <span style=color:#f92672>=</span> num <span style=color:#f92672>*</span> Number(c);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    Number ans(<span style=color:#e6db74>&#39;1&#39;</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> x <span style=color:#f92672>=</span> X;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (x) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (x <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>            ans <span style=color:#f92672>=</span> ans <span style=color:#f92672>*</span> num;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        num <span style=color:#f92672>=</span> num <span style=color:#f92672>*</span> num;
</span></span><span style=display:flex><span>        x <span style=color:#f92672>&gt;&gt;=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ans.sign <span style=color:#f92672>==</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> and ans.value <span style=color:#f92672>==</span> ONE;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> T, cas <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    input(T);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (T<span style=color:#f92672>--</span>) {
</span></span><span style=display:flex><span>        input(L <span style=color:#f92672>&gt;&gt;</span> X);
</span></span><span style=display:flex><span>        input(_word);
</span></span><span style=display:flex><span>        word <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> min(X, <span style=color:#ae81ff>19LL</span>); i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            word <span style=color:#f92672>+=</span> _word;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        Number num(<span style=color:#e6db74>&#39;1&#39;</span>);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> ii <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> jj <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> kk <span style=color:#f92672>=</span> get_whole();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> n <span style=color:#f92672>=</span> word.size();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            num <span style=color:#f92672>=</span> num <span style=color:#f92672>*</span> word[i];
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (num.sign <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> num.value <span style=color:#f92672>==</span> II) {
</span></span><span style=display:flex><span>                ii <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>            }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (ii <span style=color:#f92672>&amp;&amp;</span> num.sign <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> num.value <span style=color:#f92672>==</span> KK) {
</span></span><span style=display:flex><span>                jj <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        kk <span style=color:#f92672>=</span> (kk <span style=color:#f92672>&amp;&amp;</span> ii <span style=color:#f92672>&amp;&amp;</span> jj);
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;Case #%d: &#34;</span>, cas<span style=color:#f92672>++</span>);
</span></span><span style=display:flex><span>        puts(kk<span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;YES&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;NO&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>19</code>是一个magic number。还有，小心<del>Dandelo</del>数据超int。</p><p><img src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/625c5bb804b76545978bcb11310099a6 alt="Alt text"></p><h2 id=d-ominous-omino>D. Ominous Omino</h2><p>充满玄学的一题。网上看到的最精彩的题解是人工模拟出了所有可能。</p><p>我觉得像我这种内存小的人，估计是想不出来的。</p><p>貌似也有人用模拟。。。我觉得。。。可能会有更优雅的方法。。。</p><p>题解在<a href=http://www.huangwenchao.com.cn/2015/04/gcj-2015-qual-d.html target=_blank rel=noopener>这里</a>，真心是给跪了。</p></div></div><footer class="py-3 mt-auto bg-light"><div class="container py-1 my-1"><div class="d-flex flex-wrap justify-content-between align-items-center"><p class="col-md mb-0 text-muted"></p><ul class="nav col-md-auto justify-content-end"></ul></div></div></footer><script src=/js/main.min.e8d88c82c0438b527f1aca4115652ba1e2877bf805b75593b23ac0e3fe2b3fe95a467d1feef275355132ba061da6404b0d24d55afabc209b294b1db043be014d.js integrity="sha512-6NiMgsBDi1J/GspBFWUroeKHe/gFt1WTsjrA4/4rP+laRn0f7vJ1NVEyugYdpkBLDSTVWvq8IJspSx2wQ74BTQ==" crossorigin=anonymous defer></script></body></html>