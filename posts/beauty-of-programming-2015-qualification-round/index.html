<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Beauty-of-Programming 2015 Qualification Round Tutorial | Maerlyn's Rainbow</title>
<meta name=keywords content="algorithm,算法,题解,Microsoft"><meta name=description content="A. 2月29日 (Feb. 29th)
Description
Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.
Solution
The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.
However, it&rsquo;s not an effective way for the problem.
Let simplify the problem. &ldquo;How many Feb. 29th from year A to year B?&rdquo; Actually, it&rsquo;t not a hard one. But there is a pitfall. Loot at this."><meta name=author content="wizmann"><link rel=canonical href=https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://wizmann.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wizmann.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wizmann.top/favicon-32x32.png><link rel=apple-touch-icon href=https://wizmann.top/apple-touch-icon.png><link rel=mask-icon href=https://wizmann.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-2X5NE9PX0B"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2X5NE9PX0B")</script><meta property="og:url" content="https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/"><meta property="og:site_name" content="Maerlyn's Rainbow"><meta property="og:title" content="Beauty-of-Programming 2015 Qualification Round Tutorial"><meta property="og:description" content="A. 2月29日 (Feb. 29th) Description Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.
Solution The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.
However, it’s not an effective way for the problem.
Let simplify the problem. “How many Feb. 29th from year A to year B?” Actually, it’t not a hard one. But there is a pitfall. Loot at this."><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-04-25T00:54:08+00:00"><meta property="article:modified_time" content="2015-04-25T00:54:08+00:00"><meta property="article:tag" content="Algorithm"><meta property="article:tag" content="算法"><meta property="article:tag" content="题解"><meta property="article:tag" content="Microsoft"><meta name=twitter:card content="summary"><meta name=twitter:title content="Beauty-of-Programming 2015 Qualification Round Tutorial"><meta name=twitter:description content="A. 2月29日 (Feb. 29th)
Description
Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.
Solution
The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.
However, it&rsquo;s not an effective way for the problem.
Let simplify the problem. &ldquo;How many Feb. 29th from year A to year B?&rdquo; Actually, it&rsquo;t not a hard one. But there is a pitfall. Loot at this."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wizmann.top/posts/"},{"@type":"ListItem","position":2,"name":"Beauty-of-Programming 2015 Qualification Round Tutorial","item":"https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Beauty-of-Programming 2015 Qualification Round Tutorial","name":"Beauty-of-Programming 2015 Qualification Round Tutorial","description":"A. 2月29日 (Feb. 29th) Description Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.\nSolution The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.\nHowever, it\u0026rsquo;s not an effective way for the problem.\nLet simplify the problem. \u0026ldquo;How many Feb. 29th from year A to year B?\u0026rdquo; Actually, it\u0026rsquo;t not a hard one. But there is a pitfall. Loot at this.\n","keywords":["algorithm","算法","题解","Microsoft"],"articleBody":"A. 2月29日 (Feb. 29th) Description Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.\nSolution The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.\nHowever, it’s not an effective way for the problem.\nLet simplify the problem. “How many Feb. 29th from year A to year B?” Actually, it’t not a hard one. But there is a pitfall. Loot at this.\nyearA = 2001 yearB = 2017 cnt = 0 cnt += (yearB - yearA) / 4 cnt -= (yearB - yearA) / 100 cnt += (yearB - yearA) + 400 print cnt Seems OK, but a little bit weird, right? But, opps, it absolutely wrong.\nFor example,\n2 @ 0 2 0 0 1 0 0 @ 2 0 0 2 2 0 0 1 2 0 0 2 3 0 0 2 @ 2 0 2 0 0 4 0 @ 3 2 @ 0 2 0 0 5 0 4 @ ( ( y y e e a a r r = = 5 5 , , l l e e a a r p _ _ y y e e a a r r = = 1 2 ) ) The right way is using a ceil way to adjust yearA to the nearest greater leap year.\nAnd then we deal with other details to make everything right.\n#include #include #include #include #include using namespace std; #define print(x) cout \u003c\u003c x \u003c\u003c endl #define input(x) cin \u003e\u003e x typedef long long llint; string months[] = {\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\" , \"December\"}; struct Date { llint yy, mm, dd; Date() {} Date(llint iyy, string imm, llint idd): yy(iyy), dd(idd) { for (int i = 0; i \u003c 12; i++) { if (imm == months[i]) { mm = i + 1; } } } }; llint year_diff(llint a, llint b) { if (a \u003e= b) { return 0; } llint ans = 0; llint aa = (a + 3) / 4 * 4; llint bb = (b / 4) * 4; if (aa \u003c= bb) { ans += (bb - aa) / 4 + 1; } aa = (a + 99) / 100 * 100; bb = (b / 100) * 100; if (aa \u003c= bb) { ans -= (bb - aa) / 100 + 1; } aa = (a + 399) / 400 * 400; bb = (b / 400) * 400; if (aa \u003c= bb) { ans += (bb - aa) / 400 + 1; } return ans; } bool is_leap(const Date\u0026 d) { return (d.yy % 4 == 0 \u0026\u0026 d.yy % 100 != 0) || (d.yy % 400 == 0); } llint solve(const Date\u0026 da, const Date\u0026 db) { llint ans = 0; ans += year_diff(da.yy + 1, db.yy - 1); if (da.yy \u003c db.yy \u0026\u0026 is_leap(da) \u0026\u0026 da.mm \u003c 3) { ans++; } if (da.yy \u003c db.yy \u0026\u0026 is_leap(db) \u0026\u0026 (db.mm \u003e= 3 || (db.mm == 2 \u0026\u0026 db.dd == 29))) { ans++; } if (da.yy == db.yy \u0026\u0026 is_leap(da) \u0026\u0026 da.mm \u003c 3 \u0026\u0026 (db.mm \u003e= 3 || (db.mm == 2 \u0026\u0026 db.dd == 29))) { ans++; } return ans; } int main() { int T; string mm, temp; int yy, dd, cas = 1; input(T); while (T--) { Date a, b; input(mm \u003e\u003e dd \u003e\u003e temp \u003e\u003e yy); a = Date(yy, mm, dd); input(mm \u003e\u003e dd \u003e\u003e temp \u003e\u003e yy); b = Date(yy, mm, dd); printf(\"Case #%d: %lld\\n\", cas++, solve(a, b)); } return 0; } B. 回文字符序列(Palindrome Subsequences) Description Given a string, try to count how many subsequences there are palindromes.\nFor example, for the string “aba”, the palindrome subsequences are: “a”, “a”, “aa”, “b”, “aba”.\nSolution Let’s simplify the problem. (Of course, the simple one always comes the first.)\nHow many substring there are palindromes?\nThis one is a more populare problem which can be solved with an O(n^2) DP algorithm.\nd p [ i ] [ j ] = ( s t r [ i ] = = s t r [ j ] \u0026 \u0026 d p [ i - 1 ] [ j - 1 ] ) If dp[i][j] equals to one, it means that the substring str[i:j + 1] is a palindrome, vice versa.\nFor this problem, things are quite similar. If there are some palindrome subsequences at str[i - 1: j], and at the same time str[i] == str[j], that is, there must be one or more palindrome subsequences at str[i:j + 1] and these subsequences contain str[i] and str[j].\nThat is the basic idea of the problem, and the DP formula is like this. You can consider why.\nif (str[i] != str[j]): dp[i][j] = dp[i][j - 1] + dp[i + 1][j] - dp[i + 1][j - 1] else: dp[i][j] = dp[i][j - 1] + dp[i + 1][j] + 1 Be ware, the result need to be module by 100007. As we have minus in the DP formula, don’t forget there are possibility that dp[i][j] \u003c 0.\n// This is actually the solution for HDU 4632, which is similar to this problem. #include #include #include #include #include #include #include using namespace std; #define print(x) cout \u003c\u003c x \u003c\u003c endl #define input(x) cin \u003e\u003e x const int SIZE = 1234; const int MOD = 10007; int n; int dp[SIZE][SIZE]; string word; int do_mod(int value) { return ((value % MOD) + MOD) % MOD; } int solve() { memset(dp, 0, sizeof(dp)); for (int i = 0; i \u003c n; i++) { dp[i][i] = 1; } for (int i = 1; i \u003c n; i++) { for (int j = 0; i + j \u003c n; j++) { int l = j; int r = i + j; if (word[l] == word[r]) { dp[l][r] = do_mod( dp[l][r - 1] + dp[l + 1][r] + 1); } else { dp[l][r] = do_mod( dp[l][r - 1] + dp[l + 1][r] - dp[l + 1][r - 1]); } } } return dp[0][n - 1]; } int main() { int T, cas = 1; input(T); while (T--) { input(word); n = word.size(); printf(\"Case %d: %d\\n\", cas++, solve() % MOD); } return 0; } C.基站选址(Base Station Locationing) Description Given a N × M grid which contain A user and B communications companies, and one single base station.\nThe cost of communication between users and base station is defined as the square of the Euclidean distance.\nThe cost for the companies to maintain the base station is defined as the minimal Manhattan distance between the station and all the communications companies.\nSolution All we have to do is to find the minimal distance with that formula.\nIt’s easy to see that we can deal with the x-axis and y-axis separately\n.\nWe can learn something from the quadratic equation like formula. And of course, we minimum value is near sum(xa[i]) / A. This is same with the y-axis. As a result, we can check the grid near , to see if there is a minimum cost for the communication.\nI don’t want to write the code here because it’s easy if you know the basis of the algorithm and it’s too late now. I’m gonna to have a diet pepsi, and say good night for all you guys.\nLazy guy, indeed. :)\n","wordCount":"1270","inLanguage":"zh-cn","datePublished":"2015-04-25T00:54:08Z","dateModified":"2015-04-25T00:54:08Z","author":{"@type":"Person","name":"wizmann"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/"},"publisher":{"@type":"Organization","name":"Maerlyn's Rainbow","logo":{"@type":"ImageObject","url":"https://wizmann.top/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wizmann.top/ accesskey=h title="Maerlyn's Rainbow (Alt + H)">Maerlyn's Rainbow</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Beauty-of-Programming 2015 Qualification Round Tutorial</h1><div class=post-meta><span title='2015-04-25 00:54:08 +0000 UTC'>April 25, 2015</span>&nbsp;·&nbsp;wizmann</div></header><div class=post-content><h2 id=a-2月29日-feb-29th>A. 2月29日 (Feb. 29th)<a hidden class=anchor aria-hidden=true href=#a-2月29日-feb-29th>#</a></h2><h3 id=description>Description<a hidden class=anchor aria-hidden=true href=#description>#</a></h3><p>Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.</p><h3 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>#</a></h3><p>The easiest way, of course, the brute force, which is quite simple with Python using the <code>datetime</code> lib.</p><p>However, it&rsquo;s not an effective way for the problem.</p><p>Let simplify the problem. &ldquo;How many Feb. 29th from year A to year B?&rdquo; Actually, it&rsquo;t not a hard one. But there is a pitfall. Loot at this.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>yearA <span style=color:#f92672>=</span> <span style=color:#ae81ff>2001</span>
</span></span><span style=display:flex><span>yearB <span style=color:#f92672>=</span> <span style=color:#ae81ff>2017</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cnt <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>cnt <span style=color:#f92672>+=</span> (yearB <span style=color:#f92672>-</span> yearA) <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>cnt <span style=color:#f92672>-=</span> (yearB <span style=color:#f92672>-</span> yearA) <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>cnt <span style=color:#f92672>+=</span> (yearB <span style=color:#f92672>-</span> yearA) <span style=color:#f92672>+</span> <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print cnt
</span></span></code></pre></div><p>Seems OK, but a little bit weird, right? But, opps, it absolutely wrong.</p><p>For example,</p><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 536 41"><g transform="translate(8,16)"><path d="M40 0h8" fill="none" stroke="currentcolor"/><path d="M104 0h8" fill="none" stroke="currentcolor"/><path d="M168 0h8" fill="none" stroke="currentcolor"/><path d="M248 0h8" fill="none" stroke="currentcolor"/><path d="M56 16h8" fill="none" stroke="currentcolor"/><path d="M120 16h8" fill="none" stroke="currentcolor"/><path d="M184 16h8" fill="none" stroke="currentcolor"/><path d="M248 16h8" fill="none" stroke="currentcolor"/><polygon points="56.000000,0.000000 44.000000,-5.600000 44.000000,5.600000" fill="currentcolor" transform="rotate(0.000000, 48.000000, 0.000000)"/><polygon points="72.000000,16.000000 60.000000,10.400000 60.000000,21.600000" fill="currentcolor" transform="rotate(0.000000, 64.000000, 16.000000)"/><polygon points="120.000000,0.000000 108.000000,-5.600000 108.000000,5.600000" fill="currentcolor" transform="rotate(0.000000, 112.000000, 0.000000)"/><polygon points="136.000000,16.000000 124.000000,10.400000 124.000000,21.600000" fill="currentcolor" transform="rotate(0.000000, 128.000000, 16.000000)"/><polygon points="184.000000,0.000000 172.000000,-5.600000 172.000000,5.600000" fill="currentcolor" transform="rotate(0.000000, 176.000000, 0.000000)"/><polygon points="200.000000,16.000000 188.000000,10.400000 188.000000,21.600000" fill="currentcolor" transform="rotate(0.000000, 192.000000, 16.000000)"/><polygon points="264.000000,0.000000 252.000000,-5.600000 252.000000,5.600000" fill="currentcolor" transform="rotate(0.000000, 256.000000, 0.000000)"/><polygon points="264.000000,16.000000 252.000000,10.400000 252.000000,21.600000" fill="currentcolor" transform="rotate(0.000000, 256.000000, 16.000000)"/><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="0" y="20" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="8" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="16" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="24" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="32" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="40" y="20" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="64" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="80" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="80" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="88" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="96" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="104" y="20" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="128" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="136" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="144" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="144" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="152" y="4" fill="currentcolor" style="font-size:1em">3</text><text text-anchor="middle" x="152" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="160" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="168" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="192" y="4" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="200" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="208" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="208" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="216" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="216" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="224" y="4" fill="currentcolor" style="font-size:1em">4</text><text text-anchor="middle" x="224" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="232" y="4" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="232" y="20" fill="currentcolor" style="font-size:1em">3</text><text text-anchor="middle" x="272" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="272" y="20" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="280" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="280" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="288" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="288" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="296" y="4" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="296" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="304" y="20" fill="currentcolor" style="font-size:1em">4</text><text text-anchor="middle" x="312" y="20" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="328" y="4" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="328" y="20" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="336" y="4" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="336" y="20" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="344" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="344" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="352" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="352" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="360" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="360" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="376" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="376" y="20" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="392" y="4" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="392" y="20" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="400" y="4" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="400" y="20" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="416" y="4" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="416" y="20" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="424" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="424" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="432" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="432" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="440" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="440" y="20" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="448" y="4" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="448" y="20" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="456" y="4" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="456" y="20" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="464" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="464" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="472" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="472" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="480" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="480" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="496" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="496" y="20" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="512" y="4" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="512" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="520" y="4" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="520" y="20" fill="currentcolor" style="font-size:1em">)</text></g></svg></div><p>The right way is using a <code>ceil</code> way to adjust yearA to the nearest greater leap year.</p><p>And then we deal with other details to make everything right.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdlib&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define print(x) cout &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define input(x) cin &gt;&gt; x 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> llint;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>string months[] <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;January&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;February&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;March&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;April&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;May&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;June&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;July&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;August&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;September&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;October&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;November&#34;</span> , 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;December&#34;</span>};
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Date</span> {
</span></span><span style=display:flex><span>    llint yy, mm, dd;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    Date() {}
</span></span><span style=display:flex><span>    Date(llint iyy, string imm, llint idd)<span style=color:#f92672>:</span> yy(iyy), dd(idd) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>12</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (imm <span style=color:#f92672>==</span> months[i]) {
</span></span><span style=display:flex><span>                mm <span style=color:#f92672>=</span> i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>llint <span style=color:#a6e22e>year_diff</span>(llint a, llint b) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (a <span style=color:#f92672>&gt;=</span> b) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    llint ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    llint aa <span style=color:#f92672>=</span> (a <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>    llint bb <span style=color:#f92672>=</span> (b <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (aa <span style=color:#f92672>&lt;=</span> bb) {
</span></span><span style=display:flex><span>        ans <span style=color:#f92672>+=</span> (bb <span style=color:#f92672>-</span> aa) <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    aa <span style=color:#f92672>=</span> (a <span style=color:#f92672>+</span> <span style=color:#ae81ff>99</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>    bb <span style=color:#f92672>=</span> (b <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (aa <span style=color:#f92672>&lt;=</span> bb) {
</span></span><span style=display:flex><span>        ans <span style=color:#f92672>-=</span> (bb <span style=color:#f92672>-</span> aa) <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    aa <span style=color:#f92672>=</span> (a <span style=color:#f92672>+</span> <span style=color:#ae81ff>399</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>400</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>400</span>;
</span></span><span style=display:flex><span>    bb <span style=color:#f92672>=</span> (b <span style=color:#f92672>/</span> <span style=color:#ae81ff>400</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>400</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (aa <span style=color:#f92672>&lt;=</span> bb) {
</span></span><span style=display:flex><span>        ans <span style=color:#f92672>+=</span> (bb <span style=color:#f92672>-</span> aa) <span style=color:#f92672>/</span> <span style=color:#ae81ff>400</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ans;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>is_leap</span>(<span style=color:#66d9ef>const</span> Date<span style=color:#f92672>&amp;</span> d) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (d.yy <span style=color:#f92672>%</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> d.yy <span style=color:#f92672>%</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>) <span style=color:#f92672>||</span> (d.yy <span style=color:#f92672>%</span> <span style=color:#ae81ff>400</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>llint <span style=color:#a6e22e>solve</span>(<span style=color:#66d9ef>const</span> Date<span style=color:#f92672>&amp;</span> da, <span style=color:#66d9ef>const</span> Date<span style=color:#f92672>&amp;</span> db) {
</span></span><span style=display:flex><span>    llint ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    ans <span style=color:#f92672>+=</span> year_diff(da.yy <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, db.yy <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (da.yy <span style=color:#f92672>&lt;</span> db.yy <span style=color:#f92672>&amp;&amp;</span> is_leap(da) <span style=color:#f92672>&amp;&amp;</span> da.mm <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>        ans<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (da.yy <span style=color:#f92672>&lt;</span> db.yy <span style=color:#f92672>&amp;&amp;</span> is_leap(db) <span style=color:#f92672>&amp;&amp;</span> (db.mm <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>||</span> (db.mm <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>&amp;&amp;</span> db.dd <span style=color:#f92672>==</span> <span style=color:#ae81ff>29</span>))) {
</span></span><span style=display:flex><span>        ans<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (da.yy <span style=color:#f92672>==</span> db.yy <span style=color:#f92672>&amp;&amp;</span> is_leap(da) <span style=color:#f92672>&amp;&amp;</span> da.mm <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>&amp;&amp;</span> (db.mm <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>||</span> (db.mm <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>&amp;&amp;</span> db.dd <span style=color:#f92672>==</span> <span style=color:#ae81ff>29</span>))) {
</span></span><span style=display:flex><span>        ans<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ans;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> T;
</span></span><span style=display:flex><span>    string mm, temp;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> yy, dd, cas <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    input(T);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (T<span style=color:#f92672>--</span>) {
</span></span><span style=display:flex><span>        Date a, b;
</span></span><span style=display:flex><span>        input(mm <span style=color:#f92672>&gt;&gt;</span> dd <span style=color:#f92672>&gt;&gt;</span> temp <span style=color:#f92672>&gt;&gt;</span> yy);
</span></span><span style=display:flex><span>        a <span style=color:#f92672>=</span> Date(yy, mm, dd);
</span></span><span style=display:flex><span>        input(mm <span style=color:#f92672>&gt;&gt;</span> dd <span style=color:#f92672>&gt;&gt;</span> temp <span style=color:#f92672>&gt;&gt;</span> yy);
</span></span><span style=display:flex><span>        b <span style=color:#f92672>=</span> Date(yy, mm, dd);
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;Case #%d: %lld</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, cas<span style=color:#f92672>++</span>, solve(a, b));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=b-回文字符序列palindrome-subsequences>B. 回文字符序列(Palindrome Subsequences)<a hidden class=anchor aria-hidden=true href=#b-回文字符序列palindrome-subsequences>#</a></h2><h3 id=description-1>Description<a hidden class=anchor aria-hidden=true href=#description-1>#</a></h3><p>Given a string, try to count how many subsequences there are palindromes.</p><p>For example, for the string &ldquo;aba&rdquo;, the palindrome subsequences are: &ldquo;a&rdquo;, &ldquo;a&rdquo;, &ldquo;aa&rdquo;, &ldquo;b&rdquo;, &ldquo;aba&rdquo;.</p><h3 id=solution-1>Solution<a hidden class=anchor aria-hidden=true href=#solution-1>#</a></h3><p>Let&rsquo;s simplify the problem. (Of course, the simple one always comes the first.)</p><blockquote><p>How many substring there are palindromes?</p></blockquote><p>This one is a more populare problem which can be solved with an <code>O(n^2)</code> DP algorithm.</p><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 400 25"><g transform="translate(8,16)"><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="32" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="40" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="48" y="4" fill="currentcolor" style="font-size:1em">j</text><text text-anchor="middle" x="56" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="96" y="4" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="104" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="112" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="120" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="128" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="136" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="152" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="160" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="176" y="4" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="184" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="192" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="200" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="208" y="4" fill="currentcolor" style="font-size:1em">j</text><text text-anchor="middle" x="216" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="232" y="4" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="240" y="4" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="256" y="4" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="264" y="4" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="272" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="280" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="296" y="4" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="312" y="4" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="320" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="328" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="336" y="4" fill="currentcolor" style="font-size:1em">j</text><text text-anchor="middle" x="352" y="4" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="368" y="4" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="376" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="384" y="4" fill="currentcolor" style="font-size:1em">)</text></g></svg></div><p>If <code>dp[i][j]</code> equals to one, it means that the substring <code>str[i:j + 1]</code> is a palindrome, vice versa.</p><p>For this problem, things are quite similar. If there are some palindrome subsequences at <code>str[i - 1: j]</code>, and at the same time <code>str[i] == str[j]</code>, that is, there must be one or more palindrome subsequences at <code>str[i:j + 1]</code> and these subsequences contain <code>str[i]</code> and <code>str[j]</code>.</p><p>That is the basic idea of the problem, and the DP formula is like this. You can consider why.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>if</span> (str[i] <span style=color:#f92672>!=</span> str[j]):
</span></span><span style=display:flex><span>    dp[i][j] <span style=color:#f92672>=</span> dp[i][j <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> dp[i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][j] <span style=color:#f92672>-</span> dp[i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][j <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>    dp[i][j] <span style=color:#f92672>=</span> dp[i][j <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> dp[i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][j] <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>Be ware, the result need to be module by 100007. As we have minus in the DP formula, don&rsquo;t forget there are possibility that <code>dp[i][j] &lt; 0</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>// This is actually the solution for HDU 4632, which is similar to this problem.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdlib&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;string&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define print(x) cout &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define input(x) cin &gt;&gt; x
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SIZE <span style=color:#f92672>=</span> <span style=color:#ae81ff>1234</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> MOD <span style=color:#f92672>=</span> <span style=color:#ae81ff>10007</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> n;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> dp[SIZE][SIZE];
</span></span><span style=display:flex><span>string word;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>do_mod</span>(<span style=color:#66d9ef>int</span> value) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ((value <span style=color:#f92672>%</span> MOD) <span style=color:#f92672>+</span> MOD) <span style=color:#f92672>%</span> MOD;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>solve</span>() {
</span></span><span style=display:flex><span>    memset(dp, <span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>sizeof</span>(dp));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        dp[i][i] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;</span> n; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>+</span> j <span style=color:#f92672>&lt;</span> n; j<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> l <span style=color:#f92672>=</span> j;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> r <span style=color:#f92672>=</span> i <span style=color:#f92672>+</span> j;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (word[l] <span style=color:#f92672>==</span> word[r]) {
</span></span><span style=display:flex><span>                dp[l][r] <span style=color:#f92672>=</span> do_mod(
</span></span><span style=display:flex><span>                    dp[l][r <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> dp[l <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][r] <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>            } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                dp[l][r] <span style=color:#f92672>=</span> do_mod(
</span></span><span style=display:flex><span>                    dp[l][r <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> dp[l <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][r] <span style=color:#f92672>-</span> dp[l <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][r <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> dp[<span style=color:#ae81ff>0</span>][n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> T, cas <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    input(T);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (T<span style=color:#f92672>--</span>) {
</span></span><span style=display:flex><span>        input(word);
</span></span><span style=display:flex><span>        n <span style=color:#f92672>=</span> word.size();
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;Case %d: %d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, cas<span style=color:#f92672>++</span>, solve() <span style=color:#f92672>%</span> MOD);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=c基站选址base-station-locationing>C.基站选址(Base Station Locationing)<a hidden class=anchor aria-hidden=true href=#c基站选址base-station-locationing>#</a></h2><h3 id=description-2>Description<a hidden class=anchor aria-hidden=true href=#description-2>#</a></h3><p>Given a N × M grid which contain A user and B communications companies, and <strong>one single</strong> base station.</p><p>The cost of communication between users and base station is defined as the square of the Euclidean distance.</p><p>The cost for the companies to maintain the base station is defined as the minimal Manhattan distance between the station and all the communications companies.</p><h3 id=solution-2>Solution<a hidden class=anchor aria-hidden=true href=#solution-2>#</a></h3><p>All we have to do is to find the minimal distance with that formula.</p><p><img alt="Alt text" loading=lazy src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/611be1334aab00954c56e31af0bc0cc4></p><p>It&rsquo;s easy to see that we can deal with the x-axis and y-axis separately</p><p><img alt="Alt text" loading=lazy src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/2bffa65945d689235e602935d782256b>.</p><p>We can learn something from the quadratic equation like formula. And of course, we minimum value is near <code>sum(xa[i]) / A</code>. This is same with the y-axis. As a result, we can check the grid near <code>&lt;sum(xa[i]) / A, sum(ya[i]) / A></code>, to see if there is a minimum cost for the communication.</p><p>I don&rsquo;t want to write the code here because it&rsquo;s easy if you know the basis of the algorithm and it&rsquo;s too late now. I&rsquo;m gonna to have a diet pepsi, and say good night for all you guys.</p><p>Lazy guy, indeed. :)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wizmann.top/tags/algorithm/>Algorithm</a></li><li><a href=https://wizmann.top/tags/%E7%AE%97%E6%B3%95/>算法</a></li><li><a href=https://wizmann.top/tags/%E9%A2%98%E8%A7%A3/>题解</a></li><li><a href=https://wizmann.top/tags/microsoft/>Microsoft</a></li></ul><nav class=paginav><a class=prev href=https://wizmann.top/posts/a-common-sorting-function-with-cpp/><span class=title>«</span><br><span>用C++实现一个通用的sort函数</span>
</a><a class=next href=https://wizmann.top/posts/gcj-qualification-round-2015-tutorial/><span class=title>»</span><br><span>GCJ Qualification Round 2015 题解</span></a></nav></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://wizmann.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2025 <a href=https://wizmann.top/>Maerlyn's Rainbow</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>