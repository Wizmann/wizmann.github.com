<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=Content-Security-Policy content="script-src 'self'; style-src 'self' 'unsafe-inline'; object-src 'none'; base-uri 'none'"><link rel=stylesheet href=/css/style.feedcd92d05c2cf19ee7487656b358ee4805f831b7b39711851199d0a6f8934cf9ba379d02425d485c5b65ae299bdffda3770739545d595074076bf3ead284ab.css media=screen integrity="sha512-/u3NktBcLPGe50h2VrNY7kgF+DG3s5cRhRGZ0Kb4k0z5ujedAkJdSFxbZa4pm9/9o3cHOVRdWVB0B2vz6tKEqw==" crossorigin=anonymous><title>Beauty-of-Programming 2015 Qualification Round Tutorial</title>
<meta name=description content="A. 2月29日 (Feb. 29th) Description Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.
Solution The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.
However, it&rsquo;s not an effective way for the problem.
Let simplify the problem. &ldquo;How many Feb. 29th from year A to year B?&rdquo; Actually, it&rsquo;t not a hard one. But there is a pitfall. Loot at this.
"><link rel=canonical href=https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/><link rel=alternate hreflang=zh-CN href=https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/><link rel=alternate hreflang=x-default href=https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/><meta property="og:title" content="Beauty-of-Programming 2015 Qualification Round Tutorial"><meta property="og:description" content="A. 2月29日 (Feb. 29th)
Description
Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.
Solution
The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.
However, it&rsquo;s not an effective way for the problem.
Let simplify the problem. &ldquo;How many Feb. 29th from year A to year B?&rdquo; Actually, it&rsquo;t not a hard one. But there is a pitfall. Loot at this."><meta property="og:type" content="article"><meta property="og:url" content="https://wizmann.top/posts/beauty-of-programming-2015-qualification-round/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-04-25T00:54:08+00:00"><meta property="article:modified_time" content="2015-04-25T00:54:08+00:00"><meta property="og:site_name" content="Maerlyn's Rainbow"><meta name=twitter:card content="summary"><meta name=twitter:title content="Beauty-of-Programming 2015 Qualification Round Tutorial"><meta name=twitter:description content="A. 2月29日 (Feb. 29th)
Description
Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.
Solution
The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.
However, it&rsquo;s not an effective way for the problem.
Let simplify the problem. &ldquo;How many Feb. 29th from year A to year B?&rdquo; Actually, it&rsquo;t not a hard one. But there is a pitfall. Loot at this."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Beauty-of-Programming 2015 Qualification Round Tutorial","datePublished":"2015-04-25T00:54:08+00:00","dateModified":"2015-04-25T00:54:08+00:00","mainEntityOfPage":"https://wizmann.top/","publisher":{"@type":"Organization","name":"Maerlyn's Rainbow"},"wordcount":1270,"description":"A. 2月29日 (Feb. 29th) Description Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.\nSolution The easiest way, of course, the brute force, which is quite simple with Python using the datetime lib.\nHowever, it\u0026rsquo;s not an effective way for the problem.\nLet simplify the problem. \u0026ldquo;How many Feb. 29th from year A to year B?\u0026rdquo; Actually, it\u0026rsquo;t not a hard one. But there is a pitfall. Loot at this.\n","keywords":null}</script></head><body class="posts single d-flex flex-column min-vh-100"><header class=main-header><nav class="navbar navbar-expand-lg"><div class=container><a class=navbar-brand href=/>Maerlyn's Rainbow
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="menu-main navbar-nav me-auto mb-2 mb-lg-0"></ul></div></div></nav></header><div id=content><div class="container py-3"><h2 id=a-2月29日-feb-29th>A. 2月29日 (Feb. 29th)</h2><h3 id=description>Description</h3><p>Given a starting date and an ending date. Count how many Feb. 29th are between the given dates.</p><h3 id=solution>Solution</h3><p>The easiest way, of course, the brute force, which is quite simple with Python using the <code>datetime</code> lib.</p><p>However, it&rsquo;s not an effective way for the problem.</p><p>Let simplify the problem. &ldquo;How many Feb. 29th from year A to year B?&rdquo; Actually, it&rsquo;t not a hard one. But there is a pitfall. Loot at this.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>yearA <span style=color:#f92672>=</span> <span style=color:#ae81ff>2001</span>
</span></span><span style=display:flex><span>yearB <span style=color:#f92672>=</span> <span style=color:#ae81ff>2017</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cnt <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>cnt <span style=color:#f92672>+=</span> (yearB <span style=color:#f92672>-</span> yearA) <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>cnt <span style=color:#f92672>-=</span> (yearB <span style=color:#f92672>-</span> yearA) <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>cnt <span style=color:#f92672>+=</span> (yearB <span style=color:#f92672>-</span> yearA) <span style=color:#f92672>+</span> <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print cnt
</span></span></code></pre></div><p>Seems OK, but a little bit weird, right? But, opps, it absolutely wrong.</p><p>For example,</p><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 536 41"><g transform="translate(8,16)"><path d="M40 0h8" fill="none" stroke="currentcolor"/><path d="M104 0h8" fill="none" stroke="currentcolor"/><path d="M168 0h8" fill="none" stroke="currentcolor"/><path d="M248 0h8" fill="none" stroke="currentcolor"/><path d="M56 16h8" fill="none" stroke="currentcolor"/><path d="M120 16h8" fill="none" stroke="currentcolor"/><path d="M184 16h8" fill="none" stroke="currentcolor"/><path d="M248 16h8" fill="none" stroke="currentcolor"/><polygon points="56.000000,0.000000 44.000000,-5.600000 44.000000,5.600000" fill="currentcolor" transform="rotate(0.000000, 48.000000, 0.000000)"/><polygon points="72.000000,16.000000 60.000000,10.400000 60.000000,21.600000" fill="currentcolor" transform="rotate(0.000000, 64.000000, 16.000000)"/><polygon points="120.000000,0.000000 108.000000,-5.600000 108.000000,5.600000" fill="currentcolor" transform="rotate(0.000000, 112.000000, 0.000000)"/><polygon points="136.000000,16.000000 124.000000,10.400000 124.000000,21.600000" fill="currentcolor" transform="rotate(0.000000, 128.000000, 16.000000)"/><polygon points="184.000000,0.000000 172.000000,-5.600000 172.000000,5.600000" fill="currentcolor" transform="rotate(0.000000, 176.000000, 0.000000)"/><polygon points="200.000000,16.000000 188.000000,10.400000 188.000000,21.600000" fill="currentcolor" transform="rotate(0.000000, 192.000000, 16.000000)"/><polygon points="264.000000,0.000000 252.000000,-5.600000 252.000000,5.600000" fill="currentcolor" transform="rotate(0.000000, 256.000000, 0.000000)"/><polygon points="264.000000,16.000000 252.000000,10.400000 252.000000,21.600000" fill="currentcolor" transform="rotate(0.000000, 256.000000, 16.000000)"/><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="0" y="20" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="8" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="16" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="24" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="32" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="40" y="20" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="64" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="80" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="80" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="88" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="96" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="104" y="20" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="128" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="136" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="144" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="144" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="152" y="4" fill="currentcolor" style="font-size:1em">3</text><text text-anchor="middle" x="152" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="160" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="168" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="192" y="4" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="200" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="208" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="208" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="216" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="216" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="224" y="4" fill="currentcolor" style="font-size:1em">4</text><text text-anchor="middle" x="224" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="232" y="4" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="232" y="20" fill="currentcolor" style="font-size:1em">3</text><text text-anchor="middle" x="272" y="4" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="272" y="20" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="280" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="280" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="288" y="4" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="288" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="296" y="4" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="296" y="20" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="304" y="20" fill="currentcolor" style="font-size:1em">4</text><text text-anchor="middle" x="312" y="20" fill="currentcolor" style="font-size:1em">@</text><text text-anchor="middle" x="328" y="4" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="328" y="20" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="336" y="4" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="336" y="20" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="344" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="344" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="352" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="352" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="360" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="360" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="376" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="376" y="20" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="392" y="4" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="392" y="20" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="400" y="4" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="400" y="20" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="416" y="4" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="416" y="20" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="424" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="424" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="432" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="432" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="440" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="440" y="20" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="448" y="4" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="448" y="20" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="456" y="4" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="456" y="20" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="464" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="464" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="472" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="472" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="480" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="480" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="496" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="496" y="20" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="512" y="4" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="512" y="20" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="520" y="4" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="520" y="20" fill="currentcolor" style="font-size:1em">)</text></g></svg></div><p>The right way is using a <code>ceil</code> way to adjust yearA to the nearest greater leap year.</p><p>And then we deal with other details to make everything right.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdlib&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define print(x) cout &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define input(x) cin &gt;&gt; x 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>long</span> <span style=color:#66d9ef>long</span> llint;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>string months[] <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;January&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;February&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;March&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;April&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;May&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;June&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;July&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;August&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;September&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;October&#34;</span>, 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;November&#34;</span> , 
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;December&#34;</span>};
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Date</span> {
</span></span><span style=display:flex><span>    llint yy, mm, dd;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    Date() {}
</span></span><span style=display:flex><span>    Date(llint iyy, string imm, llint idd)<span style=color:#f92672>:</span> yy(iyy), dd(idd) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>12</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (imm <span style=color:#f92672>==</span> months[i]) {
</span></span><span style=display:flex><span>                mm <span style=color:#f92672>=</span> i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>llint <span style=color:#a6e22e>year_diff</span>(llint a, llint b) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (a <span style=color:#f92672>&gt;=</span> b) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    llint ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    llint aa <span style=color:#f92672>=</span> (a <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>    llint bb <span style=color:#f92672>=</span> (b <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (aa <span style=color:#f92672>&lt;=</span> bb) {
</span></span><span style=display:flex><span>        ans <span style=color:#f92672>+=</span> (bb <span style=color:#f92672>-</span> aa) <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    aa <span style=color:#f92672>=</span> (a <span style=color:#f92672>+</span> <span style=color:#ae81ff>99</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>    bb <span style=color:#f92672>=</span> (b <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (aa <span style=color:#f92672>&lt;=</span> bb) {
</span></span><span style=display:flex><span>        ans <span style=color:#f92672>-=</span> (bb <span style=color:#f92672>-</span> aa) <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    aa <span style=color:#f92672>=</span> (a <span style=color:#f92672>+</span> <span style=color:#ae81ff>399</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>400</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>400</span>;
</span></span><span style=display:flex><span>    bb <span style=color:#f92672>=</span> (b <span style=color:#f92672>/</span> <span style=color:#ae81ff>400</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>400</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (aa <span style=color:#f92672>&lt;=</span> bb) {
</span></span><span style=display:flex><span>        ans <span style=color:#f92672>+=</span> (bb <span style=color:#f92672>-</span> aa) <span style=color:#f92672>/</span> <span style=color:#ae81ff>400</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ans;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>is_leap</span>(<span style=color:#66d9ef>const</span> Date<span style=color:#f92672>&amp;</span> d) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (d.yy <span style=color:#f92672>%</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> d.yy <span style=color:#f92672>%</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>) <span style=color:#f92672>||</span> (d.yy <span style=color:#f92672>%</span> <span style=color:#ae81ff>400</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>llint <span style=color:#a6e22e>solve</span>(<span style=color:#66d9ef>const</span> Date<span style=color:#f92672>&amp;</span> da, <span style=color:#66d9ef>const</span> Date<span style=color:#f92672>&amp;</span> db) {
</span></span><span style=display:flex><span>    llint ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    ans <span style=color:#f92672>+=</span> year_diff(da.yy <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>, db.yy <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (da.yy <span style=color:#f92672>&lt;</span> db.yy <span style=color:#f92672>&amp;&amp;</span> is_leap(da) <span style=color:#f92672>&amp;&amp;</span> da.mm <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>        ans<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (da.yy <span style=color:#f92672>&lt;</span> db.yy <span style=color:#f92672>&amp;&amp;</span> is_leap(db) <span style=color:#f92672>&amp;&amp;</span> (db.mm <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>||</span> (db.mm <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>&amp;&amp;</span> db.dd <span style=color:#f92672>==</span> <span style=color:#ae81ff>29</span>))) {
</span></span><span style=display:flex><span>        ans<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (da.yy <span style=color:#f92672>==</span> db.yy <span style=color:#f92672>&amp;&amp;</span> is_leap(da) <span style=color:#f92672>&amp;&amp;</span> da.mm <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>&amp;&amp;</span> (db.mm <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>||</span> (db.mm <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>&amp;&amp;</span> db.dd <span style=color:#f92672>==</span> <span style=color:#ae81ff>29</span>))) {
</span></span><span style=display:flex><span>        ans<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ans;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> T;
</span></span><span style=display:flex><span>    string mm, temp;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> yy, dd, cas <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    input(T);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (T<span style=color:#f92672>--</span>) {
</span></span><span style=display:flex><span>        Date a, b;
</span></span><span style=display:flex><span>        input(mm <span style=color:#f92672>&gt;&gt;</span> dd <span style=color:#f92672>&gt;&gt;</span> temp <span style=color:#f92672>&gt;&gt;</span> yy);
</span></span><span style=display:flex><span>        a <span style=color:#f92672>=</span> Date(yy, mm, dd);
</span></span><span style=display:flex><span>        input(mm <span style=color:#f92672>&gt;&gt;</span> dd <span style=color:#f92672>&gt;&gt;</span> temp <span style=color:#f92672>&gt;&gt;</span> yy);
</span></span><span style=display:flex><span>        b <span style=color:#f92672>=</span> Date(yy, mm, dd);
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;Case #%d: %lld</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, cas<span style=color:#f92672>++</span>, solve(a, b));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=b-回文字符序列palindrome-subsequences>B. 回文字符序列(Palindrome Subsequences)</h2><h3 id=description-1>Description</h3><p>Given a string, try to count how many subsequences there are palindromes.</p><p>For example, for the string &ldquo;aba&rdquo;, the palindrome subsequences are: &ldquo;a&rdquo;, &ldquo;a&rdquo;, &ldquo;aa&rdquo;, &ldquo;b&rdquo;, &ldquo;aba&rdquo;.</p><h3 id=solution-1>Solution</h3><p>Let&rsquo;s simplify the problem. (Of course, the simple one always comes the first.)</p><blockquote><p>How many substring there are palindromes?</p></blockquote><p>This one is a more populare problem which can be solved with an <code>O(n^2)</code> DP algorithm.</p><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 400 25"><g transform="translate(8,16)"><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="32" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="40" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="48" y="4" fill="currentcolor" style="font-size:1em">j</text><text text-anchor="middle" x="56" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="96" y="4" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="104" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="112" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="120" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="128" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="136" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="152" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="160" y="4" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="176" y="4" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="184" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="192" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="200" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="208" y="4" fill="currentcolor" style="font-size:1em">j</text><text text-anchor="middle" x="216" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="232" y="4" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="240" y="4" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="256" y="4" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="264" y="4" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="272" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="280" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="296" y="4" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="312" y="4" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="320" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="328" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="336" y="4" fill="currentcolor" style="font-size:1em">j</text><text text-anchor="middle" x="352" y="4" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="368" y="4" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="376" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="384" y="4" fill="currentcolor" style="font-size:1em">)</text></g></svg></div><p>If <code>dp[i][j]</code> equals to one, it means that the substring <code>str[i:j + 1]</code> is a palindrome, vice versa.</p><p>For this problem, things are quite similar. If there are some palindrome subsequences at <code>str[i - 1: j]</code>, and at the same time <code>str[i] == str[j]</code>, that is, there must be one or more palindrome subsequences at <code>str[i:j + 1]</code> and these subsequences contain <code>str[i]</code> and <code>str[j]</code>.</p><p>That is the basic idea of the problem, and the DP formula is like this. You can consider why.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>if</span> (str[i] <span style=color:#f92672>!=</span> str[j]):
</span></span><span style=display:flex><span>    dp[i][j] <span style=color:#f92672>=</span> dp[i][j <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> dp[i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][j] <span style=color:#f92672>-</span> dp[i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][j <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>    dp[i][j] <span style=color:#f92672>=</span> dp[i][j <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> dp[i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][j] <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>Be ware, the result need to be module by 100007. As we have minus in the DP formula, don&rsquo;t forget there are possibility that <code>dp[i][j] &lt; 0</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>// This is actually the solution for HDU 4632, which is similar to this problem.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdlib&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstring&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;algorithm&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;string&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define print(x) cout &lt;&lt; x &lt;&lt; endl
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define input(x) cin &gt;&gt; x
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SIZE <span style=color:#f92672>=</span> <span style=color:#ae81ff>1234</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> MOD <span style=color:#f92672>=</span> <span style=color:#ae81ff>10007</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> n;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> dp[SIZE][SIZE];
</span></span><span style=display:flex><span>string word;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>do_mod</span>(<span style=color:#66d9ef>int</span> value) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ((value <span style=color:#f92672>%</span> MOD) <span style=color:#f92672>+</span> MOD) <span style=color:#f92672>%</span> MOD;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>solve</span>() {
</span></span><span style=display:flex><span>    memset(dp, <span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>sizeof</span>(dp));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        dp[i][i] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;</span> n; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>+</span> j <span style=color:#f92672>&lt;</span> n; j<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> l <span style=color:#f92672>=</span> j;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> r <span style=color:#f92672>=</span> i <span style=color:#f92672>+</span> j;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (word[l] <span style=color:#f92672>==</span> word[r]) {
</span></span><span style=display:flex><span>                dp[l][r] <span style=color:#f92672>=</span> do_mod(
</span></span><span style=display:flex><span>                    dp[l][r <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> dp[l <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][r] <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>            } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                dp[l][r] <span style=color:#f92672>=</span> do_mod(
</span></span><span style=display:flex><span>                    dp[l][r <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> dp[l <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][r] <span style=color:#f92672>-</span> dp[l <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][r <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> dp[<span style=color:#ae81ff>0</span>][n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> T, cas <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    input(T);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (T<span style=color:#f92672>--</span>) {
</span></span><span style=display:flex><span>        input(word);
</span></span><span style=display:flex><span>        n <span style=color:#f92672>=</span> word.size();
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;Case %d: %d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, cas<span style=color:#f92672>++</span>, solve() <span style=color:#f92672>%</span> MOD);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=c基站选址base-station-locationing>C.基站选址(Base Station Locationing)</h2><h3 id=description-2>Description</h3><p>Given a N × M grid which contain A user and B communications companies, and <strong>one single</strong> base station.</p><p>The cost of communication between users and base station is defined as the square of the Euclidean distance.</p><p>The cost for the companies to maintain the base station is defined as the minimal Manhattan distance between the station and all the communications companies.</p><h3 id=solution-2>Solution</h3><p>All we have to do is to find the minimal distance with that formula.</p><p><img src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/611be1334aab00954c56e31af0bc0cc4 alt="Alt text"></p><p>It&rsquo;s easy to see that we can deal with the x-axis and y-axis separately</p><p><img src=https://github.com/Wizmann/assets/raw/master/wizmann-pic/2bffa65945d689235e602935d782256b alt="Alt text">.</p><p>We can learn something from the quadratic equation like formula. And of course, we minimum value is near <code>sum(xa[i]) / A</code>. This is same with the y-axis. As a result, we can check the grid near <code>&lt;sum(xa[i]) / A, sum(ya[i]) / A></code>, to see if there is a minimum cost for the communication.</p><p>I don&rsquo;t want to write the code here because it&rsquo;s easy if you know the basis of the algorithm and it&rsquo;s too late now. I&rsquo;m gonna to have a diet pepsi, and say good night for all you guys.</p><p>Lazy guy, indeed. :)</p></div></div><footer class="py-3 mt-auto bg-light"><div class="container py-1 my-1"><div class="d-flex flex-wrap justify-content-between align-items-center"><p class="col-md mb-0 text-muted"></p><ul class="nav col-md-auto justify-content-end"></ul></div></div></footer><script src=/js/main.min.e8d88c82c0438b527f1aca4115652ba1e2877bf805b75593b23ac0e3fe2b3fe95a467d1feef275355132ba061da6404b0d24d55afabc209b294b1db043be014d.js integrity="sha512-6NiMgsBDi1J/GspBFWUroeKHe/gFt1WTsjrA4/4rP+laRn0f7vJ1NVEyugYdpkBLDSTVWvq8IJspSx2wQ74BTQ==" crossorigin=anonymous defer></script></body></html>