<!doctype html><html><head><script>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}}</script><script defer src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><header class=header-wrapper><div class=header><a class=site-title href=https://wizmann.top/>Maerlyn's Rainbow</a><nav class=menu></nav></div></header><main class=main-wrapper><div class=main><section class=single><h1 class=title>constexprè¯¦è§£ - C++ for the Antiquatedï¼ˆä¹‹ä¸€ï¼‰</h1><div class=tip><time datetime="2024-12-28 00:00:00 +0000 UTC">2024/12/28</time>
<span class=split>Â·</span>
<span>2768 words </span><span class=split>Â·</span>
<span>6 minutes to read</span></div><div class=taxonomies><div>Tags:
<a href=/tags/cpp>cpp</a>
<a href=/tags/modern-cpp>modern cpp</a></div></div><hr><div class=content><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥è®¨è®º C++ ä¸­çš„å¸¸é‡è¡¨è¾¾å¼ï¼ˆ<code>constexpr</code>ï¼‰åŠå…¶ä¸ä¼ ç»Ÿçš„<code>const</code>å¸¸é‡çš„åŒºåˆ«ï¼Œå¹¶ç»“åˆå®é™…ä»£ç ç¤ºä¾‹è¿›è¡Œè¯´æ˜ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜ä¼šæ¢è®¨<code>constexpr</code>å‡½æ•°åœ¨æ¨¡æ¿ç¼–ç¨‹ä¸­çš„åº”ç”¨ï¼Œä»¥åŠ C++11 ä¹‹åå¯¹å¸¸é‡è¡¨è¾¾å¼çš„ä¼˜åŒ–ä¸æ‰©å±•ã€‚</p><h2 id=å¸¸é‡è¡¨è¾¾å¼constexpr>å¸¸é‡è¡¨è¾¾å¼ï¼ˆconstexprï¼‰ <a href=#%e5%b8%b8%e9%87%8f%e8%a1%a8%e8%be%be%e5%bc%8fconstexpr class=anchor>ğŸ”—</a></h2><p>åœ¨ C++ ä¸­ï¼Œ<code>const</code> å…³é”®å­—é€šå¸¸ç”¨äºä¿®é¥°å˜é‡ã€å¼•ç”¨å’ŒæŒ‡é’ˆï¼Œä½¿å¾—å®ƒä»¬åœ¨è¿è¡Œæ—¶ä¸èƒ½è¢«ä¿®æ”¹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>const</code> å¹¶æ²¡æœ‰åŒºåˆ†ç¼–è¯‘æœŸå¸¸é‡å’Œè¿è¡Œæ—¶å¸¸é‡ï¼Œå®ƒåªæ˜¯ä¿è¯äº†è¿™äº›å˜é‡åœ¨è¿è¡Œæ—¶ä¸å¯ä¿®æ”¹ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨ <code>const</code> å£°æ˜çš„å˜é‡åœ¨è¿è¡Œæ—¶å…¶å€¼æ˜¯å›ºå®šçš„ï¼Œä½†å¹¶ä¸æ„å‘³ç€å®ƒä»¬åœ¨ç¼–è¯‘æ—¶å·²çŸ¥ã€‚</p><p>ä¸‹é¢æ˜¯ä¼ ç»Ÿ C++ ä¸­ <code>const</code> å…³é”®å­—çš„ä¸€äº›å¸¸è§ç”¨æ³•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#define CONSTANT_1 114514  </span><span style=color:#75715e>// å®ä¹Ÿæ˜¯ä¸€ç§å¸¸é‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> helloworld1 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;helloworld&#34;</span>;  <span style=color:#75715e>// const å­—ç¬¦ä¸²
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> value1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;  <span style=color:#75715e>// å¸¸é‡å€¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> value2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> value3 <span style=color:#f92672>=</span> value1 <span style=color:#f92672>+</span> value2;  <span style=color:#75715e>// è¿è¡Œæ—¶è®¡ç®—
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> value8 <span style=color:#f92672>=</span> pow(value2, value3); 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> arr_pow_of_2[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>};  <span style=color:#75715e>// æ•°ç»„åˆå§‹åŒ–
</span></span></span></code></pre></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œè™½ç„¶ const ä¿®é¥°çš„å˜é‡åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¸èƒ½ä¿®æ”¹ï¼Œä½†å®ƒä»¬çš„å€¼æ˜¯åœ¨è¿è¡Œæ—¶è®¡ç®—çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ç¼–è¯‘æ—¶å°†å®ƒä»¬è§†ä¸ºå¸¸é‡ã€‚æ‰€ä»¥ï¼Œ<code>const</code> å˜é‡ä¹Ÿå¯ä»¥æœ‰å†…å­˜åœ°å€ï¼Œå¹¶ä¸”åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ <code>const_cast</code> å¼ºè¡Œè¿›è¡Œä¿®æ”¹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>MakeChange</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>&amp;</span> x) {
</span></span><span style=display:flex><span>    <span style=color:#f92672>*</span>(<span style=color:#66d9ef>const_cast</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>*&gt;</span>(<span style=color:#f92672>&amp;</span>x)) <span style=color:#f92672>=</span> x <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> x <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    MakeChange(x);
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> x <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl; <span style=color:#75715e>// è¾“å‡ºï¼š2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=å¼•å…¥-constexpr>å¼•å…¥ constexpr <a href=#%e5%bc%95%e5%85%a5-constexpr class=anchor>ğŸ”—</a></h3><p>C++11 å¼•å…¥äº† <code>constexpr</code>ï¼Œå®ƒçš„å­—é¢æ„æ€æ˜¯ <code>constant expression</code>ï¼ˆå¸¸é‡è¡¨è¾¾å¼ï¼‰ï¼Œç”¨äºåœ¨ç¼–è¯‘æ—¶è®¡ç®—å¸¸é‡å€¼ã€‚ä¸ <code>const</code> ä¸åŒï¼Œ<code>constexpr</code> ç¡®ä¿ä¸€ä¸ªå˜é‡æˆ–è€…å‡½æ•°çš„å€¼æ˜¯åœ¨ç¼–è¯‘æ—¶å·²çŸ¥çš„ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æ—¶å¯¹å…¶è¿›è¡Œæ±‚å€¼ã€‚</p><p>é€šè¿‡ä½¿ç”¨ <code>constexpr</code>ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå¹¶ä¸” <code>constexpr</code> å‡½æ•°åœ¨æŸäº›æƒ…å†µä¸‹ä¹Ÿèƒ½å¤Ÿåœ¨ç¼–è¯‘æœŸè®¡ç®—ç»“æœã€‚</p><p>ä½¿ç”¨ <code>constexpr</code> é‡å†™ä¸Šè¿°ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> helloworld1 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;helloworld&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> value1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> value2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> value3 <span style=color:#f92672>=</span> value1 <span style=color:#f92672>+</span> value2;  <span style=color:#75715e>// ç¼–è¯‘æœŸè®¡ç®—
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> value8 <span style=color:#f92672>=</span> pow(value2, value3);  <span style=color:#75715e>// ç¼–è¯‘æœŸè®¡ç®—
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ç¼–è¯‘æœŸåˆå§‹åŒ–æ•°ç»„
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> arr_pow_of_2[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>};  
</span></span></code></pre></div><h2 id=å¸¸é‡è¡¨è¾¾å¼å‡½æ•°>å¸¸é‡è¡¨è¾¾å¼å‡½æ•° <a href=#%e5%b8%b8%e9%87%8f%e8%a1%a8%e8%be%be%e5%bc%8f%e5%87%bd%e6%95%b0 class=anchor>ğŸ”—</a></h2><p><code>constexpr</code> ä¸ä»…å¯ä»¥ä¿®é¥°å˜é‡ï¼Œè¿˜å¯ä»¥ä¿®é¥°å‡½æ•°ã€‚<code>constexpr</code> å‡½æ•°çš„ç‰¹æ€§æ˜¯ï¼Œè‹¥è¾“å…¥çš„å‚æ•°æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œé‚£ä¹ˆå®ƒçš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè®¡ç®— Fibonacci æ•°åˆ—çš„ç¤ºä¾‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>uint64_t</span> MOD <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1LL</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>62</span>) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;  <span style=color:#75715e>// ç¼–è¯‘æ—¶å¸¸é‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>uint64_t</span> <span style=color:#a6e22e>fib</span>(<span style=color:#66d9ef>uint64_t</span> n) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>uint64_t</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, b <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>uint64_t</span> temp <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> b;
</span></span><span style=display:flex><span>        a <span style=color:#f92672>=</span> b;
</span></span><span style=display:flex><span>        b <span style=color:#f92672>=</span> temp <span style=color:#f92672>%</span> MOD;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> b;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// åœ¨ç¼–è¯‘æœŸè®¡ç®— Fibonacci æ•°åˆ—
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>uint64_t</span> result <span style=color:#f92672>=</span> fib(<span style=color:#ae81ff>123456</span>);  
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> result <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>fib</code> å‡½æ•°è¢«æ ‡è®°ä¸º <code>constexpr</code>ï¼Œå› æ­¤å½“ä¼ å…¥å¸¸é‡å‚æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æœŸé—´è®¡ç®—å‡º Fibonacci æ•°åˆ—çš„ç¬¬ <code>123456</code> é¡¹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>constexpr</code> å‡½æ•°çš„è®¡ç®—å­˜åœ¨ä¸€äº›é™åˆ¶ï¼š</p><ol><li><strong>é€’å½’æ·±åº¦é™åˆ¶</strong>ï¼šconstexpr å‡½æ•°çš„é€’å½’æ·±åº¦é€šå¸¸å—åˆ°ç¼–è¯‘å™¨çš„é™åˆ¶ï¼Œå¦‚æœé€’å½’è¿‡æ·±ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šäº§ç”Ÿé”™è¯¯æˆ–è­¦å‘Šã€‚</li><li><strong>è®¡ç®—æ•ˆç‡</strong>ï¼šå°½ç®¡å¸¸é‡è¡¨è¾¾å¼å‡½æ•°å¯ä»¥åœ¨ç¼–è¯‘æœŸè®¡ç®—ï¼Œä½†å¯¹äºå¤æ‚çš„è¿ç®—ï¼Œå¯èƒ½ä¼šå¢åŠ ç¼–è¯‘æ—¶é—´ï¼Œå› ä¸ºç¼–è¯‘å™¨éœ€è¦è¿›è¡Œæ›´å¤šçš„è®¡ç®—ã€‚</li></ol><h3 id=constexpr-vs-æ¨¡æ¿å…ƒç¼–ç¨‹>constexpr vs æ¨¡æ¿å…ƒç¼–ç¨‹ <a href=#constexpr-vs-%e6%a8%a1%e6%9d%bf%e5%85%83%e7%bc%96%e7%a8%8b class=anchor>ğŸ”—</a></h3><p><code>constexpr</code> å‡½æ•°çš„ä½¿ç”¨åœ¨æŸç§ç¨‹åº¦ä¸Šç®€åŒ–äº†æ¨¡æ¿å…ƒç¼–ç¨‹ã€‚ä¼ ç»Ÿçš„æ¨¡æ¿å…ƒç¼–ç¨‹å¯ä»¥å®ç°ä¸ <code>constexpr</code> ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†ä»£ç ç»“æ„é€šå¸¸æ›´åŠ å¤æ‚ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨æ¨¡æ¿å…ƒç¼–ç¨‹è®¡ç®— Fibonacci æ•°åˆ—çš„ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>uint64_t</span> MOD <span style=color:#f92672>=</span> <span style=color:#ae81ff>1999</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>uint64_t</span> N<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Fibonacci</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>uint64_t</span> value <span style=color:#f92672>=</span> (Fibonacci<span style=color:#f92672>&lt;</span>N <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;::</span>value <span style=color:#f92672>+</span> Fibonacci<span style=color:#f92672>&lt;</span>N <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>&gt;::</span>value) <span style=color:#f92672>%</span> MOD;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;&gt;</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Fibonacci</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span><span style=color:#f92672>&gt;</span> { <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>uint64_t</span> value <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; };
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;&gt;</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Fibonacci</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;</span> { <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>uint64_t</span> value <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;Fibonacci(40): &#34;</span> <span style=color:#f92672>&lt;&lt;</span> Fibonacci<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>40</span><span style=color:#f92672>&gt;::</span>value <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>åœ¨è¿™ä¸ªæ¨¡æ¿å…ƒç¼–ç¨‹ç¤ºä¾‹ä¸­ï¼ŒFibonacci ç»“æ„ä½“ä½¿ç”¨é€’å½’æ¨¡æ¿è®¡ç®— Fibonacci æ•°åˆ—çš„ç¬¬ N é¡¹ã€‚è¿™ä¸ <code>constexpr</code> å‡½æ•°ç±»ä¼¼ï¼Œä½†æ¨¡æ¿å…ƒç¼–ç¨‹çš„è¯­æ³•æ›´åŠ ç¹çã€‚<code>constexpr</code> çš„ä¼˜åŠ¿åœ¨äºå®ƒèƒ½å¤Ÿå†™å‡ºæ›´åŠ æ¥è¿‘æ­£å¸¸é€»è¾‘ä»£ç çš„å½¢å¼ï¼Œå¹¶ä¸”å…·æœ‰æ›´å¼ºçš„è¡¨è¾¾èƒ½åŠ›</p><h3 id=c14-å¯¹å¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„å¢å¼º>C++14 å¯¹å¸¸é‡è¡¨è¾¾å¼å‡½æ•°çš„å¢å¼º <a href=#c14-%e5%af%b9%e5%b8%b8%e9%87%8f%e8%a1%a8%e8%be%be%e5%bc%8f%e5%87%bd%e6%95%b0%e7%9a%84%e5%a2%9e%e5%bc%ba class=anchor>ğŸ”—</a></h3><p>åœ¨ C++14 ä¸­ï¼Œå¸¸é‡è¡¨è¾¾å¼å‡½æ•°å¾—åˆ°äº†è¿›ä¸€æ­¥çš„å¢å¼ºã€‚å…·ä½“å¢å¼ºåŒ…æ‹¬ï¼š</p><ul><li><strong>æ”¯æŒå±€éƒ¨å˜é‡</strong>ï¼š<code>constexpr</code> å‡½æ•°å¯ä»¥å£°æ˜å’Œåˆå§‹åŒ–å±€éƒ¨å˜é‡ï¼Œä½†ä¸èƒ½å£°æ˜æœªåˆå§‹åŒ–çš„å˜é‡ã€<code>static</code> æˆ– <code>thread_local</code> å˜é‡ã€‚</li><li><strong>æ”¯æŒ if å’Œ switch è¯­å¥</strong>ï¼š<code>constexpr</code> å‡½æ•°å¯ä»¥ä½¿ç”¨ <code>if</code> å’Œ <code>switch</code> è¯­å¥æ¥æ§åˆ¶æµç¨‹ï¼Œä½†ä¸èƒ½ä½¿ç”¨ <code>got</code>oã€‚</li><li><strong>æ”¯æŒå¾ªç¯è¯­å¥</strong>ï¼š<code>constexpr</code> å‡½æ•°æ”¯æŒæ‰€æœ‰ç±»å‹çš„å¾ªç¯è¯­å¥ï¼ŒåŒ…æ‹¬ <code>for</code>ã€<code>while</code> å’Œ <code>do-while</code>ã€‚</li><li><strong>ä¿®æ”¹ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šåœ¨ constexpr å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä¿®æ”¹å±€éƒ¨å˜é‡å’Œéå¸¸é‡å¼•ç”¨å‚æ•°</li><li><strong>è¿”å›å€¼å¯ä»¥æ˜¯ void</strong>ï¼š<code>constexpr</code> å‡½æ•°å¯ä»¥å£°æ˜è¿”å›ç±»å‹ä¸º <code>void</code>ã€‚</li></ul><h2 id=å¸¸é‡è¡¨è¾¾å¼ä¸æ¨¡æ¿å‡½æ•°>å¸¸é‡è¡¨è¾¾å¼ä¸æ¨¡æ¿å‡½æ•° <a href=#%e5%b8%b8%e9%87%8f%e8%a1%a8%e8%be%be%e5%bc%8f%e4%b8%8e%e6%a8%a1%e6%9d%bf%e5%87%bd%e6%95%b0 class=anchor>ğŸ”—</a></h2><p>åœ¨ C++11 å¼•å…¥ <code>constexpr</code> åï¼Œå»ºè®®åœ¨æ‰€æœ‰éœ€è¦å¸¸é‡è¯­ä¹‰çš„åœºæ™¯ä¸­ä½¿ç”¨ <code>constexpr</code>ã€‚<code>constexpr</code> å˜é‡å’Œå‡½æ•°ä½œä¸ºç¼–è¯‘æ—¶å¸¸é‡ï¼Œåœ¨æ¨¡æ¿å‡½æ•°ä¸­å…·æœ‰å¹¿æ³›çš„åº”ç”¨åœºæ™¯ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡ç¨‹åºçš„æ•ˆç‡å’Œå¯è¯»æ€§ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>typename</span> T<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> T square(T x) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> x;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>uint64_t</span> square2 <span style=color:#f92672>=</span> square(<span style=color:#ae81ff>2</span>);       <span style=color:#75715e>// è®¡ç®—å¸¸é‡çš„å¹³æ–¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>double</span> square2_0 <span style=color:#f92672>=</span> square(<span style=color:#ae81ff>2.0</span>);     <span style=color:#75715e>// è®¡ç®—æµ®ç‚¹æ•°çš„å¹³æ–¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    printf(<span style=color:#e6db74>&#34;%lu</span><span style=color:#ae81ff>\t</span><span style=color:#e6db74>%.04lf</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, square2, square2_0);  <span style=color:#75715e>// è¾“å‡ºç»“æœ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æ¨¡æ¿å‡½æ•° <code>square</code> ä½¿ç”¨äº† <code>constexpr</code>ï¼Œç¡®ä¿åœ¨ç¼–è¯‘æ—¶å°±å¯ä»¥è®¡ç®—ç»“æœã€‚å¯¹äºä¸åŒç±»å‹çš„å‚æ•°ï¼ˆå¦‚æ•´æ•°ã€æµ®ç‚¹æ•°ï¼‰ï¼Œæ¨¡æ¿ä¼šè‡ªåŠ¨è¿›è¡Œå®ä¾‹åŒ–ã€‚</p><p>å¦‚æœæ¨¡æ¿å‚æ•°ä¸æ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Œ<code>constexpr</code> å°†ä¸ä¼šåœ¨ç¼–è¯‘æœŸæ‰§è¡Œï¼Œä½†å‡½æ•°æœ¬èº«ä»ç„¶æ˜¯æœ‰æ•ˆçš„ã€‚</p><h2 id=constexpr-å‡½æ•°ä¸­çš„åŠ¨æ€å†…å­˜åˆ†é…>constexpr å‡½æ•°ä¸­çš„åŠ¨æ€å†…å­˜åˆ†é… <a href=#constexpr-%e5%87%bd%e6%95%b0%e4%b8%ad%e7%9a%84%e5%8a%a8%e6%80%81%e5%86%85%e5%ad%98%e5%88%86%e9%85%8d class=anchor>ğŸ”—</a></h2><p>åœ¨ C++20 ä¸­ï¼Œ<code>constexpr</code> å‡½æ•°å¾—åˆ°äº†è¿›ä¸€æ­¥å¢å¼ºï¼Œæ”¯æŒåœ¨ç¼–è¯‘æœŸè¿›è¡ŒåŠ¨æ€å†…å­˜åˆ†é…ï¼Œä½†ä»ç„¶å­˜åœ¨ä¸€äº›é™åˆ¶ã€‚</p><p><code>std::array</code> çš„æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨æ ˆä¸Šï¼Œè€Œä¸æ˜¯å †ä¸Šã€‚ä¸¥æ ¼çš„è¯´ï¼Œ<code>std::array</code>ä¸æ¶‰åŠåŠ¨æ€å†…å­˜åˆ†é…ã€‚æ‰€ä»¥<code>std::array</code>å¯ä»¥åœ¨<code>constexpr</code>å‡½æ•°ä¸­è¢«åˆå§‹åŒ–ã€ä¿®æ”¹å¹¶è¿”å›ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;array&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span> maxstep<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> std<span style=color:#f92672>::</span>array<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span>, maxstep<span style=color:#f92672>&gt;</span> Collatz(<span style=color:#66d9ef>int</span> x) {
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>array<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span>, maxstep<span style=color:#f92672>&gt;</span> path;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (true) {
</span></span><span style=display:flex><span>        path[idx<span style=color:#f92672>++</span>] <span style=color:#f92672>=</span> x;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (x <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (x <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            x <span style=color:#f92672>/=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>if</span> (x <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>            x <span style=color:#f92672>=</span> x <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> path;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>auto</span> path <span style=color:#f92672>=</span> Collatz(<span style=color:#ae81ff>12345</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>auto</span> item : path) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (item <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, item);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è€Œå¯¹äº<code>std::string</code>æˆ–è€…<code>std::vector</code>è¿™ç§ éœ€è¦åœ¨å †ä¸Šåˆ†é…å†…å­˜çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬åˆ™ä¸å¯ä»¥åœ¨constexprå‡½æ•°ä¸­ç›´æ¥è¿”å›ã€‚ä½†æ˜¯å¯ä»¥åœ¨constexprå‡½æ•°ä¸­åˆ™ç”¨å…¶è¿›è¡Œè®¡ç®—ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;array&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;string&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>square</span>(<span style=color:#66d9ef>int</span> x) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> x;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>CountPrimes</span>(<span style=color:#66d9ef>int</span> n) {
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> primes{<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>};
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>; i <span style=color:#f92672>&lt;=</span> n; i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> flag <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>auto</span> prime : primes) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (i <span style=color:#f92672>%</span> prime <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>                flag <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (square(prime) <span style=color:#f92672>&gt;=</span> i) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (flag) {
</span></span><span style=display:flex><span>            primes.push_back(i);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> primes.size();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> cnt <span style=color:#f92672>=</span> CountPrimes(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>    printf(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, cnt);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=constexpr-virtual-å‡½æ•°>constexpr virtual å‡½æ•° <a href=#constexpr-virtual-%e5%87%bd%e6%95%b0 class=anchor>ğŸ”—</a></h2><p>åœ¨ C++20 ä¸­ï¼Œ<code>constexpr</code> å‡½æ•°å¯ä»¥ä¸ <code>virtual</code> å…³é”®å­—ç»“åˆä½¿ç”¨ï¼Œå®ç°åœ¨ç¼–è¯‘æœŸè¿›è¡Œå¤šæ€æ±‚å€¼ã€‚</p><p>è™šå‡½æ•°çš„ constexpr é™åˆ¶ï¼šconstexpr è™šå‡½æ•°åªèƒ½åœ¨ç¼–è¯‘æœŸæ±‚å€¼ï¼Œå‰ææ˜¯å…¶è¢«è°ƒç”¨çš„å…·ä½“å¯¹è±¡ç±»å‹æ˜¯ç¡®å®šçš„ã€‚</p><p>åœ¨ constexpr ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ virtual å‡½æ•°æ—¶ï¼Œè°ƒç”¨å°†ç»‘å®šåˆ°å…·ä½“æ´¾ç”Ÿç±»çš„å®ç°ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Base</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>virtual</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Value</span>() <span style=color:#66d9ef>const</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#75715e>// è™šæ‹Ÿ constexpr å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Derived1</span> <span style=color:#f92672>:</span> Base {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Value</span>() <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>override</span> { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>; }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Derived2</span> <span style=color:#f92672>:</span> Base {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Value</span>() <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>override</span> { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>2</span>; }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Calc</span>() {
</span></span><span style=display:flex><span>    Base<span style=color:#f92672>*</span> d1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Derived1(); <span style=color:#75715e>// constexpr ä¸­åˆ†é…å†…å­˜
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Base<span style=color:#f92672>*</span> d2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Derived2();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> value <span style=color:#f92672>=</span> d1<span style=color:#f92672>-&gt;</span>Value() <span style=color:#f92672>+</span> d2<span style=color:#f92672>-&gt;</span>Value(); <span style=color:#75715e>// è°ƒç”¨è™šå‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>delete</span> d1; <span style=color:#75715e>// å¿…é¡»é‡Šæ”¾å†…å­˜
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>delete</span> d2;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> value;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>auto</span> v <span style=color:#f92672>=</span> Calc(); <span style=color:#75715e>// åœ¨ç¼–è¯‘æœŸè®¡ç®—
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    printf(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, v);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> v;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=å¸¸é‡è¡¨è¾¾å¼ç”¨äºæ¨¡æ¿å‡½æ•°çš„ç±»å‹åˆ¤æ–­>å¸¸é‡è¡¨è¾¾å¼ç”¨äºæ¨¡æ¿å‡½æ•°çš„ç±»å‹åˆ¤æ–­ <a href=#%e5%b8%b8%e9%87%8f%e8%a1%a8%e8%be%be%e5%bc%8f%e7%94%a8%e4%ba%8e%e6%a8%a1%e6%9d%bf%e5%87%bd%e6%95%b0%e7%9a%84%e7%b1%bb%e5%9e%8b%e5%88%a4%e6%96%ad class=anchor>ğŸ”—</a></h2><p>åœ¨ C++17 ä¸­å¼•å…¥çš„ <code>if constexpr</code> æä¾›äº†ä¸€ç§æ›´åŠ ç®€æ´å’Œå¯è¯»çš„æ–¹å¼æ¥è¿›è¡Œæ¨¡æ¿å…ƒç¼–ç¨‹çš„ç±»å‹åˆ¤æ–­ã€‚æ ¹æ®ç±»å‹ç‰¹æ€§ï¼Œåœ¨ç¼–è¯‘æœŸé€‰æ‹©ä¸åŒçš„åˆ†æ”¯è·¯å¾„ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;type_traits&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>typename</span> T<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> equal(<span style=color:#66d9ef>const</span> T<span style=color:#f92672>&amp;</span> a, <span style=color:#66d9ef>const</span> T<span style=color:#f92672>&amp;</span> b) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>constexpr</span> (std<span style=color:#f92672>::</span>is_integral_v<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> a <span style=color:#f92672>==</span> b; <span style=color:#75715e>// æ•´æ•°ç±»å‹ç›´æ¥æ¯”è¾ƒ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>constexpr</span> (std<span style=color:#f92672>::</span>is_floating_point_v<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> fabs(a <span style=color:#f92672>-</span> b) <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1e-3</span>; <span style=color:#75715e>// æµ®ç‚¹æ•°è¿›è¡Œè¯¯å·®æ¯”è¾ƒ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>static_assert</span>(std<span style=color:#f92672>::</span>is_arithmetic_v<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#f92672>||</span> std<span style=color:#f92672>::</span>is_pointer_v<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>, <span style=color:#e6db74>&#34;not supported&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>boolalpha;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> equal(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;                 <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> equal(<span style=color:#ae81ff>1L</span>, <span style=color:#ae81ff>1L</span>) <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;               <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> equal(<span style=color:#ae81ff>1.0000001</span>, <span style=color:#ae81ff>1.000002</span>) <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;  <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> equal(<span style=color:#ae81ff>1.0000001</span>, <span style=color:#ae81ff>2.000002</span>) <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;  <span style=color:#75715e>// false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>åœ¨ä¼ ç»ŸC++ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨<code>std::enable_if</code>æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚ä½†æ˜¯å¾ˆæ˜æ˜¾ï¼Œè¯­æ³•ä¼šæ˜¾å¾—è¿‡äºç¬¨é‡ã€‚</p><div class=mermaid>#include <type_traits>#include <cmath>#include <cstdio>// æ•´æ•°ç±»å‹
template <typename t>typename std::enable_if<std::is_integral<t>::value, bool>::type
equal(const T& a, const T& b) {
    return a == b;
}
// æµ®ç‚¹ç±»å‹
template <typename t>typename std::enable_if<std::is_floating_point<t>::value, bool>::type
equal(const T& a, const T& b) {
    return std::fabs(a - b) <= 1e-3;
}
// å…¶ä»–ç±»å‹
template <typename t>typename std::enable_if<
!(std::is_integral<t>::value || std::is_floating_point<t>::value), bool>::type
equal(const T& a, const T& b) {
    static_assert(std::is_arithmetic<t>::value || std::is_pointer<t>::value, "not supported");
return false;
}
int main() {
puts(equal(1, 1) ? "true" : "false"); // æ•´æ•°
puts(equal(1.0000001, 1.000002) ? "true" : "false"); // æµ®ç‚¹
return 0;
}</div><h2 id=ä½¿ç”¨constevalå¼ºåˆ¶ä½¿ç”¨ç¼–è¯‘æœŸæ±‚å€¼>ä½¿ç”¨<code>consteval</code>å¼ºåˆ¶ä½¿ç”¨ç¼–è¯‘æœŸæ±‚å€¼ <a href=#%e4%bd%bf%e7%94%a8consteval%e5%bc%ba%e5%88%b6%e4%bd%bf%e7%94%a8%e7%bc%96%e8%af%91%e6%9c%9f%e6%b1%82%e5%80%bc class=anchor>ğŸ”—</a></h2><p><code>consteval</code> æ˜¯åœ¨ C++20 ä¸­å¼•å…¥çš„å…³é”®å­—ï¼Œç”¨äºå£°æ˜ç«‹å³å‡½æ•°ï¼ˆimmediate functionï¼‰ã€‚ç«‹å³å‡½æ•°è¦æ±‚åœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ±‚å€¼ï¼Œä¸èƒ½åœ¨è¿è¡Œæ—¶è°ƒç”¨ã€‚
å¦‚æœè°ƒç”¨ä¸€ä¸ª<code>consteval</code>ã€‚å¦‚æœè°ƒç”¨ <code>consteval</code> å‡½æ•°æ—¶æ— æ³•åœ¨ç¼–è¯‘æœŸè®¡ç®—ï¼Œç¼–è¯‘å™¨å°†æŠ¥é”™ã€‚</p><p><code>constexpr</code> å‡½æ•°åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šé€€åŒ–ä¸ºè¿è¡Œæ—¶è°ƒç”¨ï¼Œ<code>consteval</code> å¯ä»¥é¿å…è¿™ç§æƒ…å†µã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class=mermaid>#include <iostream>// consteval å¼ºåˆ¶è¦æ±‚åœ¨ç¼–è¯‘æ—¶è¿›è¡Œè®¡ç®—
consteval int factorial(int n) {
return (n <= 1) ? 1 : (n * factorial(n - 1));
}
int main() {
constexpr int result = factorial(5); // OKï¼šåœ¨ç¼–è¯‘æ—¶è®¡ç®—
std::cout << "Factorial of 5 is: " << result << std::endl;
// int runtime = 5;
// std::cout << "Factorial of runtime: " << factorial(runtime) << std::endl;
// é”™è¯¯ï¼šfactorial å¿…é¡»åœ¨ç¼–è¯‘æ—¶è°ƒç”¨
return 0;
}</div><h2 id=ä½¿ç”¨constinitæ˜¾å¼è¦æ±‚ç¼–è¯‘æ—¶åˆå§‹åŒ–>ä½¿ç”¨<code>constinit</code>æ˜¾å¼è¦æ±‚ç¼–è¯‘æ—¶åˆå§‹åŒ– <a href=#%e4%bd%bf%e7%94%a8constinit%e6%98%be%e5%bc%8f%e8%a6%81%e6%b1%82%e7%bc%96%e8%af%91%e6%97%b6%e5%88%9d%e5%a7%8b%e5%8c%96 class=anchor>ğŸ”—</a></h2><p><code>constinit</code> å…³é”®å­—ç”¨äºæ˜¾å¼è¦æ±‚å…¨å±€æˆ–é™æ€å˜é‡åœ¨ç¼–è¯‘æœŸå®Œæˆåˆå§‹åŒ–ã€‚
å¦‚æœå˜é‡æ— æ³•åœ¨ç¼–è¯‘æ—¶åˆå§‹åŒ–ï¼Œç¼–è¯‘å™¨å°†æŠ¥é”™ã€‚
<code>constinit</code> ä¸èƒ½ç”¨äºå±€éƒ¨å˜é‡ã€‚</p><p>ä¸ <code>constexpr</code> ä¸åŒï¼Œ<code>constinit</code> å˜é‡å¯ä»¥åœ¨è¿è¡Œæ—¶è¢«ä¿®æ”¹ã€‚
çº¿ç¨‹å®‰å…¨æ€§ï¼šåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œ<code>constinit</code> ç¡®ä¿å˜é‡åœ¨ç¼–è¯‘æœŸåˆå§‹åŒ–ï¼Œé¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><div class=mermaid>#include <array>// ç¼–è¯‘æ—¶åˆå§‹åŒ–
constexpr int compute(int v) { return v * v * v; }
constinit int global = compute(10);
// é”™è¯¯ï¼šconstinit å˜é‡ä¸èƒ½ä¾èµ–è¿è¡Œæ—¶åˆå§‹åŒ–
// constinit int another = global;
int main() {
global = 100; // å…è®¸åœ¨è¿è¡Œæ—¶ä¿®æ”¹
// é”™è¯¯ï¼šconstinit å˜é‡ä¸æ˜¯å¸¸é‡ï¼Œä¸èƒ½ç”¨ä½œæ•°ç»„å¤§å°
// std::array<int, global> arr;
std::cout << "Global value: " << global << std::endl;
return 0;
}</div><h2 id=æ€»ç»“>æ€»ç»“ <a href=#%e6%80%bb%e7%bb%93 class=anchor>ğŸ”—</a></h2><ul><li><code>constexpr</code>åœ¨å¤šæ•°æƒ…å†µä¸‹å¯ä»¥æ›¿ä»£<code>const</code>ä»¥è¡¨è¾¾â€œç¼–è¯‘æœŸå¸¸é‡â€çš„è¯­ä¹‰ï¼Œå¯ç”¨äºå‡½æ•°ã€å˜é‡ã€ç±»ç­‰åœºæ™¯ã€‚constexpr æ”¯æŒåœ¨ç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸè¿›è¡Œæ±‚å€¼ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šé€€åŒ–ä¸ºè¿è¡ŒæœŸæ±‚å€¼ã€‚</li><li>å¸¸é‡è¡¨è¾¾å¼å‡½æ•° æä¾›äº†ä¸€ç§æ›´æ¸…æ™°çš„ç¼–è¯‘æœŸè®¡ç®—æ–¹å¼ï¼Œèƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šå–ä»£å¤æ‚ä¸”æ™¦æ¶©çš„æ¨¡æ¿å…ƒç¼–ç¨‹ã€‚éšç€ C++ æ ‡å‡†çš„æ¼”è¿›ï¼Œ<code>constexpr</code> å‡½æ•°é€æ­¥æ”¯æŒäº†æ›´å¤æ‚çš„è¯­æ³•å’Œé€»è¾‘ï¼Œä¾‹å¦‚æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥å’Œå±€éƒ¨å˜é‡ã€‚ä½†å¯¹äºæç«¯å¤æ‚çš„è®¡ç®—åœºæ™¯ï¼Œç¼–è¯‘æœŸè®¡ç®—å¯èƒ½å¯¼è‡´æ˜¾è‘—çš„ç¼–è¯‘æ—¶é—´å¼€é”€ã€‚</li><li><code>constexpr</code>å¯ä»¥åœ¨æ¨¡æ¿å‡½æ•°ä¸­ç”¨äºç±»å‹åˆ¤æ–­ï¼Œé€šè¿‡<code>if constexpr</code>è¯­æ³•æœ‰æ•ˆåœ°å–ä»£<code>std::enable_if</code>ï¼Œä»è€Œç®€åŒ–æ¨¡æ¿ç¼–ç¨‹ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li><li><code>constexpr</code>å‡½æ•°çš„éšå¼é€€åŒ–é£é™©ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œ<code>constexpr</code> å‡½æ•°å¯èƒ½åœ¨è¿è¡Œæ—¶æ‰§è¡Œã€‚è‹¥éœ€è¦ä¸¥æ ¼ä¿è¯ä»…åœ¨ç¼–è¯‘æœŸæ±‚å€¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>consteval</code> æ¥å¼ºåˆ¶è¿›è¡Œç¼–è¯‘æœŸæ±‚å€¼ï¼Œé¿å…ä¸å¿…è¦çš„è¿è¡Œæ—¶å¼€é”€ã€‚</li><li><code>constinit</code>æä¾›äº†ä¸€ç§æ˜¾å¼è¦æ±‚å˜é‡åœ¨ç¼–è¯‘æ—¶å®Œæˆåˆå§‹åŒ–çš„æœºåˆ¶ï¼Œé€‚ç”¨äºé<code>constexpr</code>å˜é‡ã€‚è¿™åœ¨å…¨å±€å’Œé™æ€å˜é‡çš„åˆå§‹åŒ–ä¸­å°¤ä¸ºæœ‰ç”¨ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„åˆå§‹åŒ–å®‰å…¨æ€§ã€‚</li></ul></div></section></div><div class=side><div class=side-recent><h2 class=side-title><a href=/posts/>Recent Posts</a></h2><hr><ul><li><a href=/posts/why-not-start-with-ddia-part-1/>ä¸ºä»€ä¹ˆæˆ‘ä¸å»ºè®®ä½ é˜…è¯»ã€Šæ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡ã€‹ï¼ˆä¹‹ä¸€ï¼‰</a></li><li><a href=/posts/vertical-axis-wind-turbine-3d-model/>é£åŠ›æ¶¡è½®æœº 3D æ¨¡å‹ / Vertical Axis Wind Turbine (VAWT) 3D Model</a></li><li><a href=/posts/press-pad-3d-model/>3Dæ‰“å°è§£å‹ç©å…· / 3D Printed Fidget Toy</a></li><li><a href=/posts/lava-store/>è®ºæ–‡é˜…è¯»ï¼šLavaStore - é«˜æ€§èƒ½ã€æœ¬åœ°å­˜å‚¨å¼•æ“çš„æ¼”è¿›</a></li><li><a href=/posts/std-smart-ptrs-cpp-for-the-antiquated-4/>åŠ¨æ‰‹å®ç°æ™ºèƒ½æŒ‡é’ˆ ï¼ˆä¸Šç¯‡ï¼‰ - C++ for the Antiquatedï¼ˆä¹‹å››ï¼‰</a></li></ul></div><div class=side-categories><h2>Categories</h2><hr><ul></ul></div><div class=side-tags><h2>Tags</h2><hr><ul><li><a href=/tags/.net>.net (1)</a></li><li><a href=/tags/3d-printing>3d printing (2)</a></li><li><a href=/tags/a2b>a2b (1)</a></li><li><a href=/tags/ahk>ahk (1)</a></li><li><a href=/tags/algorithm>algorithm (26)</a></li><li><a href=/tags/alloca>alloca (1)</a></li><li><a href=/tags/allocate>allocate (1)</a></li><li><a href=/tags/arduino>arduino (1)</a></li><li><a href=/tags/asm>asm (1)</a></li><li><a href=/tags/async>async (2)</a></li><li><a href=/tags/atcoder>atcoder (1)</a></li><li><a href=/tags/autohotkey>autohotkey (1)</a></li><li><a href=/tags/autopilot>autopilot (1)</a></li><li><a href=/tags/azure>azure (2)</a></li><li><a href=/tags/b-tree>b-tree (1)</a></li><li><a href=/tags/basic-paxos>basic paxos (2)</a></li><li><a href=/tags/bbr>bbr (1)</a></li><li><a href=/tags/binary-indexed-tree>binary indexed tree (1)</a></li><li><a href=/tags/binary-tree>binary tree (1)</a></li><li><a href=/tags/bittorrent>bittorrent (1)</a></li><li><a href=/tags/borg>borg (1)</a></li><li><a href=/tags/bw-tree>bw-tree (1)</a></li><li><a href=/tags/c>c# (1)</a></li><li><a href=/tags/c++>c++ (6)</a></li><li><a href=/tags/cache>cache (1)</a></li><li><a href=/tags/cachegrind>cachegrind (1)</a></li><li><a href=/tags/cap>cap (1)</a></li><li><a href=/tags/career>career (1)</a></li><li><a href=/tags/cas>cas (3)</a></li><li><a href=/tags/ceph>ceph (1)</a></li><li><a href=/tags/chrome-extension>chrome-extension (2)</a></li><li><a href=/tags/cmpxchg>cmpxchg (2)</a></li><li><a href=/tags/cocurrency>cocurrency (1)</a></li><li><a href=/tags/code-golf>code golf (1)</a></li><li><a href=/tags/codeforces>codeforces (14)</a></li><li><a href=/tags/compare-ans-swap>compare-ans-swap (1)</a></li><li><a href=/tags/computational-geometry>computational geometry (1)</a></li><li><a href=/tags/consistency>consistency (1)</a></li><li><a href=/tags/cpp>cpp (9)</a></li><li><a href=/tags/cpu>cpu (1)</a></li><li><a href=/tags/cse351>cse351 (2)</a></li><li><a href=/tags/csharp>csharp (1)</a></li><li><a href=/tags/css>css (1)</a></li><li><a href=/tags/data-center>data center (1)</a></li><li><a href=/tags/data-center-management>data center management (1)</a></li><li><a href=/tags/defer>defer (1)</a></li><li><a href=/tags/distributed-system>distributed system (4)</a></li><li><a href=/tags/epoll>epoll (1)</a></li><li><a href=/tags/ergodone>ergodone (1)</a></li><li><a href=/tags/fifo>fifo (1)</a></li><li><a href=/tags/flatbuffer>flatbuffer (2)</a></li><li><a href=/tags/fn-layer>fn-layer (1)</a></li><li><a href=/tags/front-end-development>front-end development (1)</a></li><li><a href=/tags/functional-programming>functional programming (1)</a></li><li><a href=/tags/game>game (1)</a></li><li><a href=/tags/gcj>gcj (1)</a></li><li><a href=/tags/geohash>geohash (1)</a></li><li><a href=/tags/geometric>geometric (1)</a></li><li><a href=/tags/geometry>geometry (1)</a></li><li><a href=/tags/get-things-done>get things done (1)</a></li><li><a href=/tags/google>google (3)</a></li><li><a href=/tags/graph>graph (1)</a></li><li><a href=/tags/head-first>head-first (1)</a></li><li><a href=/tags/heap>heap (1)</a></li><li><a href=/tags/herd7>herd7 (1)</a></li><li><a href=/tags/induction>induction (2)</a></li><li><a href=/tags/interview>interview (5)</a></li><li><a href=/tags/keyboard>keyboard (2)</a></li><li><a href=/tags/kubernetes>kubernetes (1)</a></li><li><a href=/tags/lavastore>lavastore (1)</a></li><li><a href=/tags/leetcode>leetcode (4)</a></li><li><a href=/tags/leveldb>leveldb (1)</a></li><li><a href=/tags/linkedin>linkedin (1)</a></li><li><a href=/tags/linux>linux (1)</a></li><li><a href=/tags/litmus>litmus (1)</a></li><li><a href=/tags/lock-less>lock-less (1)</a></li><li><a href=/tags/lsm-tree>lsm-tree (1)</a></li><li><a href=/tags/markdown>markdown (1)</a></li><li><a href=/tags/median>median (1)</a></li><li><a href=/tags/memory>memory (1)</a></li><li><a href=/tags/memory-barrier>memory-barrier (3)</a></li><li><a href=/tags/mesi>mesi (1)</a></li><li><a href=/tags/message-queue>message queue (1)</a></li><li><a href=/tags/metadata>metadata (1)</a></li><li><a href=/tags/metaprogramming>metaprogramming (1)</a></li><li><a href=/tags/microsoft>microsoft (2)</a></li><li><a href=/tags/misaka>misaka (1)</a></li><li><a href=/tags/modern-c++>modern c++ (1)</a></li><li><a href=/tags/modern-cpp>modern cpp (4)</a></li><li><a href=/tags/mosca>mosca (1)</a></li><li><a href=/tags/mq>mq (1)</a></li><li><a href=/tags/multi-paxos>multi paxos (1)</a></li><li><a href=/tags/multi-thread>multi-thread (3)</a></li><li><a href=/tags/multiprocess>multiprocess (1)</a></li><li><a href=/tags/multithread>multithread (3)</a></li><li><a href=/tags/network>network (1)</a></li><li><a href=/tags/networking>networking (4)</a></li><li><a href=/tags/non-blocking>non-blocking (1)</a></li><li><a href=/tags/normal-distribution>normal-distribution (1)</a></li><li><a href=/tags/ocaml>ocaml (1)</a></li><li><a href=/tags/ot>ot (1)</a></li><li><a href=/tags/parallel>parallel (1)</a></li><li><a href=/tags/partition>partition (1)</a></li><li><a href=/tags/paxos>paxos (2)</a></li><li><a href=/tags/pecifica>pecifica (1)</a></li><li><a href=/tags/pelican>pelican (1)</a></li><li><a href=/tags/phxrpc>phxrpc (8)</a></li><li><a href=/tags/pl>pl (1)</a></li><li><a href=/tags/poi>poi (1)</a></li><li><a href=/tags/poll>poll (1)</a></li><li><a href=/tags/powershell>powershell (1)</a></li><li><a href=/tags/priority-queue>priority queue (1)</a></li><li><a href=/tags/priority_queue>priority_queue (1)</a></li><li><a href=/tags/profile>profile (1)</a></li><li><a href=/tags/programming-interview>programming interview (1)</a></li><li><a href=/tags/promela>promela (2)</a></li><li><a href=/tags/protobuf>protobuf (1)</a></li><li><a href=/tags/protocol>protocol (4)</a></li><li><a href=/tags/python>python (3)</a></li><li><a href=/tags/quartile>quartile (1)</a></li><li><a href=/tags/queue>queue (2)</a></li><li><a href=/tags/quick-sort>quick sort (1)</a></li><li><a href=/tags/quora>quora (1)</a></li><li><a href=/tags/racket>racket (1)</a></li><li><a href=/tags/raft>raft (2)</a></li><li><a href=/tags/rocksdb>rocksdb (2)</a></li><li><a href=/tags/rpc>rpc (4)</a></li><li><a href=/tags/social-network>social network (1)</a></li><li><a href=/tags/socket>socket (1)</a></li><li><a href=/tags/solution>solution (2)</a></li><li><a href=/tags/sort>sort (1)</a></li><li><a href=/tags/spin>spin (4)</a></li><li><a href=/tags/spin/promela>spin/promela (2)</a></li><li><a href=/tags/stack>stack (2)</a></li><li><a href=/tags/stdfunction>std::function (1)</a></li><li><a href=/tags/stl>stl (1)</a></li><li><a href=/tags/storage>storage (3)</a></li><li><a href=/tags/storage-system>storage system (2)</a></li><li><a href=/tags/streambuf>streambuf (1)</a></li><li><a href=/tags/string>string (1)</a></li><li><a href=/tags/stup>stup (3)</a></li><li><a href=/tags/stylish>stylish (1)</a></li><li><a href=/tags/system>system (1)</a></li><li><a href=/tags/system-design>system design (5)</a></li><li><a href=/tags/tcp>tcp (4)</a></li><li><a href=/tags/tcpip>tcpip (1)</a></li><li><a href=/tags/thread>thread (3)</a></li><li><a href=/tags/tlv>tlv (1)</a></li><li><a href=/tags/twisted>twisted (1)</a></li><li><a href=/tags/ucontext>ucontext (2)</a></li><li><a href=/tags/udp>udp (3)</a></li><li><a href=/tags/useless>useless (1)</a></li><li><a href=/tags/userscript>userscript (1)</a></li><li><a href=/tags/valgrind>valgrind (1)</a></li><li><a href=/tags/wait-free>wait-free (1)</a></li><li><a href=/tags/was>was (1)</a></li><li><a href=/tags/wisckey>wisckey (1)</a></li><li><a href=/tags/workflowy>workflowy (1)</a></li><li><a href=/tags/wsl>wsl (1)</a></li><li><a href=/tags/yunfile>yunfile (1)</a></li><li><a href=/tags/zeromq>zeromq (1)</a></li><li><a href=/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B>å¹¶å‘ç¼–ç¨‹ (1)</a></li><li><a href=/tags/%E7%B3%99%E5%BF%AB%E7%8C%9B>ç³™å¿«çŒ› (1)</a></li><li><a href=/tags/%E5%88%9B%E9%80%A0%E5%8A%9B>åˆ›é€ åŠ› (1)</a></li><li><a href=/tags/%E8%AF%BB%E4%B9%A6>è¯»ä¹¦ (2)</a></li><li><a href=/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B>å¤šçº¿ç¨‹ (2)</a></li><li><a href=/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F>åˆ†å¸ƒå¼ç³»ç»Ÿ (6)</a></li><li><a href=/tags/%E5%88%86%E7%B1%BB%E5%99%A8>åˆ†ç±»å™¨ (1)</a></li><li><a href=/tags/%E5%85%AC%E5%BC%80%E8%AF%BE>å…¬å¼€è¯¾ (4)</a></li><li><a href=/tags/%E8%AE%A1%E6%95%B0>è®¡æ•° (1)</a></li><li><a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6>è®¡ç®—æœºç§‘å­¦ (1)</a></li><li><a href=/tags/%E9%93%BE%E8%A1%A8>é“¾è¡¨ (1)</a></li><li><a href=/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB>è®ºæ–‡é˜…è¯» (1)</a></li><li><a href=/tags/%E9%9D%A2%E8%AF%95>é¢è¯• (1)</a></li><li><a href=/tags/%E5%AE%B9%E6%96%A5%E5%8E%9F%E7%90%86>å®¹æ–¥åŸç† (1)</a></li><li><a href=/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F>è®¾è®¡æ¨¡å¼ (2)</a></li><li><a href=/tags/%E6%95%B0%E6%8D%AE%E7%BC%96%E7%A0%81>æ•°æ®ç¼–ç  (1)</a></li><li><a href=/tags/%E6%95%B0%E6%8D%AE%E5%BA%93>æ•°æ®åº“ (4)</a></li><li><a href=/tags/%E6%95%B0%E6%8D%AE%E5%AF%86%E9%9B%86%E5%9E%8B%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F>æ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿ (1)</a></li><li><a href=/tags/%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B>æ•°æ®æ¨¡å‹ (1)</a></li><li><a href=/tags/%E6%95%B0%E6%8D%AE%E7%B3%BB%E7%BB%9F>æ•°æ®ç³»ç»Ÿ (1)</a></li><li><a href=/tags/%E6%80%9D%E7%BB%B4>æ€ç»´ (1)</a></li><li><a href=/tags/%E7%AE%97%E6%B3%95>ç®—æ³• (14)</a></li><li><a href=/tags/%E7%B4%A2%E5%BC%95>ç´¢å¼• (1)</a></li><li><a href=/tags/%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84>ç´¢å¼•ç»“æ„ (1)</a></li><li><a href=/tags/%E9%A2%98%E8%A7%A3>é¢˜è§£ (11)</a></li><li><a href=/tags/%E9%97%B2%E8%81%8A>é—²èŠ (3)</a></li><li><a href=/tags/%E5%8D%8F%E7%A8%8B>åç¨‹ (1)</a></li><li><a href=/tags/%E5%8E%8B%E7%BC%A9>å‹ç¼© (1)</a></li><li><a href=/tags/%E4%B8%80%E8%87%B4%E6%80%A7>ä¸€è‡´æ€§ (3)</a></li><li><a href=/tags/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6>ä¸»ä»å¤åˆ¶ (1)</a></li><li><a href=/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2>å­—ç¬¦ä¸² (1)</a></li><li><a href=/tags/%E6%9C%80%E5%B0%8F%E8%A1%A8%E7%A4%BA%E6%B3%95>æœ€å°è¡¨ç¤ºæ³• (1)</a></li></ul></div></div></main><footer class=footer><div class=footer-row><a class=footer-item href=https://wizmann.top/posts/index.xml>Feed of Posts
<i class=icofont-rss></i></a></div></footer></body></html>