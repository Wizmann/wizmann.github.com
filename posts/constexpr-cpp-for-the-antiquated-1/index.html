<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Maerlyn's Rainbow</title>
<meta name=keywords content><meta name=description content="Date: 2024-12-28
Title: constexpr详解 - C++ for the Antiquated（之一）
Tags: cpp, modern cpp
Slug: constexpr-cpp-for-the-antiquated-1
在这篇文章中，我们将深入讨论 C++ 中的常量表达式（constexpr）及其与传统的const常量的区别，并结合实际代码示例进行说明。同时，我们还会探讨constexpr函数在模板编程中的应用，以及 C++11 之后对常量表达式的优化与扩展。"><meta name=author content="wizmann"><link rel=canonical href=https://wizmann.top/posts/constexpr-cpp-for-the-antiquated-1/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://wizmann.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wizmann.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wizmann.top/favicon-32x32.png><link rel=apple-touch-icon href=https://wizmann.top/apple-touch-icon.png><link rel=mask-icon href=https://wizmann.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://wizmann.top/posts/constexpr-cpp-for-the-antiquated-1/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://wizmann.top/posts/constexpr-cpp-for-the-antiquated-1/"><meta property="og:site_name" content="Maerlyn's Rainbow"><meta property="og:title" content="Maerlyn's Rainbow"><meta property="og:description" content="Date: 2024-12-28 Title: constexpr详解 - C++ for the Antiquated（之一） Tags: cpp, modern cpp Slug: constexpr-cpp-for-the-antiquated-1
在这篇文章中，我们将深入讨论 C++ 中的常量表达式（constexpr）及其与传统的const常量的区别，并结合实际代码示例进行说明。同时，我们还会探讨constexpr函数在模板编程中的应用，以及 C++11 之后对常量表达式的优化与扩展。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Date: 2024-12-28
Title: constexpr详解 - C++ for the Antiquated（之一）
Tags: cpp, modern cpp
Slug: constexpr-cpp-for-the-antiquated-1
在这篇文章中，我们将深入讨论 C++ 中的常量表达式（constexpr）及其与传统的const常量的区别，并结合实际代码示例进行说明。同时，我们还会探讨constexpr函数在模板编程中的应用，以及 C++11 之后对常量表达式的优化与扩展。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wizmann.top/posts/"},{"@type":"ListItem","position":2,"name":"","item":"https://wizmann.top/posts/constexpr-cpp-for-the-antiquated-1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"Date: 2024-12-28 Title: constexpr详解 - C++ for the Antiquated（之一） Tags: cpp, modern cpp Slug: constexpr-cpp-for-the-antiquated-1\n在这篇文章中，我们将深入讨论 C++ 中的常量表达式（constexpr）及其与传统的const常量的区别，并结合实际代码示例进行说明。同时，我们还会探讨constexpr函数在模板编程中的应用，以及 C++11 之后对常量表达式的优化与扩展。\n","keywords":[],"articleBody":"Date: 2024-12-28 Title: constexpr详解 - C++ for the Antiquated（之一） Tags: cpp, modern cpp Slug: constexpr-cpp-for-the-antiquated-1\n在这篇文章中，我们将深入讨论 C++ 中的常量表达式（constexpr）及其与传统的const常量的区别，并结合实际代码示例进行说明。同时，我们还会探讨constexpr函数在模板编程中的应用，以及 C++11 之后对常量表达式的优化与扩展。\n常量表达式（constexpr） 在 C++ 中，const 关键字通常用于修饰变量、引用和指针，使得它们在运行时不能被修改。需要注意的是，const 并没有区分编译期常量和运行时常量，它只是保证了这些变量在运行时不可修改。\n例如，使用 const 声明的变量在运行时其值是固定的，但并不意味着它们在编译时已知。\n下面是传统 C++ 中 const 关键字的一些常见用法：\n#define CONSTANT_1 114514 // 宏也是一种常量 const char* helloworld1 = \"helloworld\"; // const 字符串 const int value1 = 1; // 常量值 const int value2 = 2; const int value3 = value1 + value2; // 运行时计算 const int value8 = pow(value2, value3); const int arr_pow_of_2[] = {1, 2, 4}; // 数组初始化 在上述代码中，虽然 const 修饰的变量在程序运行期间不能修改，但它们的值是在运行时计算的。因此，我们无法在编译时将它们视为常量。所以，const 变量也可以有内存地址，并且在某些情况下可以使用 const_cast 强行进行修改。\n#include #include #include #include void MakeChange(const int\u0026 x) { *(const_cast\u003cint*\u003e(\u0026x)) = x + 1; } int main() { int x = 1; MakeChange(x); std::cout \u003c\u003c x \u003c\u003c std::endl; // 输出：2 return 0; } 引入 constexpr C++11 引入了 constexpr，它的字面意思是 constant expression（常量表达式），用于在编译时计算常量值。与 const 不同，constexpr 确保一个变量或者函数的值是在编译时已知的，编译器会在编译时对其进行求值。\n通过使用 constexpr，我们可以定义编译时常量，并且 constexpr 函数在某些情况下也能够在编译期计算结果。\n使用 constexpr 重写上述代码：\nconstexpr const char* helloworld1 = \"helloworld\"; constexpr int value1 = 1; constexpr int value2 = 2; constexpr int value3 = value1 + value2; // 编译期计算 constexpr int value8 = pow(value2, value3); // 编译期计算 // 编译期初始化数组 constexpr const int arr_pow_of_2[] = {1, 2, 4}; 常量表达式函数 constexpr 不仅可以修饰变量，还可以修饰函数。constexpr 函数的特性是，若输入的参数是编译时常量，那么它的返回值也是一个编译时常量。\n以下是一个计算 Fibonacci 数列的示例：\nconstexpr uint64_t MOD = (1LL \u003c\u003c 62) - 1; // 编译时常量 constexpr uint64_t fib(uint64_t n) { uint64_t a = 0, b = 1; for (int i = 0; i \u003c n; ++i) { uint64_t temp = a + b; a = b; b = temp % MOD; } return b; } int main() { // 在编译期计算 Fibonacci 数列 constexpr uint64_t result = fib(123456); std::cout \u003c\u003c result \u003c\u003c std::endl; return 0; } 在这段代码中，fib 函数被标记为 constexpr，因此当传入常量参数时，编译器会在编译期间计算出 Fibonacci 数列的第 123456 项。需要注意的是，constexpr 函数的计算存在一些限制：\n递归深度限制：constexpr 函数的递归深度通常受到编译器的限制，如果递归过深，编译器可能会产生错误或警告。 计算效率：尽管常量表达式函数可以在编译期计算，但对于复杂的运算，可能会增加编译时间，因为编译器需要进行更多的计算。 constexpr vs 模板元编程 constexpr 函数的使用在某种程度上简化了模板元编程。传统的模板元编程可以实现与 constexpr 类似的功能，但代码结构通常更加复杂。下面是使用模板元编程计算 Fibonacci 数列的代码：\nconst uint64_t MOD = 1999; template \u003cuint64_t N\u003e struct Fibonacci { static const uint64_t value = (Fibonacci\u003cN - 1\u003e::value + Fibonacci\u003cN - 2\u003e::value) % MOD; }; template \u003c\u003e struct Fibonacci\u003c0\u003e { static const uint64_t value = 0; }; template \u003c\u003e struct Fibonacci\u003c1\u003e { static const uint64_t value = 1; }; int main() { std::cout \u003c\u003c \"Fibonacci(40): \" \u003c\u003c Fibonacci\u003c40\u003e::value \u003c\u003c std::endl; return 0; } 在这个模板元编程示例中，Fibonacci 结构体使用递归模板计算 Fibonacci 数列的第 N 项。这与 constexpr 函数类似，但模板元编程的语法更加繁琐。constexpr 的优势在于它能够写出更加接近正常逻辑代码的形式，并且具有更强的表达能力\nC++14 对常量表达式函数的增强 在 C++14 中，常量表达式函数得到了进一步的增强。具体增强包括：\n支持局部变量：constexpr 函数可以声明和初始化局部变量，但不能声明未初始化的变量、static 或 thread_local 变量。 支持 if 和 switch 语句：constexpr 函数可以使用 if 和 switch 语句来控制流程，但不能使用 goto。 支持循环语句：constexpr 函数支持所有类型的循环语句，包括 for、while 和 do-while。 修改生命周期：在 constexpr 函数内部，可以修改局部变量和非常量引用参数 返回值可以是 void：constexpr 函数可以声明返回类型为 void。 常量表达式与模板函数 在 C++11 引入 constexpr 后，建议在所有需要常量语义的场景中使用 constexpr。constexpr 变量和函数作为编译时常量，在模板函数中具有广泛的应用场景，能够显著提升程序的效率和可读性。\n#include #include template \u003ctypename T\u003e constexpr T square(T x) { return x * x; } int main() { constexpr uint64_t square2 = square(2); // 计算常量的平方 constexpr double square2_0 = square(2.0); // 计算浮点数的平方 printf(\"%lu\\t%.04lf\\n\", square2, square2_0); // 输出结果 return 0; } 模板函数 square 使用了 constexpr，确保在编译时就可以计算结果。对于不同类型的参数（如整数、浮点数），模板会自动进行实例化。\n如果模板参数不是编译期常量，constexpr 将不会在编译期执行，但函数本身仍然是有效的。\nconstexpr 函数中的动态内存分配 在 C++20 中，constexpr 函数得到了进一步增强，支持在编译期进行动态内存分配，但仍然存在一些限制。\nstd::array 的所有数据都存储在栈上，而不是堆上。严格的说，std::array不涉及动态内存分配。所以std::array可以在constexpr函数中被初始化、修改并返回。\n#include #include #include #include template \u003cint maxstep=100\u003e constexpr std::array\u003cint, maxstep\u003e Collatz(int x) { std::array\u003cint, maxstep\u003e path; int idx = 0; while (true) { path[idx++] = x; if (x == 1) { break; } if (x % 2 == 0) { x /= 2; } else if (x % 2 == 1) { x = x * 3 + 1; } } return path; } int main() { constexpr auto path = Collatz(12345); for (auto item : path) { if (item == 0) { break; } printf(\"%d\\n\", item); } return 0; } 而对于std::string或者std::vector这种 需要在堆上分配内存的数据结构，我们则不可以在constexpr函数中直接返回。但是可以在constexpr函数中则用其进行计算。\n#include #include #include #include #include constexpr int square(int x) { return x * x; } constexpr int CountPrimes(int n) { std::vector\u003cint\u003e primes{2, 3}; for (int i = 5; i \u003c= n; i += 2) { bool flag = true; for (auto prime : primes) { if (i % prime == 0) { flag = false; break; } if (square(prime) \u003e= i) { break; } } if (flag) { primes.push_back(i); } } return primes.size(); } int main() { constexpr int cnt = CountPrimes(100); printf(\"%d\\n\", cnt); return 0; } constexpr virtual 函数 在 C++20 中，constexpr 函数可以与 virtual 关键字结合使用，实现在编译期进行多态求值。\n虚函数的 constexpr 限制：constexpr 虚函数只能在编译期求值，前提是其被调用的具体对象类型是确定的。\n在 constexpr 上下文中调用 virtual 函数时，调用将绑定到具体派生类的实现。\n#include #include struct Base { constexpr virtual int Value() const = 0; // 虚拟 constexpr 函数 }; struct Derived1 : Base { constexpr int Value() const override { return 1; } }; struct Derived2 : Base { constexpr int Value() const override { return 2; } }; constexpr int Calc() { Base* d1 = new Derived1(); // constexpr 中分配内存 Base* d2 = new Derived2(); int value = d1-\u003eValue() + d2-\u003eValue(); // 调用虚函数 delete d1; // 必须释放内存 delete d2; return value; } int main() { constexpr auto v = Calc(); // 在编译期计算 printf(\"%d\\n\", v); return v; } 常量表达式用于模板函数的类型判断 在 C++17 中引入的 if constexpr 提供了一种更加简洁和可读的方式来进行模板元编程的类型判断。根据类型特性，在编译期选择不同的分支路径。\n#include #include #include #include #include template \u003ctypename T\u003e bool equal(const T\u0026 a, const T\u0026 b) { if constexpr (std::is_integral_v\u003cT\u003e) { return a == b; // 整数类型直接比较 } else if constexpr (std::is_floating_point_v\u003cT\u003e) { return fabs(a - b) \u003c= 1e-3; // 浮点数进行误差比较 } else { static_assert(std::is_arithmetic_v\u003cT\u003e || std::is_pointer_v\u003cT\u003e, \"not supported\"); } } int main() { std::cout \u003c\u003c std::boolalpha; std::cout \u003c\u003c equal(1, 1) \u003c\u003c std::endl; // true std::cout \u003c\u003c equal(1L, 1L) \u003c\u003c std::endl; // true std::cout \u003c\u003c equal(1.0000001, 1.000002) \u003c\u003c std::endl; // true std::cout \u003c\u003c equal(1.0000001, 2.000002) \u003c\u003c std::endl; // false return 0; } 在传统C++中，我们常用std::enable_if来实现类似的功能。但是很明显，语法会显得过于笨重。\n# # # t t e } t t e } t t e } i } i i i e y q e y q e y q n n n n m p u m p u m p u t c c c 整 p e a 浮 p e a 其 p e a l l l 数 l n l r 点 l n l r 他 l n ! l s r m p p r u u u 类 a a ( e 类 a a ( e 类 a a ( ( t e a u u e d d d 型 t m c t 型 t m c t 型 t m s c a t i t t t e e e e e o u e e o u e e t o t u n s s u n r n r d n i r ( ( ( r \u003c \u003c \u003c \u003c s s n \u003c s s n \u003c s : s c n ) e e n t c c t t t t t t t t : t _ q q y m s y d a y d s y d i a f { u u 0 p a t p : T p : T t p : s T s a a a ; e t d e : \u0026 = e : \u0026 d e : _ \u0026 s l l l _ h i n e = n e : n e i e s ( ( t \u003e o a n a a n a : a n n a r e 1 1 r \u003e m a , b m a , f m a t , t ; , . a e b ; e b a e b e ( 0 i l c l c b l g c s 1 0 t T e o T e o s T e r o t ) 0 s \u003e _ n \u003e _ n ( \u003e _ a n d 0 \u003e i s i s a i l s : ? 0 f t f t f \u003c t : 0 \u003c \u003c - \u003c T i \" 1 s T s T \u003e T s t , t \u0026 t \u0026 b : \u0026 _ r d d ) : a u 1 : b : b v b r e . : ) : ) \u003c a ) i \" 0 i i = l t 0 s { s { u { h : 0 _ _ 1 e m 0 i f e e \" 0 n l - t f 2 t o 3 i a ) e a ; c l g t s \u003c s ? r i t T e a n d \u003e \" \" l g : : ) t \u003c _ : : ; r T p i v u \u003e o s a e : i _ l \" : n f u v t l e : a \u003c o l T a \" u \u003e t f e : i a , : n s l v g t s b a _ d e o l p : \" o u o : ) l e i i ; \u003e , n s : t _ : b \u003c p t o T o y o \u003e i p l : n e \u003e : t : v e : a r t l \u003c y u T 整 p e \u003e 数 浮 e ) : 点 , : v b a o l o u l e \u003e , : : \" t n y o p t e s u p p o r t e d \" ) ; 使用consteval强制使用编译期求值 consteval 是在 C++20 中引入的关键字，用于声明立即函数（immediate function）。立即函数要求在编译时进行求值，不能在运行时调用。 如果调用一个consteval。如果调用 consteval 函数时无法在编译期计算，编译器将报错。\nconstexpr 函数在某些情况下可能会退化为运行时调用，consteval 可以避免这种情况。\n例如：\n# c } i } i o n n n t c c s l o t r m c s r u n e e a o t e d s v t i n d t e t a u n s : i s 错 u e l r ( t : n t 误 r \u003c v n ) e c t d ： n i a i x o : f o l n ( { p u r : a 0 s t n r t u c c ; t 强 n o t r 制 f \u003c i t u o e 要 a = n i t r a 求 c t m i m 在 t 1 \" e a \u003e 编 o ) r F l 译 r e a = 时 i ? s c \" 必 进 a u t 5 F 须 行 l 1 l o ; a 在 计 ( t r c 编 算 i : i t 译 n = a o 时 t ( l r 调 n f i 用 n a o a ) c f l t { f o 5 o a r f c i i t a s r o l : u r ( n i 5 \" t a ) i l ; m ( e n : r - e \" O s 1 K u ) ： l ) 在 t ; 编 f 译 a 时 c 计 t 算 s o t r d i : a : l e ( n r d u l n ; t i m e ) s t d : : e n d l ; 使用constinit显式要求编译时初始化 constinit 关键字用于显式要求全局或静态变量在编译期完成初始化。 如果变量无法在编译时初始化，编译器将报错。 constinit 不能用于局部变量。\n与 constexpr 不同，constinit 变量可以在运行时被修改。 线程安全性：在多线程环境中，constinit 确保变量在编译期初始化，避免线程安全问题。\n# c c i } i o o n n n n t c 编 s s 错 c l 译 t t 误 o m g s r u 时 e i ： n a l t e d 初 x n c s i o d t e 始 p i o t n b 错 s : u 化 r t n i ( a 误 t : r \u003c s n ) l ： d c n a i i t i c : o r n n i t { = o : u 0 r t t n n a t ; a i i 1 s r y c g t n 0 t r \u003e o l t 0 i a m o 变 ; n y p b 量 a i \u003c \" u a 不 n t i G t l 能 o n l e 依 t 变 t o ( = 赖 h 允 量 , b i 运 e 许 不 a n c 行 r 在 是 g l t o 时 运 常 l m 初 = 行 量 o v p 始 时 ， b a u 化 g 修 不 a l t l 改 能 l u { e o 用 \u003e e ( b 作 : r 1 a 数 a e 0 l 组 r \" t ) ; 大 r u ; 小 ; r n g v l o b a l v ; s t } d : : e n d l ; 总结 constexpr在多数情况下可以替代const以表达“编译期常量”的语义，可用于函数、变量、类等场景。constexpr 支持在编译期和运行期进行求值，但在某些情况下可能会退化为运行期求值。 常量表达式函数 提供了一种更清晰的编译期计算方式，能够在一定程度上取代复杂且晦涩的模板元编程。随着 C++ 标准的演进，constexpr 函数逐步支持了更复杂的语法和逻辑，例如条件语句、循环语句和局部变量。但对于极端复杂的计算场景，编译期计算可能导致显著的编译时间开销。 constexpr可以在模板函数中用于类型判断，通过if constexpr语法有效地取代std::enable_if，从而简化模板编程，提高代码的可读性和可维护性。 constexpr函数的隐式退化风险：在某些场景下，constexpr 函数可能在运行时执行。若需要严格保证仅在编译期求值，可以使用 consteval 来强制进行编译期求值，避免不必要的运行时开销。 constinit提供了一种显式要求变量在编译时完成初始化的机制，适用于非constexpr变量。这在全局和静态变量的初始化中尤为有用，同时也保证了多线程环境下的初始化安全性。 ","wordCount":"4787","inLanguage":"zh-cn","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"wizmann"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wizmann.top/posts/constexpr-cpp-for-the-antiquated-1/"},"publisher":{"@type":"Organization","name":"Maerlyn's Rainbow","logo":{"@type":"ImageObject","url":"https://wizmann.top/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wizmann.top/ accesskey=h title="Maerlyn's Rainbow (Alt + H)">Maerlyn's Rainbow</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent"></h1><div class=post-meta>wizmann</div></header><div class=post-content><p>Date: 2024-12-28
Title: constexpr详解 - C++ for the Antiquated（之一）
Tags: cpp, modern cpp
Slug: constexpr-cpp-for-the-antiquated-1</p><p>在这篇文章中，我们将深入讨论 C++ 中的常量表达式（<code>constexpr</code>）及其与传统的<code>const</code>常量的区别，并结合实际代码示例进行说明。同时，我们还会探讨<code>constexpr</code>函数在模板编程中的应用，以及 C++11 之后对常量表达式的优化与扩展。</p><h2 id=常量表达式constexpr>常量表达式（constexpr）<a hidden class=anchor aria-hidden=true href=#常量表达式constexpr>#</a></h2><p>在 C++ 中，<code>const</code> 关键字通常用于修饰变量、引用和指针，使得它们在运行时不能被修改。需要注意的是，<code>const</code> 并没有区分编译期常量和运行时常量，它只是保证了这些变量在运行时不可修改。</p><p>例如，使用 <code>const</code> 声明的变量在运行时其值是固定的，但并不意味着它们在编译时已知。</p><p>下面是传统 C++ 中 <code>const</code> 关键字的一些常见用法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#define CONSTANT_1 114514  </span><span style=color:#75715e>// 宏也是一种常量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> helloworld1 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;helloworld&#34;</span>;  <span style=color:#75715e>// const 字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> value1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;  <span style=color:#75715e>// 常量值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> value2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> value3 <span style=color:#f92672>=</span> value1 <span style=color:#f92672>+</span> value2;  <span style=color:#75715e>// 运行时计算
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> value8 <span style=color:#f92672>=</span> pow(value2, value3); 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> arr_pow_of_2[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>};  <span style=color:#75715e>// 数组初始化
</span></span></span></code></pre></div><p>在上述代码中，虽然 const 修饰的变量在程序运行期间不能修改，但它们的值是在运行时计算的。因此，我们无法在编译时将它们视为常量。所以，<code>const</code> 变量也可以有内存地址，并且在某些情况下可以使用 <code>const_cast</code> 强行进行修改。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>MakeChange</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>&amp;</span> x) {
</span></span><span style=display:flex><span>    <span style=color:#f92672>*</span>(<span style=color:#66d9ef>const_cast</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>*&gt;</span>(<span style=color:#f92672>&amp;</span>x)) <span style=color:#f92672>=</span> x <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> x <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    MakeChange(x);
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> x <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl; <span style=color:#75715e>// 输出：2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=引入-constexpr>引入 constexpr<a hidden class=anchor aria-hidden=true href=#引入-constexpr>#</a></h3><p>C++11 引入了 <code>constexpr</code>，它的字面意思是 <code>constant expression</code>（常量表达式），用于在编译时计算常量值。与 <code>const</code> 不同，<code>constexpr</code> 确保一个变量或者函数的值是在编译时已知的，编译器会在编译时对其进行求值。</p><p>通过使用 <code>constexpr</code>，我们可以定义编译时常量，并且 <code>constexpr</code> 函数在某些情况下也能够在编译期计算结果。</p><p>使用 <code>constexpr</code> 重写上述代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> helloworld1 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;helloworld&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> value1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> value2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> value3 <span style=color:#f92672>=</span> value1 <span style=color:#f92672>+</span> value2;  <span style=color:#75715e>// 编译期计算
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> value8 <span style=color:#f92672>=</span> pow(value2, value3);  <span style=color:#75715e>// 编译期计算
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 编译期初始化数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> arr_pow_of_2[] <span style=color:#f92672>=</span> {<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>};  
</span></span></code></pre></div><h2 id=常量表达式函数>常量表达式函数<a hidden class=anchor aria-hidden=true href=#常量表达式函数>#</a></h2><p><code>constexpr</code> 不仅可以修饰变量，还可以修饰函数。<code>constexpr</code> 函数的特性是，若输入的参数是编译时常量，那么它的返回值也是一个编译时常量。</p><p>以下是一个计算 Fibonacci 数列的示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>uint64_t</span> MOD <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1LL</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>62</span>) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;  <span style=color:#75715e>// 编译时常量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>uint64_t</span> <span style=color:#a6e22e>fib</span>(<span style=color:#66d9ef>uint64_t</span> n) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>uint64_t</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, b <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>uint64_t</span> temp <span style=color:#f92672>=</span> a <span style=color:#f92672>+</span> b;
</span></span><span style=display:flex><span>        a <span style=color:#f92672>=</span> b;
</span></span><span style=display:flex><span>        b <span style=color:#f92672>=</span> temp <span style=color:#f92672>%</span> MOD;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> b;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 在编译期计算 Fibonacci 数列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>uint64_t</span> result <span style=color:#f92672>=</span> fib(<span style=color:#ae81ff>123456</span>);  
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> result <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>在这段代码中，<code>fib</code> 函数被标记为 <code>constexpr</code>，因此当传入常量参数时，编译器会在编译期间计算出 Fibonacci 数列的第 <code>123456</code> 项。需要注意的是，<code>constexpr</code> 函数的计算存在一些限制：</p><ol><li><strong>递归深度限制</strong>：constexpr 函数的递归深度通常受到编译器的限制，如果递归过深，编译器可能会产生错误或警告。</li><li><strong>计算效率</strong>：尽管常量表达式函数可以在编译期计算，但对于复杂的运算，可能会增加编译时间，因为编译器需要进行更多的计算。</li></ol><h3 id=constexpr-vs-模板元编程>constexpr vs 模板元编程<a hidden class=anchor aria-hidden=true href=#constexpr-vs-模板元编程>#</a></h3><p><code>constexpr</code> 函数的使用在某种程度上简化了模板元编程。传统的模板元编程可以实现与 <code>constexpr</code> 类似的功能，但代码结构通常更加复杂。下面是使用模板元编程计算 Fibonacci 数列的代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>uint64_t</span> MOD <span style=color:#f92672>=</span> <span style=color:#ae81ff>1999</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>uint64_t</span> N<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Fibonacci</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>uint64_t</span> value <span style=color:#f92672>=</span> (Fibonacci<span style=color:#f92672>&lt;</span>N <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;::</span>value <span style=color:#f92672>+</span> Fibonacci<span style=color:#f92672>&lt;</span>N <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>&gt;::</span>value) <span style=color:#f92672>%</span> MOD;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;&gt;</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Fibonacci</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span><span style=color:#f92672>&gt;</span> { <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>uint64_t</span> value <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; };
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;&gt;</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Fibonacci</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>1</span><span style=color:#f92672>&gt;</span> { <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>uint64_t</span> value <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;Fibonacci(40): &#34;</span> <span style=color:#f92672>&lt;&lt;</span> Fibonacci<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>40</span><span style=color:#f92672>&gt;::</span>value <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>在这个模板元编程示例中，Fibonacci 结构体使用递归模板计算 Fibonacci 数列的第 N 项。这与 <code>constexpr</code> 函数类似，但模板元编程的语法更加繁琐。<code>constexpr</code> 的优势在于它能够写出更加接近正常逻辑代码的形式，并且具有更强的表达能力</p><h3 id=c14-对常量表达式函数的增强>C++14 对常量表达式函数的增强<a hidden class=anchor aria-hidden=true href=#c14-对常量表达式函数的增强>#</a></h3><p>在 C++14 中，常量表达式函数得到了进一步的增强。具体增强包括：</p><ul><li><strong>支持局部变量</strong>：<code>constexpr</code> 函数可以声明和初始化局部变量，但不能声明未初始化的变量、<code>static</code> 或 <code>thread_local</code> 变量。</li><li><strong>支持 if 和 switch 语句</strong>：<code>constexpr</code> 函数可以使用 <code>if</code> 和 <code>switch</code> 语句来控制流程，但不能使用 <code>got</code>o。</li><li><strong>支持循环语句</strong>：<code>constexpr</code> 函数支持所有类型的循环语句，包括 <code>for</code>、<code>while</code> 和 <code>do-while</code>。</li><li><strong>修改生命周期</strong>：在 constexpr 函数内部，可以修改局部变量和非常量引用参数</li><li><strong>返回值可以是 void</strong>：<code>constexpr</code> 函数可以声明返回类型为 <code>void</code>。</li></ul><h2 id=常量表达式与模板函数>常量表达式与模板函数<a hidden class=anchor aria-hidden=true href=#常量表达式与模板函数>#</a></h2><p>在 C++11 引入 <code>constexpr</code> 后，建议在所有需要常量语义的场景中使用 <code>constexpr</code>。<code>constexpr</code> 变量和函数作为编译时常量，在模板函数中具有广泛的应用场景，能够显著提升程序的效率和可读性。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>typename</span> T<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> T square(T x) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> x;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>uint64_t</span> square2 <span style=color:#f92672>=</span> square(<span style=color:#ae81ff>2</span>);       <span style=color:#75715e>// 计算常量的平方
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>double</span> square2_0 <span style=color:#f92672>=</span> square(<span style=color:#ae81ff>2.0</span>);     <span style=color:#75715e>// 计算浮点数的平方
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    printf(<span style=color:#e6db74>&#34;%lu</span><span style=color:#ae81ff>\t</span><span style=color:#e6db74>%.04lf</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, square2, square2_0);  <span style=color:#75715e>// 输出结果
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>模板函数 <code>square</code> 使用了 <code>constexpr</code>，确保在编译时就可以计算结果。对于不同类型的参数（如整数、浮点数），模板会自动进行实例化。</p><p>如果模板参数不是编译期常量，<code>constexpr</code> 将不会在编译期执行，但函数本身仍然是有效的。</p><h2 id=constexpr-函数中的动态内存分配>constexpr 函数中的动态内存分配<a hidden class=anchor aria-hidden=true href=#constexpr-函数中的动态内存分配>#</a></h2><p>在 C++20 中，<code>constexpr</code> 函数得到了进一步增强，支持在编译期进行动态内存分配，但仍然存在一些限制。</p><p><code>std::array</code> 的所有数据都存储在栈上，而不是堆上。严格的说，<code>std::array</code>不涉及动态内存分配。所以<code>std::array</code>可以在<code>constexpr</code>函数中被初始化、修改并返回。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;array&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span> maxstep<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> std<span style=color:#f92672>::</span>array<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span>, maxstep<span style=color:#f92672>&gt;</span> Collatz(<span style=color:#66d9ef>int</span> x) {
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>array<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span>, maxstep<span style=color:#f92672>&gt;</span> path;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (true) {
</span></span><span style=display:flex><span>        path[idx<span style=color:#f92672>++</span>] <span style=color:#f92672>=</span> x;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (x <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (x <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            x <span style=color:#f92672>/=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>if</span> (x <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>            x <span style=color:#f92672>=</span> x <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> path;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>auto</span> path <span style=color:#f92672>=</span> Collatz(<span style=color:#ae81ff>12345</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>auto</span> item : path) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (item <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, item);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>而对于<code>std::string</code>或者<code>std::vector</code>这种 需要在堆上分配内存的数据结构，我们则不可以在constexpr函数中直接返回。但是可以在constexpr函数中则用其进行计算。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;array&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;string&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>square</span>(<span style=color:#66d9ef>int</span> x) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> x;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>CountPrimes</span>(<span style=color:#66d9ef>int</span> n) {
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> primes{<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>};
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>; i <span style=color:#f92672>&lt;=</span> n; i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bool</span> flag <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>auto</span> prime : primes) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (i <span style=color:#f92672>%</span> prime <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>                flag <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (square(prime) <span style=color:#f92672>&gt;=</span> i) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (flag) {
</span></span><span style=display:flex><span>            primes.push_back(i);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> primes.size();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> cnt <span style=color:#f92672>=</span> CountPrimes(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>    printf(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, cnt);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=constexpr-virtual-函数>constexpr virtual 函数<a hidden class=anchor aria-hidden=true href=#constexpr-virtual-函数>#</a></h2><p>在 C++20 中，<code>constexpr</code> 函数可以与 <code>virtual</code> 关键字结合使用，实现在编译期进行多态求值。</p><p>虚函数的 constexpr 限制：constexpr 虚函数只能在编译期求值，前提是其被调用的具体对象类型是确定的。</p><p>在 constexpr 上下文中调用 virtual 函数时，调用将绑定到具体派生类的实现。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Base</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>virtual</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Value</span>() <span style=color:#66d9ef>const</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#75715e>// 虚拟 constexpr 函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Derived1</span> <span style=color:#f92672>:</span> Base {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Value</span>() <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>override</span> { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>; }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Derived2</span> <span style=color:#f92672>:</span> Base {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Value</span>() <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>override</span> { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>2</span>; }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Calc</span>() {
</span></span><span style=display:flex><span>    Base<span style=color:#f92672>*</span> d1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Derived1(); <span style=color:#75715e>// constexpr 中分配内存
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Base<span style=color:#f92672>*</span> d2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Derived2();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> value <span style=color:#f92672>=</span> d1<span style=color:#f92672>-&gt;</span>Value() <span style=color:#f92672>+</span> d2<span style=color:#f92672>-&gt;</span>Value(); <span style=color:#75715e>// 调用虚函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>delete</span> d1; <span style=color:#75715e>// 必须释放内存
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>delete</span> d2;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> value;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>auto</span> v <span style=color:#f92672>=</span> Calc(); <span style=color:#75715e>// 在编译期计算
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    printf(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, v);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> v;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=常量表达式用于模板函数的类型判断>常量表达式用于模板函数的类型判断<a hidden class=anchor aria-hidden=true href=#常量表达式用于模板函数的类型判断>#</a></h2><p>在 C++17 中引入的 <code>if constexpr</code> 提供了一种更加简洁和可读的方式来进行模板元编程的类型判断。根据类型特性，在编译期选择不同的分支路径。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdio&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cstdint&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;cmath&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;type_traits&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>typename</span> T<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> equal(<span style=color:#66d9ef>const</span> T<span style=color:#f92672>&amp;</span> a, <span style=color:#66d9ef>const</span> T<span style=color:#f92672>&amp;</span> b) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>constexpr</span> (std<span style=color:#f92672>::</span>is_integral_v<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> a <span style=color:#f92672>==</span> b; <span style=color:#75715e>// 整数类型直接比较
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>constexpr</span> (std<span style=color:#f92672>::</span>is_floating_point_v<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> fabs(a <span style=color:#f92672>-</span> b) <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1e-3</span>; <span style=color:#75715e>// 浮点数进行误差比较
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>static_assert</span>(std<span style=color:#f92672>::</span>is_arithmetic_v<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#f92672>||</span> std<span style=color:#f92672>::</span>is_pointer_v<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>, <span style=color:#e6db74>&#34;not supported&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>boolalpha;
</span></span><span style=display:flex><span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> equal(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;                 <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> equal(<span style=color:#ae81ff>1L</span>, <span style=color:#ae81ff>1L</span>) <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;               <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> equal(<span style=color:#ae81ff>1.0000001</span>, <span style=color:#ae81ff>1.000002</span>) <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;  <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>cout <span style=color:#f92672>&lt;&lt;</span> equal(<span style=color:#ae81ff>1.0000001</span>, <span style=color:#ae81ff>2.000002</span>) <span style=color:#f92672>&lt;&lt;</span> std<span style=color:#f92672>::</span>endl;  <span style=color:#75715e>// false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>在传统C++中，我们常用<code>std::enable_if</code>来实现类似的功能。但是很明显，语法会显得过于笨重。</p><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 760 521"><g transform="translate(8,16)"><path d="M264 328v16" fill="none" stroke="currentcolor"/><path d="M272 328v16" fill="none" stroke="currentcolor"/><path d="M376 360v16" fill="none" stroke="currentcolor"/><path d="M384 360v16" fill="none" stroke="currentcolor"/><path d="M-4 72 4 56" fill="none" stroke="currentcolor"/><path d="M4 72l8-16" fill="none" stroke="currentcolor"/><path d="M-4 184l8-16" fill="none" stroke="currentcolor"/><path d="M4 184l8-16" fill="none" stroke="currentcolor"/><path d="M-4 296l8-16" fill="none" stroke="currentcolor"/><path d="M4 296l8-16" fill="none" stroke="currentcolor"/><path d="M5e2 456l8-16" fill="none" stroke="currentcolor"/><path d="M508 456l8-16" fill="none" stroke="currentcolor"/><path d="M508 472l8-16" fill="none" stroke="currentcolor"/><path d="M516 472l8-16" fill="none" stroke="currentcolor"/><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">#</text><text text-anchor="middle" x="0" y="20" fill="currentcolor" style="font-size:1em">#</text><text text-anchor="middle" x="0" y="36" fill="currentcolor" style="font-size:1em">#</text><text text-anchor="middle" x="0" y="84" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="0" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="0" y="116" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="0" y="148" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="0" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="0" y="212" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="0" y="228" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="0" y="260" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="0" y="308" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="0" y="324" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="0" y="356" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="0" y="404" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="0" y="436" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="0" y="500" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="8" y="20" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="8" y="36" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="8" y="84" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="8" y="100" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="8" y="116" fill="currentcolor" style="font-size:1em">q</text><text text-anchor="middle" x="8" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="8" y="212" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="8" y="228" fill="currentcolor" style="font-size:1em">q</text><text text-anchor="middle" x="8" y="308" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="8" y="324" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="8" y="356" fill="currentcolor" style="font-size:1em">q</text><text text-anchor="middle" x="8" y="436" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="20" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="36" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="84" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="16" y="100" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="16" y="116" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="16" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="16" y="212" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="16" y="228" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="16" y="308" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="16" y="324" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="16" y="356" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="16" y="436" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="24" y="20" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="24" y="36" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="24" y="68" fill="currentcolor" style="font-size:1em">整</text><text text-anchor="middle" x="24" y="84" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="24" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="24" y="116" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="24" y="180" fill="currentcolor" style="font-size:1em">浮</text><text text-anchor="middle" x="24" y="196" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="24" y="212" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="24" y="228" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="24" y="292" fill="currentcolor" style="font-size:1em">其</text><text text-anchor="middle" x="24" y="308" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="24" y="324" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="24" y="356" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="32" y="4" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="20" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="36" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="68" fill="currentcolor" style="font-size:1em">数</text><text text-anchor="middle" x="32" y="84" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="100" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="32" y="116" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="32" y="180" fill="currentcolor" style="font-size:1em">点</text><text text-anchor="middle" x="32" y="196" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="212" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="32" y="228" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="244" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="32" y="292" fill="currentcolor" style="font-size:1em">他</text><text text-anchor="middle" x="32" y="308" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="324" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="32" y="340" fill="currentcolor" style="font-size:1em">!</text><text text-anchor="middle" x="32" y="356" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="32" y="388" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="32" y="436" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="32" y="452" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="32" y="468" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="32" y="484" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="40" y="4" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="40" y="20" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="40" y="36" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="40" y="68" fill="currentcolor" style="font-size:1em">类</text><text text-anchor="middle" x="40" y="84" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="100" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="116" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="40" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="40" y="180" fill="currentcolor" style="font-size:1em">类</text><text text-anchor="middle" x="40" y="196" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="228" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="40" y="244" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="40" y="292" fill="currentcolor" style="font-size:1em">类</text><text text-anchor="middle" x="40" y="308" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="324" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="340" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="40" y="356" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="40" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="40" y="388" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="40" y="436" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="452" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="40" y="468" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="40" y="484" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="48" y="4" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="48" y="20" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="48" y="36" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="48" y="68" fill="currentcolor" style="font-size:1em">型</text><text text-anchor="middle" x="48" y="84" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="100" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="48" y="116" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="48" y="132" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="180" fill="currentcolor" style="font-size:1em">型</text><text text-anchor="middle" x="48" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="212" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="48" y="228" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="48" y="244" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="292" fill="currentcolor" style="font-size:1em">型</text><text text-anchor="middle" x="48" y="308" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="324" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="48" y="340" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="48" y="356" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="48" y="372" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="48" y="388" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="436" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="48" y="452" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="468" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="484" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="56" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="36" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="84" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="116" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="56" y="132" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="56" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="212" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="228" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="56" y="244" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="56" y="308" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="324" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="340" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="56" y="356" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="56" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="56" y="388" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="56" y="436" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="56" y="452" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="56" y="468" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="56" y="484" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="64" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="64" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="64" y="228" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="64" y="244" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="64" y="340" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="64" y="356" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="64" y="372" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="64" y="388" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="64" y="436" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="64" y="452" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="64" y="468" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="64" y="484" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="72" y="20" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="72" y="36" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="72" y="84" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="72" y="100" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="72" y="116" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="72" y="132" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="72" y="196" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="72" y="212" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="72" y="228" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="72" y="244" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="72" y="308" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="72" y="324" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="72" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="72" y="356" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="72" y="372" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="72" y="388" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="72" y="436" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="72" y="452" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="72" y="468" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="72" y="484" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="80" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="20" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="80" y="36" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="80" y="84" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="116" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="212" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="228" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="308" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="324" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="80" y="356" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="372" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="80" y="452" fill="currentcolor" style="font-size:1em">q</text><text text-anchor="middle" x="80" y="468" fill="currentcolor" style="font-size:1em">q</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="88" y="20" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="88" y="36" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="88" y="84" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="88" y="100" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="88" y="132" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="88" y="196" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="88" y="212" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="88" y="244" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="88" y="308" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="88" y="324" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="88" y="340" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="88" y="372" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="88" y="388" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="88" y="436" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="88" y="452" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="88" y="468" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="88" y="484" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="96" y="4" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="96" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="96" y="36" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="96" y="84" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="96" y="100" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="96" y="116" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="96" y="196" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="96" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="96" y="228" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="96" y="244" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="96" y="308" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="96" y="324" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="96" y="340" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="96" y="356" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="96" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="96" y="388" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="96" y="452" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="96" y="468" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="96" y="484" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="104" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="104" y="20" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="104" y="36" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="104" y="84" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="104" y="100" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="104" y="116" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="104" y="132" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="104" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="104" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="104" y="228" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="104" y="244" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="104" y="308" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="104" y="324" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="104" y="340" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="104" y="356" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="104" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="104" y="388" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="104" y="452" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="104" y="468" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="112" y="4" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="112" y="20" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="112" y="36" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="112" y="84" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="112" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="112" y="132" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="112" y="196" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="112" y="212" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="112" y="244" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="112" y="308" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="112" y="324" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="112" y="340" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="112" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="112" y="388" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="112" y="452" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="112" y="468" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="120" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="120" y="20" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="120" y="36" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="120" y="84" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="120" y="100" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="120" y="116" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="120" y="196" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="120" y="212" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="120" y="228" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="120" y="244" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="120" y="308" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="120" y="324" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="120" y="340" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="120" y="356" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="120" y="372" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="120" y="388" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="120" y="452" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="120" y="468" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="128" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="128" y="36" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="128" y="84" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="128" y="100" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="128" y="116" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="128" y="132" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="128" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="128" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="128" y="228" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="128" y="244" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="128" y="308" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="128" y="324" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="128" y="340" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="128" y="356" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="128" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="128" y="388" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="128" y="452" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="128" y="468" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="136" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="136" y="84" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="136" y="100" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="136" y="132" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="136" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="136" y="212" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="136" y="244" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="136" y="308" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="136" y="324" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="136" y="340" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="136" y="372" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="136" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="144" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="144" y="100" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="144" y="116" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="144" y="212" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="144" y="228" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="144" y="244" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="144" y="324" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="144" y="340" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="144" y="356" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="144" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="144" y="452" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="144" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="152" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="152" y="84" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="152" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="152" y="116" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="152" y="196" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="152" y="212" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="152" y="228" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="152" y="244" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="152" y="308" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="152" y="324" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="152" y="340" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="152" y="356" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="152" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="152" y="452" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="152" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="160" y="4" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="160" y="84" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="160" y="100" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="160" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="160" y="196" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="160" y="212" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="160" y="228" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="160" y="244" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="160" y="308" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="160" y="324" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="160" y="340" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="160" y="356" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="160" y="372" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="160" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="168" y="4" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="168" y="100" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="168" y="116" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="168" y="212" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="168" y="228" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="168" y="244" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="168" y="324" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="168" y="340" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="168" y="356" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="168" y="372" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="168" y="452" fill="currentcolor" style="font-size:1em">?</text><text text-anchor="middle" x="168" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="176" y="100" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="176" y="116" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="176" y="212" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="176" y="228" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="176" y="324" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="176" y="340" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="176" y="356" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="176" y="372" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="176" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="184" y="100" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="184" y="212" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="184" y="244" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="184" y="324" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="184" y="340" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="184" y="372" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="184" y="452" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="184" y="468" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="192" y="100" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="192" y="116" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="192" y="212" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="192" y="228" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="192" y="340" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="192" y="356" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="192" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="192" y="452" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="192" y="468" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="200" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="200" y="116" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="200" y="212" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="200" y="228" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="200" y="244" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="200" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="200" y="356" fill="currentcolor" style="font-size:1em">&amp;</text><text text-anchor="middle" x="200" y="372" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="200" y="452" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="208" y="100" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="208" y="212" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="208" y="244" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="208" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="208" y="372" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="208" y="452" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="208" y="468" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="216" y="100" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="216" y="116" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="216" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="216" y="228" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="216" y="340" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="216" y="356" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="216" y="372" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="216" y="452" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="216" y="468" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="224" y="100" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="224" y="116" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="224" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="224" y="228" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="224" y="244" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="224" y="340" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="224" y="356" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="224" y="372" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="224" y="452" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="224" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="232" y="100" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="232" y="212" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="232" y="244" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="232" y="340" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="232" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="232" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="240" y="100" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="240" y="116" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="240" y="212" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="240" y="228" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="240" y="340" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="240" y="356" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="240" y="372" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="240" y="452" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="240" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="248" y="100" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="248" y="212" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="248" y="244" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="248" y="340" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="248" y="372" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="248" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="256" y="100" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="256" y="212" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="256" y="244" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="256" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="256" y="452" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="256" y="468" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="264" y="100" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="264" y="212" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="264" y="244" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="264" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="264" y="452" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="264" y="468" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="272" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="272" y="212" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="272" y="244" fill="currentcolor" style="font-size:1em">3</text><text text-anchor="middle" x="272" y="372" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="272" y="452" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="272" y="468" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="280" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="280" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="280" y="244" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="280" y="372" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="280" y="452" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="288" y="100" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="288" y="212" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="288" y="340" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="288" y="372" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="288" y="452" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="288" y="468" fill="currentcolor" style="font-size:1em">?</text><text text-anchor="middle" x="296" y="100" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="296" y="212" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="296" y="340" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="296" y="372" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="296" y="452" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="304" y="100" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="304" y="212" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="304" y="340" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="304" y="372" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="304" y="452" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="304" y="468" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="312" y="100" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="312" y="212" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="312" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="312" y="372" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="312" y="452" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="312" y="468" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="320" y="100" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="320" y="212" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="320" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="320" y="372" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="320" y="452" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="320" y="468" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="328" y="100" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="328" y="212" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="328" y="340" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="328" y="372" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="328" y="468" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="336" y="100" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="336" y="212" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="336" y="340" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="336" y="372" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="336" y="468" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="344" y="100" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="344" y="212" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="344" y="340" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="344" y="372" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="344" y="468" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="352" y="100" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="352" y="212" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="352" y="340" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="352" y="372" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="360" y="100" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="360" y="212" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="360" y="340" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="360" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="360" y="468" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="368" y="100" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="368" y="212" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="368" y="340" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="376" y="100" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="376" y="212" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="376" y="340" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="376" y="468" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="384" y="100" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="384" y="212" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="384" y="340" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="384" y="468" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="392" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="392" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="392" y="340" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="392" y="468" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="400" y="100" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="400" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="400" y="340" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="400" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="400" y="468" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="408" y="212" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="408" y="340" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="408" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="408" y="468" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="416" y="100" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="416" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="416" y="340" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="416" y="372" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="416" y="468" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="424" y="100" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="424" y="212" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="424" y="340" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="424" y="372" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="424" y="468" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="432" y="100" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="432" y="212" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="432" y="340" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="432" y="372" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="432" y="468" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="440" y="100" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="440" y="212" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="440" y="340" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="440" y="372" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="440" y="468" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="448" y="100" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="448" y="212" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="448" y="340" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="448" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="456" y="100" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="456" y="340" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="456" y="372" fill="currentcolor" style="font-size:1em">_</text><text text-anchor="middle" x="464" y="100" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="464" y="212" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="464" y="340" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="464" y="372" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="472" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="472" y="212" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="472" y="340" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="472" y="372" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="480" y="100" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="480" y="212" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="480" y="340" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="480" y="372" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="488" y="100" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="488" y="212" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="488" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="488" y="372" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="496" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="496" y="212" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="496" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="496" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="504" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="504" y="340" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="504" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="512" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="512" y="340" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="512" y="372" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="520" y="212" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="520" y="340" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="520" y="372" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="528" y="212" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="528" y="340" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="528" y="372" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="528" y="452" fill="currentcolor" style="font-size:1em">整</text><text text-anchor="middle" x="536" y="212" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="536" y="340" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="536" y="372" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="536" y="452" fill="currentcolor" style="font-size:1em">数</text><text text-anchor="middle" x="536" y="468" fill="currentcolor" style="font-size:1em">浮</text><text text-anchor="middle" x="544" y="212" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="544" y="340" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="544" y="372" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="544" y="468" fill="currentcolor" style="font-size:1em">点</text><text text-anchor="middle" x="552" y="340" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="552" y="372" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="560" y="372" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="568" y="340" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="568" y="372" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="576" y="340" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="576" y="372" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="584" y="340" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="584" y="372" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="592" y="340" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="592" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="600" y="340" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="600" y="372" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="608" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="616" y="340" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="616" y="372" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="624" y="340" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="624" y="372" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="632" y="340" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="632" y="372" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="640" y="340" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="640" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="648" y="340" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="656" y="372" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="664" y="372" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="672" y="372" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="680" y="372" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="688" y="372" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="696" y="372" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="704" y="372" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="712" y="372" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="720" y="372" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="728" y="372" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="736" y="372" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="744" y="372" fill="currentcolor" style="font-size:1em">;</text></g></svg></div><h2 id=使用consteval强制使用编译期求值>使用<code>consteval</code>强制使用编译期求值<a hidden class=anchor aria-hidden=true href=#使用consteval强制使用编译期求值>#</a></h2><p><code>consteval</code> 是在 C++20 中引入的关键字，用于声明立即函数（immediate function）。立即函数要求在编译时进行求值，不能在运行时调用。
如果调用一个<code>consteval</code>。如果调用 <code>consteval</code> 函数时无法在编译期计算，编译器将报错。</p><p><code>constexpr</code> 函数在某些情况下可能会退化为运行时调用，<code>consteval</code> 可以避免这种情况。</p><p>例如：</p><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 648 281"><g transform="translate(8,16)"><path d="M-4 40 4 24" fill="none" stroke="currentcolor"/><path d="M4 40l8-16" fill="none" stroke="currentcolor"/><path d="M28 184l8-16" fill="none" stroke="currentcolor"/><path d="M32 192l8-16" fill="none" stroke="currentcolor"/><path d="M32 208l8-16" fill="none" stroke="currentcolor"/><path d="M36 216l8-16" fill="none" stroke="currentcolor"/><path d="M320 144l8-16" fill="none" stroke="currentcolor"/><path d="M332 136l8-16" fill="none" stroke="currentcolor"/><polygon points="120.000000,144.000000 108.000000,138.399994 108.000000,149.600006" fill="currentcolor" transform="rotate(180.000000, 112.000000, 144.000000)"/><polygon points="128.000000,144.000000 116.000000,138.399994 116.000000,149.600006" fill="currentcolor" transform="rotate(180.000000, 120.000000, 144.000000)"/><polygon points="144.000000,192.000000 132.000000,186.399994 132.000000,197.600006" fill="currentcolor" transform="rotate(180.000000, 136.000000, 192.000000)"/><polygon points="152.000000,192.000000 140.000000,186.399994 140.000000,197.600006" fill="currentcolor" transform="rotate(180.000000, 144.000000, 192.000000)"/><polygon points="320.000000,144.000000 308.000000,138.399994 308.000000,149.600006" fill="currentcolor" transform="rotate(180.000000, 312.000000, 144.000000)"/><polygon points="328.000000,144.000000 316.000000,138.399994 316.000000,149.600006" fill="currentcolor" transform="rotate(180.000000, 320.000000, 144.000000)"/><polygon points="368.000000,192.000000 356.000000,186.399994 356.000000,197.600006" fill="currentcolor" transform="rotate(180.000000, 360.000000, 192.000000)"/><polygon points="376.000000,192.000000 364.000000,186.399994 364.000000,197.600006" fill="currentcolor" transform="rotate(180.000000, 368.000000, 192.000000)"/><polygon points="400.000000,144.000000 388.000000,138.399994 388.000000,149.600006" fill="currentcolor" transform="rotate(180.000000, 392.000000, 144.000000)"/><polygon points="408.000000,144.000000 396.000000,138.399994 396.000000,149.600006" fill="currentcolor" transform="rotate(180.000000, 400.000000, 144.000000)"/><polygon points="544.000000,192.000000 532.000000,186.399994 532.000000,197.600006" fill="currentcolor" transform="rotate(180.000000, 536.000000, 192.000000)"/><polygon points="552.000000,192.000000 540.000000,186.399994 540.000000,197.600006" fill="currentcolor" transform="rotate(180.000000, 544.000000, 192.000000)"/><circle cx="232" cy="64" r="6" stroke="currentcolor" fill="currentcolor"/><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">#</text><text text-anchor="middle" x="0" y="52" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="0" y="84" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="0" y="116" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="0" y="260" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="8" y="52" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="8" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="116" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="24" y="36" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="24" y="52" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="32" y="4" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="36" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="32" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="32" y="68" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="32" y="116" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="32" y="132" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="32" y="148" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="32" y="244" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="40" y="4" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="40" y="36" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="40" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="40" y="68" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="40" y="116" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="132" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="40" y="148" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="40" y="244" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="48" y="4" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="48" y="36" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="48" y="52" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="48" y="68" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="116" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="48" y="132" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="48" y="148" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="48" y="244" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="56" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="36" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="56" y="52" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="56" y="68" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="56" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="56" y="132" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="56" y="148" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="56" y="180" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="56" y="196" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="56" y="212" fill="currentcolor" style="font-size:1em">错</text><text text-anchor="middle" x="56" y="244" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="64" y="36" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="64" y="52" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="64" y="68" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="64" y="116" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="64" y="132" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="64" y="148" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="64" y="180" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="64" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="64" y="212" fill="currentcolor" style="font-size:1em">误</text><text text-anchor="middle" x="64" y="244" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="72" y="36" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="72" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="72" y="116" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="72" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="72" y="148" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="72" y="180" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="72" y="196" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="72" y="212" fill="currentcolor" style="font-size:1em">：</text><text text-anchor="middle" x="72" y="244" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="80" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="80" y="36" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="80" y="52" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="80" y="132" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="80" y="148" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="80" y="196" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="80" y="212" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="88" y="36" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="88" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="88" y="68" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="88" y="116" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="88" y="132" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="88" y="148" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="88" y="180" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="88" y="196" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="88" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="88" y="244" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="96" y="4" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="96" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="96" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="96" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="96" y="148" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="96" y="180" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="96" y="196" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="96" y="212" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="96" y="244" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="104" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="104" y="36" fill="currentcolor" style="font-size:1em">强</text><text text-anchor="middle" x="104" y="180" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="104" y="196" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="104" y="212" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="112" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="112" y="36" fill="currentcolor" style="font-size:1em">制</text><text text-anchor="middle" x="112" y="52" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="112" y="68" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="112" y="132" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="112" y="180" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="112" y="196" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="112" y="212" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="120" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="120" y="36" fill="currentcolor" style="font-size:1em">要</text><text text-anchor="middle" x="120" y="52" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="120" y="68" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="120" y="132" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="120" y="180" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="120" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="120" y="212" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="128" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="128" y="36" fill="currentcolor" style="font-size:1em">求</text><text text-anchor="middle" x="128" y="52" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="128" y="132" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="128" y="180" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="128" y="212" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="136" y="4" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="136" y="36" fill="currentcolor" style="font-size:1em">在</text><text text-anchor="middle" x="136" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="136" y="68" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="136" y="148" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="136" y="180" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="136" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="144" y="4" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="144" y="36" fill="currentcolor" style="font-size:1em">编</text><text text-anchor="middle" x="144" y="52" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="144" y="68" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="144" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="144" y="148" fill="currentcolor" style="font-size:1em">F</text><text text-anchor="middle" x="144" y="212" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="152" y="36" fill="currentcolor" style="font-size:1em">译</text><text text-anchor="middle" x="152" y="52" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="152" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="152" y="148" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="152" y="180" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="160" y="36" fill="currentcolor" style="font-size:1em">时</text><text text-anchor="middle" x="160" y="52" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="160" y="68" fill="currentcolor" style="font-size:1em">?</text><text text-anchor="middle" x="160" y="132" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="160" y="148" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="160" y="196" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="160" y="212" fill="currentcolor" style="font-size:1em">必</text><text text-anchor="middle" x="168" y="36" fill="currentcolor" style="font-size:1em">进</text><text text-anchor="middle" x="168" y="52" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="168" y="132" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="168" y="148" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="168" y="180" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="168" y="196" fill="currentcolor" style="font-size:1em">F</text><text text-anchor="middle" x="168" y="212" fill="currentcolor" style="font-size:1em">须</text><text text-anchor="middle" x="176" y="36" fill="currentcolor" style="font-size:1em">行</text><text text-anchor="middle" x="176" y="52" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="176" y="68" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="176" y="132" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="176" y="148" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="176" y="180" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="176" y="196" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="176" y="212" fill="currentcolor" style="font-size:1em">在</text><text text-anchor="middle" x="184" y="36" fill="currentcolor" style="font-size:1em">计</text><text text-anchor="middle" x="184" y="52" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="184" y="132" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="184" y="148" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="184" y="196" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="184" y="212" fill="currentcolor" style="font-size:1em">编</text><text text-anchor="middle" x="192" y="36" fill="currentcolor" style="font-size:1em">算</text><text text-anchor="middle" x="192" y="52" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="192" y="68" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="192" y="148" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="192" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="192" y="212" fill="currentcolor" style="font-size:1em">译</text><text text-anchor="middle" x="200" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="200" y="132" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="200" y="148" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="200" y="196" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="200" y="212" fill="currentcolor" style="font-size:1em">时</text><text text-anchor="middle" x="208" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="208" y="68" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="208" y="148" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="208" y="196" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="208" y="212" fill="currentcolor" style="font-size:1em">调</text><text text-anchor="middle" x="216" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="216" y="132" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="216" y="196" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="216" y="212" fill="currentcolor" style="font-size:1em">用</text><text text-anchor="middle" x="224" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="224" y="132" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="224" y="148" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="224" y="196" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="232" y="52" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="232" y="132" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="232" y="148" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="232" y="196" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="240" y="132" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="248" y="52" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="248" y="68" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="248" y="132" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="248" y="148" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="248" y="196" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="256" y="68" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="256" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="256" y="196" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="264" y="68" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="264" y="132" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="264" y="148" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="272" y="68" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="272" y="132" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="272" y="148" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="272" y="196" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="280" y="68" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="280" y="132" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="280" y="148" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="280" y="196" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="288" y="68" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="288" y="132" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="288" y="196" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="296" y="68" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="296" y="132" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="296" y="148" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="296" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="304" y="68" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="304" y="132" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="304" y="196" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="312" y="68" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="312" y="132" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="312" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="320" y="68" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="320" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="328" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="328" y="196" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="336" y="148" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="344" y="68" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="344" y="148" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="344" y="196" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="352" y="132" fill="currentcolor" style="font-size:1em">O</text><text text-anchor="middle" x="352" y="148" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="360" y="68" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="360" y="132" fill="currentcolor" style="font-size:1em">K</text><text text-anchor="middle" x="360" y="148" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="368" y="68" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="368" y="132" fill="currentcolor" style="font-size:1em">：</text><text text-anchor="middle" x="368" y="148" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="376" y="68" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="376" y="132" fill="currentcolor" style="font-size:1em">在</text><text text-anchor="middle" x="376" y="148" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="384" y="68" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="384" y="132" fill="currentcolor" style="font-size:1em">编</text><text text-anchor="middle" x="384" y="196" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="392" y="132" fill="currentcolor" style="font-size:1em">译</text><text text-anchor="middle" x="392" y="196" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="400" y="132" fill="currentcolor" style="font-size:1em">时</text><text text-anchor="middle" x="400" y="196" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="408" y="132" fill="currentcolor" style="font-size:1em">计</text><text text-anchor="middle" x="408" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="416" y="132" fill="currentcolor" style="font-size:1em">算</text><text text-anchor="middle" x="416" y="148" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="416" y="196" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="424" y="148" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="424" y="196" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="432" y="148" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="432" y="196" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="440" y="148" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="440" y="196" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="448" y="148" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="448" y="196" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="456" y="148" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="456" y="196" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="464" y="148" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="464" y="196" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="472" y="148" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="472" y="196" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="480" y="148" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="480" y="196" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="488" y="148" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="488" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="496" y="196" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="504" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="512" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="520" y="196" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="560" y="196" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="568" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="576" y="196" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="584" y="196" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="592" y="196" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="600" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="608" y="196" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="616" y="196" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="624" y="196" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="632" y="196" fill="currentcolor" style="font-size:1em">;</text></g></svg></div><h2 id=使用constinit显式要求编译时初始化>使用<code>constinit</code>显式要求编译时初始化<a hidden class=anchor aria-hidden=true href=#使用constinit显式要求编译时初始化>#</a></h2><p><code>constinit</code> 关键字用于显式要求全局或静态变量在编译期完成初始化。
如果变量无法在编译时初始化，编译器将报错。
<code>constinit</code> 不能用于局部变量。</p><p>与 <code>constexpr</code> 不同，<code>constinit</code> 变量可以在运行时被修改。
线程安全性：在多线程环境中，<code>constinit</code> 确保变量在编译期初始化，避免线程安全问题。</p><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 464 297"><g transform="translate(8,16)"><path d="M-4 40 4 24" fill="none" stroke="currentcolor"/><path d="M4 40l8-16" fill="none" stroke="currentcolor"/><path d="M-4 104 4 88" fill="none" stroke="currentcolor"/><path d="M0 112 8 96" fill="none" stroke="currentcolor"/><path d="M4 120l8-16" fill="none" stroke="currentcolor"/><path d="M28 2e2l8-16" fill="none" stroke="currentcolor"/><path d="M32 208l8-16" fill="none" stroke="currentcolor"/><path d="M36 216l8-16" fill="none" stroke="currentcolor"/><path d="M140 168l8-16" fill="none" stroke="currentcolor"/><path d="M148 168l8-16" fill="none" stroke="currentcolor"/><polygon points="120.000000,240.000000 108.000000,234.399994 108.000000,245.600006" fill="currentcolor" transform="rotate(180.000000, 112.000000, 240.000000)"/><polygon points="128.000000,240.000000 116.000000,234.399994 116.000000,245.600006" fill="currentcolor" transform="rotate(180.000000, 120.000000, 240.000000)"/><polygon points="216.000000,48.000000 204.000000,42.400002 204.000000,53.599998" fill="currentcolor" transform="rotate(90.000000, 208.000000, 48.000000)"/><polygon points="280.000000,240.000000 268.000000,234.399994 268.000000,245.600006" fill="currentcolor" transform="rotate(180.000000, 272.000000, 240.000000)"/><polygon points="288.000000,240.000000 276.000000,234.399994 276.000000,245.600006" fill="currentcolor" transform="rotate(180.000000, 280.000000, 240.000000)"/><polygon points="344.000000,48.000000 332.000000,42.400002 332.000000,53.599998" fill="currentcolor" transform="rotate(90.000000, 336.000000, 48.000000)"/><polygon points="360.000000,240.000000 348.000000,234.399994 348.000000,245.600006" fill="currentcolor" transform="rotate(180.000000, 352.000000, 240.000000)"/><polygon points="368.000000,240.000000 356.000000,234.399994 356.000000,245.600006" fill="currentcolor" transform="rotate(180.000000, 360.000000, 240.000000)"/><circle cx="320" cy="48" r="6" stroke="currentcolor" fill="currentcolor"/><circle cx="352" cy="48" r="6" stroke="currentcolor" fill="currentcolor"/><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">#</text><text text-anchor="middle" x="0" y="52" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="0" y="68" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="0" y="148" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="0" y="276" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="8" y="52" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="8" y="68" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="8" y="148" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="16" y="148" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="24" y="36" fill="currentcolor" style="font-size:1em">编</text><text text-anchor="middle" x="24" y="52" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="24" y="68" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="24" y="100" fill="currentcolor" style="font-size:1em">错</text><text text-anchor="middle" x="24" y="116" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="32" y="4" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="36" fill="currentcolor" style="font-size:1em">译</text><text text-anchor="middle" x="32" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="32" y="68" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="32" y="100" fill="currentcolor" style="font-size:1em">误</text><text text-anchor="middle" x="32" y="116" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="32" y="148" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="32" y="164" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="32" y="244" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="32" y="260" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="40" y="4" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="40" y="36" fill="currentcolor" style="font-size:1em">时</text><text text-anchor="middle" x="40" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="40" y="68" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="40" y="100" fill="currentcolor" style="font-size:1em">：</text><text text-anchor="middle" x="40" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="40" y="148" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="164" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="40" y="244" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="40" y="260" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="48" y="4" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="48" y="36" fill="currentcolor" style="font-size:1em">初</text><text text-anchor="middle" x="48" y="52" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="48" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="48" y="100" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="48" y="116" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="48" y="148" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="48" y="164" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="48" y="244" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="48" y="260" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="56" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="56" y="36" fill="currentcolor" style="font-size:1em">始</text><text text-anchor="middle" x="56" y="52" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="56" y="68" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="56" y="100" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="56" y="116" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="56" y="148" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="56" y="164" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="56" y="196" fill="currentcolor" style="font-size:1em">错</text><text text-anchor="middle" x="56" y="212" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="56" y="244" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="56" y="260" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="64" y="36" fill="currentcolor" style="font-size:1em">化</text><text text-anchor="middle" x="64" y="52" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="64" y="68" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="64" y="100" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="64" y="116" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="64" y="148" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="64" y="164" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="64" y="196" fill="currentcolor" style="font-size:1em">误</text><text text-anchor="middle" x="64" y="212" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="64" y="244" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="64" y="260" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="72" y="100" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="72" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="72" y="148" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="72" y="164" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="72" y="196" fill="currentcolor" style="font-size:1em">：</text><text text-anchor="middle" x="72" y="212" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="72" y="244" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="72" y="260" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="80" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="80" y="52" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="80" y="68" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="80" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="116" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="80" y="196" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="80" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="80" y="244" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="88" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="88" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="88" y="100" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="88" y="116" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="88" y="148" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="88" y="164" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="88" y="196" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="88" y="212" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="88" y="244" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="88" y="260" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="96" y="4" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="96" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="96" y="68" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="96" y="100" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="96" y="196" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="96" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="96" y="244" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="96" y="260" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="104" y="4" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="104" y="100" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="104" y="116" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="104" y="164" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="104" y="196" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="104" y="212" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="112" y="4" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="112" y="52" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="112" y="68" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="112" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="112" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="112" y="164" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="112" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="112" y="212" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="120" y="4" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="120" y="52" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="120" y="68" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="120" y="116" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="120" y="164" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="120" y="196" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="120" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="128" y="52" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="128" y="68" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="128" y="100" fill="currentcolor" style="font-size:1em">变</text><text text-anchor="middle" x="128" y="164" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="128" y="196" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="128" y="212" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="136" y="52" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="136" y="68" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="136" y="100" fill="currentcolor" style="font-size:1em">量</text><text text-anchor="middle" x="136" y="116" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="136" y="196" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="136" y="212" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="136" y="244" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="144" y="52" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="144" y="68" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="144" y="100" fill="currentcolor" style="font-size:1em">不</text><text text-anchor="middle" x="144" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="144" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="144" y="212" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="144" y="244" fill="currentcolor" style="font-size:1em">G</text><text text-anchor="middle" x="152" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="152" y="68" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="152" y="100" fill="currentcolor" style="font-size:1em">能</text><text text-anchor="middle" x="152" y="116" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="152" y="212" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="152" y="244" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="160" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="160" y="100" fill="currentcolor" style="font-size:1em">依</text><text text-anchor="middle" x="160" y="116" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="160" y="196" fill="currentcolor" style="font-size:1em">变</text><text text-anchor="middle" x="160" y="212" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="160" y="244" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="168" y="52" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="168" y="68" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="168" y="100" fill="currentcolor" style="font-size:1em">赖</text><text text-anchor="middle" x="168" y="116" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="168" y="164" fill="currentcolor" style="font-size:1em">允</text><text text-anchor="middle" x="168" y="196" fill="currentcolor" style="font-size:1em">量</text><text text-anchor="middle" x="168" y="212" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="168" y="244" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="176" y="52" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="176" y="100" fill="currentcolor" style="font-size:1em">运</text><text text-anchor="middle" x="176" y="116" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="176" y="164" fill="currentcolor" style="font-size:1em">许</text><text text-anchor="middle" x="176" y="196" fill="currentcolor" style="font-size:1em">不</text><text text-anchor="middle" x="176" y="244" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="184" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="184" y="68" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="184" y="100" fill="currentcolor" style="font-size:1em">行</text><text text-anchor="middle" x="184" y="116" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="184" y="164" fill="currentcolor" style="font-size:1em">在</text><text text-anchor="middle" x="184" y="196" fill="currentcolor" style="font-size:1em">是</text><text text-anchor="middle" x="184" y="212" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="184" y="244" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="192" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="192" y="68" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="192" y="100" fill="currentcolor" style="font-size:1em">时</text><text text-anchor="middle" x="192" y="164" fill="currentcolor" style="font-size:1em">运</text><text text-anchor="middle" x="192" y="196" fill="currentcolor" style="font-size:1em">常</text><text text-anchor="middle" x="192" y="212" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="200" y="68" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="200" y="100" fill="currentcolor" style="font-size:1em">初</text><text text-anchor="middle" x="200" y="116" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="200" y="164" fill="currentcolor" style="font-size:1em">行</text><text text-anchor="middle" x="200" y="196" fill="currentcolor" style="font-size:1em">量</text><text text-anchor="middle" x="200" y="212" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="200" y="244" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="208" y="68" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="208" y="100" fill="currentcolor" style="font-size:1em">始</text><text text-anchor="middle" x="208" y="164" fill="currentcolor" style="font-size:1em">时</text><text text-anchor="middle" x="208" y="196" fill="currentcolor" style="font-size:1em">，</text><text text-anchor="middle" x="208" y="212" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="208" y="244" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="216" y="68" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="216" y="100" fill="currentcolor" style="font-size:1em">化</text><text text-anchor="middle" x="216" y="116" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="216" y="164" fill="currentcolor" style="font-size:1em">修</text><text text-anchor="middle" x="216" y="196" fill="currentcolor" style="font-size:1em">不</text><text text-anchor="middle" x="216" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="216" y="244" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="224" y="68" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="224" y="116" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="224" y="164" fill="currentcolor" style="font-size:1em">改</text><text text-anchor="middle" x="224" y="196" fill="currentcolor" style="font-size:1em">能</text><text text-anchor="middle" x="224" y="212" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="224" y="244" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="232" y="52" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="232" y="68" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="232" y="116" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="232" y="196" fill="currentcolor" style="font-size:1em">用</text><text text-anchor="middle" x="232" y="212" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="232" y="244" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="240" y="68" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="240" y="116" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="240" y="196" fill="currentcolor" style="font-size:1em">作</text><text text-anchor="middle" x="240" y="244" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="248" y="52" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="248" y="68" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="248" y="116" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="248" y="196" fill="currentcolor" style="font-size:1em">数</text><text text-anchor="middle" x="248" y="212" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="256" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="256" y="68" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="256" y="116" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="256" y="196" fill="currentcolor" style="font-size:1em">组</text><text text-anchor="middle" x="256" y="212" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="256" y="244" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="264" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="264" y="68" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="264" y="116" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="264" y="196" fill="currentcolor" style="font-size:1em">大</text><text text-anchor="middle" x="264" y="212" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="272" y="52" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="272" y="68" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="272" y="196" fill="currentcolor" style="font-size:1em">小</text><text text-anchor="middle" x="272" y="212" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="280" y="52" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="288" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="296" y="244" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="304" y="52" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="304" y="244" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="312" y="244" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="320" y="244" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="328" y="244" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="336" y="244" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="368" y="52" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="376" y="52" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="376" y="244" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="384" y="244" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="392" y="52" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="392" y="244" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="400" y="244" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="408" y="244" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="416" y="244" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="424" y="244" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="432" y="244" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="440" y="244" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="448" y="244" fill="currentcolor" style="font-size:1em">;</text></g></svg></div><h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2><ul><li><code>constexpr</code>在多数情况下可以替代<code>const</code>以表达“编译期常量”的语义，可用于函数、变量、类等场景。constexpr 支持在编译期和运行期进行求值，但在某些情况下可能会退化为运行期求值。</li><li>常量表达式函数 提供了一种更清晰的编译期计算方式，能够在一定程度上取代复杂且晦涩的模板元编程。随着 C++ 标准的演进，<code>constexpr</code> 函数逐步支持了更复杂的语法和逻辑，例如条件语句、循环语句和局部变量。但对于极端复杂的计算场景，编译期计算可能导致显著的编译时间开销。</li><li><code>constexpr</code>可以在模板函数中用于类型判断，通过<code>if constexpr</code>语法有效地取代<code>std::enable_if</code>，从而简化模板编程，提高代码的可读性和可维护性。</li><li><code>constexpr</code>函数的隐式退化风险：在某些场景下，<code>constexpr</code> 函数可能在运行时执行。若需要严格保证仅在编译期求值，可以使用 <code>consteval</code> 来强制进行编译期求值，避免不必要的运行时开销。</li><li><code>constinit</code>提供了一种显式要求变量在编译时完成初始化的机制，适用于非<code>constexpr</code>变量。这在全局和静态变量的初始化中尤为有用，同时也保证了多线程环境下的初始化安全性。</li></ul></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://wizmann.top/posts/code-golf-heapify/><span class=title>«</span><br><span></span>
</a><a class=next href=https://wizmann.top/posts/cpp-type-erasure-and-std-function/><span class=title>»</span><br><span></span></a></nav></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://wizmann.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2025 <a href=https://wizmann.top/>Maerlyn's Rainbow</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>