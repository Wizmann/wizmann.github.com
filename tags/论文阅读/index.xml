<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>è®ºæ–‡é˜…è¯» on Maerlyn's Rainbow</title><link>https://wizmann.top/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/</link><description>Recent content in è®ºæ–‡é˜…è¯» on Maerlyn's Rainbow</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Mon, 17 Feb 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://wizmann.top/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/index.xml" rel="self" type="application/rss+xml"/><item><title>è®ºæ–‡é˜…è¯»ï¼šLavaStore - é«˜æ€§èƒ½ã€æœ¬åœ°å­˜å‚¨å¼•æ“çš„æ¼”è¿›</title><link>https://wizmann.top/posts/lava-store/</link><pubDate>Mon, 17 Feb 2025 00:00:00 +0000</pubDate><guid>https://wizmann.top/posts/lava-store/</guid><description>&lt;h2 id="å¼•è¨€">å¼•è¨€ &lt;a href="#%e5%bc%95%e8%a8%80" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>åœ¨äº‘æœåŠ¡çš„å¿«é€Ÿå‘å±•ä¸­ï¼ŒæŒä¹…åŒ–é”®å€¼ï¼ˆKVï¼‰å­˜å‚¨å¼•æ“çš„æ€§èƒ½å’Œæˆæœ¬æ•ˆç‡æˆä¸ºäº†å…³é”®æŒ‘æˆ˜ã€‚å­—èŠ‚è·³åŠ¨ï¼ˆByteDanceï¼‰åœ¨å…¶å¤§è§„æ¨¡äº‘æœåŠ¡ä¸­å¹¿æ³›ä½¿ç”¨ RocksDB ä½œä¸ºæœ¬åœ°å­˜å‚¨å¼•æ“ã€‚ç„¶è€Œï¼Œç”±äº RocksDB åœ¨é«˜å†™å…¥å¯†é›†å‹è´Ÿè½½ã€æˆæœ¬ä¼˜åŒ–ä»¥åŠå°¾å»¶è¿Ÿæ§åˆ¶ä¸Šçš„å±€é™æ€§ï¼Œå­—èŠ‚è·³åŠ¨å›¢é˜Ÿå¼€å‘äº† &lt;strong>LavaStore&lt;/strong>ï¼Œä¸€ä¸ªä¸“é—¨é’ˆå¯¹äº‘æœåŠ¡ä¼˜åŒ–çš„é«˜æ€§èƒ½ã€æœ¬åœ°å­˜å‚¨å¼•æ“ã€‚&lt;/p>
&lt;p>æœ¬æ–‡åŸºäºè®ºæ–‡ &lt;em>&amp;ldquo;LavaStore: ByteDanceâ€™s Purpose-built, High-performance, Cost-effective Local Storage Engine for Cloud Services&amp;rdquo;&lt;/em>ï¼Œè®¨è®º LavaStore çš„æ ¸å¿ƒè®¾è®¡ã€ä¼˜åŒ–ç­–ç•¥ä»¥åŠå®é™…åº”ç”¨è¡¨ç°ã€‚&lt;/p>
&lt;h2 id="lavastore-è®¾è®¡èƒŒæ™¯ä¸æŒ‘æˆ˜">LavaStore è®¾è®¡èƒŒæ™¯ä¸æŒ‘æˆ˜ &lt;a href="#lavastore-%e8%ae%be%e8%ae%a1%e8%83%8c%e6%99%af%e4%b8%8e%e6%8c%91%e6%88%98" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>åœ¨å­—èŠ‚è·³åŠ¨çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå­˜å‚¨å¼•æ“ä¸»è¦é¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>å†™å…¥æ”¾å¤§é—®é¢˜&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ç”±äº LSM-tree ç»“æ„çš„ç‰¹æ€§ï¼ŒRocksDB åœ¨å¤„ç†å¤§è§„æ¨¡å†™å…¥æ—¶å­˜åœ¨è¾ƒå¤§çš„å†™å…¥æ”¾å¤§é—®é¢˜ã€‚&lt;/li>
&lt;li>ç°æœ‰çš„ KV åˆ†ç¦»æ–¹æ¡ˆï¼ˆå¦‚ BlobDBï¼‰åœ¨åº”å¯¹å¤§å€¼å­˜å‚¨æ—¶ä»å­˜åœ¨ä¸€å®šçš„ GC è´Ÿæ‹…ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>é«˜æ•ˆå­˜å‚¨éœ€æ±‚&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>äº‘æœåŠ¡å¯¹å­˜å‚¨æˆæœ¬æœ‰ä¸¥æ ¼æ§åˆ¶ï¼Œå¦‚ä½•åœ¨ä¿è¯æ€§èƒ½çš„å‰æä¸‹é™ä½å­˜å‚¨å¼€é”€æˆä¸ºå…³é”®ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½å°¾å»¶è¿Ÿéœ€æ±‚&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>è®¸å¤šåº”ç”¨ï¼ˆå¦‚åœ¨çº¿äº‹åŠ¡å¤„ç† OLTP å’Œç¼“å­˜æœåŠ¡ï¼‰å¯¹ 99% ç”šè‡³ 99.99% çš„è¯·æ±‚å»¶è¿Ÿæœ‰ä¸¥æ ¼è¦æ±‚ã€‚&lt;/li>
&lt;li>ä¼ ç»Ÿå­˜å‚¨å¼•æ“åœ¨é«˜å¹¶å‘æŸ¥è¯¢åœºæ™¯ä¸‹éš¾ä»¥ä¼˜åŒ–å°¾å»¶è¿Ÿã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="lavastore-å…³é”®ä¼˜åŒ–ç‚¹">LavaStore å…³é”®ä¼˜åŒ–ç‚¹ &lt;a href="#lavastore-%e5%85%b3%e9%94%ae%e4%bc%98%e5%8c%96%e7%82%b9" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;h3 id="1-lavakvç‹¬ç«‹çš„-kv-åˆ†ç¦»æ–¹æ¡ˆ">1. &lt;strong>LavaKVï¼šç‹¬ç«‹çš„ KV åˆ†ç¦»æ–¹æ¡ˆ&lt;/strong> &lt;a href="#1-lavakv%e7%8b%ac%e7%ab%8b%e7%9a%84-kv-%e5%88%86%e7%a6%bb%e6%96%b9%e6%a1%88" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>LavaStore é‡‡ç”¨äº† &lt;strong>LavaKV&lt;/strong>ï¼Œä¸€ä¸ªé’ˆå¯¹ RocksDB è¿›è¡Œå®šåˆ¶åŒ–ä¼˜åŒ–çš„ KV å­˜å‚¨å±‚ï¼Œå…¶ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>GC ä¸å‹ç¼©è§£è€¦&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¼ ç»Ÿ RocksDB BlobDB çš„ GC éœ€è¦ä¾èµ– SSTable å‹ç¼©ï¼Œè€Œ LavaKV å…è®¸ç‹¬ç«‹æ‰§è¡Œ Blob GCï¼Œä»è€Œæé«˜å†™å…¥æ€§èƒ½ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è‡ªé€‚åº” GC ç­–ç•¥&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>æ ¹æ®ç£ç›˜ä½¿ç”¨ç‡åŠ¨æ€è°ƒæ•´ GC é¢‘ç‡ï¼Œä»¥ä¼˜åŒ–å†™å…¥æ”¾å¤§å’Œå­˜å‚¨åˆ©ç”¨ç‡ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ›´é«˜æ•ˆçš„ Blob å­˜å‚¨ç®¡ç†&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>é‡‡ç”¨ Crit-bit Tree (CBT) ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œæ¯” RocksDB çš„ Hash Index å ç”¨æ›´å°‘çš„ç©ºé—´ï¼Œæé«˜ç¼“å­˜å‘½ä¸­ç‡ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="2-lavalogé’ˆå¯¹-wal-å·¥ä½œè´Ÿè½½çš„ä¼˜åŒ–">2. &lt;strong>LavaLogï¼šé’ˆå¯¹ WAL å·¥ä½œè´Ÿè½½çš„ä¼˜åŒ–&lt;/strong> &lt;a href="#2-lavalog%e9%92%88%e5%af%b9-wal-%e5%b7%a5%e4%bd%9c%e8%b4%9f%e8%bd%bd%e7%9a%84%e4%bc%98%e5%8c%96" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>è®¸å¤šæ•°æ®åº“ç³»ç»Ÿä¾èµ– Write-Ahead Logging (WAL) æ¥ä¿è¯æ•°æ®æŒä¹…åŒ–ã€‚&lt;/li>
&lt;li>LavaLog ä¸“é—¨é’ˆå¯¹ WAL è®¾è®¡ï¼Œæä¾›æ¥è¿‘ 1 çš„å†™æ”¾å¤§ï¼ˆç›¸æ¯” RocksDB çš„ WAFâ‰ˆ2ï¼‰ï¼Œå¹¶ä¼˜åŒ–æ—¥å¿— GC æœºåˆ¶ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="3-lavafsè‡ªå®šä¹‰çš„ç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿ">3. &lt;strong>LavaFSï¼šè‡ªå®šä¹‰çš„ç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿ&lt;/strong> &lt;a href="#3-lavafs%e8%87%aa%e5%ae%9a%e4%b9%89%e7%9a%84%e7%94%a8%e6%88%b7%e6%80%81%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>ä¼ ç»Ÿçš„ Ext4 åœ¨ fsync æ“ä½œä¸Šæœ‰è¾ƒé«˜çš„å¼€é”€ï¼Œå½±å“åŒæ­¥å†™å…¥æ€§èƒ½ã€‚&lt;/li>
&lt;li>LavaFS é‡‡ç”¨è½»é‡çº§æ—¥å¿—æœºåˆ¶ï¼Œé¿å…äº†ä¸å¿…è¦çš„å…ƒæ•°æ®å†™å…¥ï¼Œä½¿åŒæ­¥å†™å…¥çš„ WAF ä» Ext4 çš„ 6.7 ä¸‹é™è‡³ 1ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="lavastore-åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„åº”ç”¨è¡¨ç°">LavaStore åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„åº”ç”¨è¡¨ç° &lt;a href="#lavastore-%e5%9c%a8%e7%94%9f%e4%ba%a7%e7%8e%af%e5%a2%83%e4%b8%ad%e7%9a%84%e5%ba%94%e7%94%a8%e8%a1%a8%e7%8e%b0" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>LavaStore å·²åœ¨å­—èŠ‚è·³åŠ¨å†…éƒ¨å¤šä¸ªä¸šåŠ¡åœºæ™¯ä¸­éƒ¨ç½²ï¼Œä¸»è¦ä½“ç°åœ¨ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>æ•°æ®åº“ï¼ˆByteNDBï¼‰&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>å¹³å‡å†™å…¥å»¶è¿Ÿå‡å°‘ 61%&lt;/li>
&lt;li>è¯»å–å»¶è¿Ÿå‡å°‘ 16%&lt;/li>
&lt;li>æ€»ä½“å†™å…¥æ”¾å¤§ï¼ˆWAFï¼‰é™ä½ 24%&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç¼“å­˜ç³»ç»Ÿï¼ˆABaseï¼‰&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>å†™å…¥ QPS æå‡ 87%&lt;/li>
&lt;li>P99 å†™å…¥å»¶è¿Ÿé™ä½ 38%&lt;/li>
&lt;li>P99 è¯»å–å»¶è¿Ÿé™ä½ 28%&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æµå¤„ç†ï¼ˆFlinkï¼‰&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>CPU ä½¿ç”¨ç‡é™ä½ 67%&lt;/li>
&lt;li>å¹³å‡æ•°æ®å­˜å‚¨å ç”¨é™ä½ 15%&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="æœªæ¥å‘å±•æ–¹å‘">æœªæ¥å‘å±•æ–¹å‘ &lt;a href="#%e6%9c%aa%e6%9d%a5%e5%8f%91%e5%b1%95%e6%96%b9%e5%90%91" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>å°½ç®¡ LavaStore åœ¨å½“å‰è®¾è®¡ä¸‹å·²ç»å¤§å¹…ä¼˜åŒ–äº† RocksDB çš„æ€§èƒ½ï¼Œä½†ä»æœ‰ä¸€äº›å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–çš„æ–¹å‘ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>ä¼˜åŒ– KV åˆ†ç¦» GC ç­–ç•¥&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ç ”ç©¶æ›´æ™ºèƒ½çš„ GC ç­–ç•¥ï¼Œä½¿å…¶åœ¨è¯»å†™è´Ÿè½½ä¸åŒçš„æƒ…å†µä¸‹åŠ¨æ€è°ƒæ•´å›æ”¶æ–¹å¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å¼•å…¥æ–°å­˜å‚¨ç¡¬ä»¶æ”¯æŒ&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>æ¢ç´¢ &lt;strong>ZNS SSDs&lt;/strong>ï¼ˆZoned Namespace SSDsï¼‰å’Œ &lt;strong>SPDK&lt;/strong>ï¼ˆStorage Performance Development Kitï¼‰æ¥ä¼˜åŒ–å­˜å‚¨è¯»å†™è·¯å¾„ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è·¨å±‚ GC ä¼˜åŒ–&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ç›®å‰ GC ä¸»è¦åœ¨ KV å±‚å’Œæ–‡ä»¶ç³»ç»Ÿå±‚è¿›è¡Œï¼Œæœªæ¥å¯ä»¥ä¸ SSD å±‚çš„ GC è¿›è¡ŒååŒä¼˜åŒ–ï¼Œé™ä½æ•´ä½“å†™å…¥æ”¾å¤§ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="æ€»ç»“">æ€»ç»“ &lt;a href="#%e6%80%bb%e7%bb%93" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>LavaStore ä½œä¸ºå­—èŠ‚è·³åŠ¨è‡ªä¸»ç ”å‘çš„é«˜æ€§èƒ½å­˜å‚¨å¼•æ“ï¼Œåœ¨å†™å…¥æ€§èƒ½ã€å­˜å‚¨æ•ˆç‡å’Œå°¾å»¶è¿Ÿæ§åˆ¶ä¸Šå‡å–å¾—äº†æ˜¾è‘—ä¼˜åŒ–ã€‚é€šè¿‡ KV åˆ†ç¦»ã€æ—¥å¿—å­˜å‚¨ä¼˜åŒ–ä»¥åŠç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿçš„è®¾è®¡ï¼ŒLavaStore ç›¸æ¯”ä¼ ç»Ÿ RocksDB æ–¹æ¡ˆï¼Œåœ¨å¤šä¸ªæ ¸å¿ƒä¸šåŠ¡åœºæ™¯ä¸‹å±•ç°äº†ä¼˜è¶Šçš„æ€§èƒ½å’Œæˆæœ¬ä¼˜åŠ¿ã€‚&lt;/p>
&lt;p>å¯¹äºå…³æ³¨äº‘å­˜å‚¨ç³»ç»Ÿä¼˜åŒ–çš„ç ”ç©¶äººå‘˜å’Œå·¥ç¨‹å¸ˆæ¥è¯´ï¼ŒLavaStore æä¾›äº†ä¸€ç§åˆ›æ–°çš„æ€è·¯ï¼Œå³é€šè¿‡ &lt;strong>åˆç†çš„æ¨¡å—åŒ–ä¼˜åŒ–&lt;/strong> ä»¥åŠ &lt;strong>é’ˆå¯¹ç‰¹å®šè´Ÿè½½çš„å®šåˆ¶åŒ–è®¾è®¡&lt;/strong>ï¼Œå¯ä»¥åœ¨å…¼é¡¾é€šç”¨æ€§çš„åŒæ—¶ï¼Œå¤§å¹…æå‡å­˜å‚¨å¼•æ“çš„æ•´ä½“è¡¨ç°ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å¼•è¨€-1">å¼•è¨€ &lt;a href="#%e5%bc%95%e8%a8%80-1" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>åœ¨äº‘æœåŠ¡çš„å¿«é€Ÿå‘å±•ä¸­ï¼ŒæŒä¹…åŒ–é”®å€¼ï¼ˆKVï¼‰å­˜å‚¨å¼•æ“çš„æ€§èƒ½å’Œæˆæœ¬æ•ˆç‡æˆä¸ºäº†å…³é”®æŒ‘æˆ˜ã€‚å­—èŠ‚è·³åŠ¨ï¼ˆByteDanceï¼‰åœ¨å…¶å¤§è§„æ¨¡äº‘æœåŠ¡ä¸­å¹¿æ³›ä½¿ç”¨ RocksDB ä½œä¸ºæœ¬åœ°å­˜å‚¨å¼•æ“ã€‚ç„¶è€Œï¼Œç”±äº RocksDB åœ¨é«˜å†™å…¥å¯†é›†å‹è´Ÿè½½ã€æˆæœ¬ä¼˜åŒ–ä»¥åŠå°¾å»¶è¿Ÿæ§åˆ¶ä¸Šçš„å±€é™æ€§ï¼Œå­—èŠ‚è·³åŠ¨å›¢é˜Ÿå¼€å‘äº† &lt;strong>LavaStore&lt;/strong>â€”â€”ä¸€ä¸ªä¸“é—¨é’ˆå¯¹äº‘æœåŠ¡ä¼˜åŒ–çš„é«˜æ€§èƒ½ã€æœ¬åœ°å­˜å‚¨å¼•æ“ã€‚&lt;/p>
&lt;p>æœ¬æ–‡åŸºäºå…¥é€‰ &lt;strong>VLDB 2024&lt;/strong> çš„è®ºæ–‡ &lt;em>&amp;ldquo;LavaStore: ByteDanceâ€™s Purpose-built, High-performance, Cost-effective Local Storage Engine for Cloud Services&amp;rdquo;&lt;/em>ï¼Œç»“åˆå·¥ä¸šå®è·µæ•°æ®ï¼Œç³»ç»Ÿåˆ†æ LavaStore çš„æ ¸å¿ƒè®¾è®¡ã€ä¼˜åŒ–ç­–ç•¥åŠå®é™…åº”ç”¨è¡¨ç°ã€‚æˆªè‡³2025å¹´ï¼ŒLavaStore å·²åœ¨å­—èŠ‚è·³åŠ¨å†…éƒ¨éƒ¨ç½² &lt;strong>æ•°åä¸‡ä¸ªè¿è¡Œå®ä¾‹&lt;/strong>ï¼Œå­˜å‚¨è¶…è¿‡ &lt;strong>100PB æ•°æ®&lt;/strong>ï¼Œæ¯ç§’å¤„ç† &lt;strong>æ•°åäº¿æ¬¡è¯·æ±‚&lt;/strong>ï¼Œæˆä¸ºäº‘åŸç”Ÿå­˜å‚¨é¢†åŸŸçš„é‡è¦åˆ›æ–°ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="lavastore-è®¾è®¡èƒŒæ™¯ä¸æŒ‘æˆ˜-1">LavaStore è®¾è®¡èƒŒæ™¯ä¸æŒ‘æˆ˜ &lt;a href="#lavastore-%e8%ae%be%e8%ae%a1%e8%83%8c%e6%99%af%e4%b8%8e%e6%8c%91%e6%88%98-1" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>åœ¨å­—èŠ‚è·³åŠ¨çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå­˜å‚¨å¼•æ“ä¸»è¦é¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>å†™å…¥æ”¾å¤§é—®é¢˜&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>ç”±äº LSM-tree ç»“æ„çš„ç‰¹æ€§ï¼ŒRocksDB åœ¨å¤„ç†å¤§è§„æ¨¡å†™å…¥æ—¶å­˜åœ¨è¾ƒå¤§çš„å†™å…¥æ”¾å¤§é—®é¢˜ï¼ˆWAFâ‰ˆ2ï¼‰ã€‚&lt;/li>
&lt;li>ç°æœ‰çš„ KV åˆ†ç¦»æ–¹æ¡ˆï¼ˆå¦‚ BlobDBï¼‰åœ¨åº”å¯¹å¤§å€¼å­˜å‚¨æ—¶ä»å­˜åœ¨ &lt;strong>GC ä¸ SSTable å‹ç¼©å¼ºè€¦åˆ&lt;/strong> çš„é—®é¢˜ï¼Œå¯¼è‡´é¢å¤– I/O å¼€é”€ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>é«˜æ•ˆå­˜å‚¨éœ€æ±‚&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>äº‘æœåŠ¡å¯¹å­˜å‚¨æˆæœ¬æœ‰ä¸¥æ ¼æ§åˆ¶ï¼Œéœ€åœ¨ä¿è¯æ€§èƒ½çš„å‰æä¸‹é™ä½å­˜å‚¨å¼€é”€ã€‚ä¾‹å¦‚ï¼ŒABase ç¼“å­˜ç³»ç»Ÿè¦æ±‚ &lt;strong>å­˜å‚¨ç©ºé—´å¼€é”€ä¸è¶…è¿‡6%&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½å°¾å»¶è¿Ÿéœ€æ±‚&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰å’Œç¼“å­˜æœåŠ¡å¯¹ &lt;strong>P99.99å»¶è¿Ÿ&lt;/strong> æœ‰ä¸¥æ ¼é™åˆ¶ï¼Œä¼ ç»Ÿå­˜å‚¨å¼•æ“åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹éš¾ä»¥æ»¡è¶³ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="lavastore-å…³é”®ä¼˜åŒ–ç‚¹-1">LavaStore å…³é”®ä¼˜åŒ–ç‚¹ &lt;a href="#lavastore-%e5%85%b3%e9%94%ae%e4%bc%98%e5%8c%96%e7%82%b9-1" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;h3 id="1-lavakvè§£è€¦å¼-kv-åˆ†ç¦»æ–¹æ¡ˆ">1. &lt;strong>LavaKVï¼šè§£è€¦å¼ KV åˆ†ç¦»æ–¹æ¡ˆ&lt;/strong> &lt;a href="#1-lavakv%e8%a7%a3%e8%80%a6%e5%bc%8f-kv-%e5%88%86%e7%a6%bb%e6%96%b9%e6%a1%88" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>LavaKV é€šè¿‡ä»¥ä¸‹åˆ›æ–°è§£å†³ RocksDB çš„å†™å…¥æ”¾å¤§é—®é¢˜ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>GC ä¸å‹ç¼©è§£è€¦&lt;/strong>ï¼šå…è®¸ç‹¬ç«‹æ‰§è¡Œ Blob GCï¼Œé¿å…ä¼ ç»Ÿæ–¹æ¡ˆä¸­ GC ä¾èµ– SSTable å‹ç¼©çš„ç“¶é¢ˆï¼Œä½¿å†™å…¥æ€§èƒ½æå‡ &lt;strong>30%+&lt;/strong>ã€‚&lt;/li>
&lt;li>&lt;strong>Crit-bit Tree ç´¢å¼•&lt;/strong>ï¼šé‡‡ç”¨ç©ºé—´å ç”¨æ›´å°çš„ CBT æ›¿ä»£ Hash Indexï¼Œç´¢å¼•ä½“ç§¯å‡å°‘ &lt;strong>40%&lt;/strong>ï¼Œç¼“å­˜å‘½ä¸­ç‡æå‡ &lt;strong>18%&lt;/strong>ã€‚&lt;/li>
&lt;li>&lt;strong>åŠ¨æ€ GC ç­–ç•¥&lt;/strong>ï¼šåŸºäºç£ç›˜ä½¿ç”¨ç‡ï¼ˆå¦‚é˜ˆå€¼è¶…è¿‡70%æ—¶è§¦å‘ GCï¼‰è‡ªé€‚åº”è°ƒæ•´å›æ”¶é¢‘ç‡ï¼Œå¹³è¡¡ WAF ä¸å­˜å‚¨åˆ©ç”¨ç‡ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="2-lavalogwal-ä¸“ç”¨å¼•æ“">2. &lt;strong>LavaLogï¼šWAL ä¸“ç”¨å¼•æ“&lt;/strong> &lt;a href="#2-lavalogwal-%e4%b8%93%e7%94%a8%e5%bc%95%e6%93%8e" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>&lt;strong>å†™æ”¾å¤§ä¼˜åŒ–&lt;/strong>ï¼šé’ˆå¯¹ Write-Ahead Logging è®¾è®¡è½»é‡æ—¥å¿—ç»“æ„ï¼ŒWAF ä» RocksDB çš„ &lt;strong>â‰ˆ2&lt;/strong> é™è‡³æ¥è¿‘ &lt;strong>1&lt;/strong>ã€‚&lt;/li>
&lt;li>&lt;strong>å¹¶è¡Œ GC æœºåˆ¶&lt;/strong>ï¼šé€šè¿‡æ—¶é—´çª—å£åˆ’åˆ†å®ç°æ—¥å¿—åˆ†æ®µå›æ”¶ï¼ŒGC å»¶è¿Ÿé™ä½ &lt;strong>65%&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="3-lavafsç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿ">3. &lt;strong>LavaFSï¼šç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿ&lt;/strong> &lt;a href="#3-lavafs%e7%94%a8%e6%88%b7%e6%80%81%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>&lt;strong>å…ƒæ•°æ®ä¼˜åŒ–&lt;/strong>ï¼šé‡‡ç”¨è½»é‡çº§æ—¥å¿—æœºåˆ¶æ›¿ä»£ Ext4 çš„å®Œæ•´å…ƒæ•°æ®å†™å…¥ï¼ŒåŒæ­¥å†™å…¥ WAF ä» &lt;strong>6.7&lt;/strong> é™è‡³ &lt;strong>1&lt;/strong>ã€‚&lt;/li>
&lt;li>&lt;strong>I/O è·¯å¾„ç¼©çŸ­&lt;/strong>ï¼šç»•è¿‡å†…æ ¸æ€æ–‡ä»¶ç³»ç»Ÿï¼Œç›´æ¥ç®¡ç†è£¸è®¾å¤‡ï¼Œfsync å»¶è¿Ÿå‡å°‘ &lt;strong>80%&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="lavastore-ç”Ÿäº§ç¯å¢ƒè¡¨ç°">LavaStore ç”Ÿäº§ç¯å¢ƒè¡¨ç° &lt;a href="#lavastore-%e7%94%9f%e4%ba%a7%e7%8e%af%e5%a2%83%e8%a1%a8%e7%8e%b0" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;h3 id="1-æ•°æ®åº“vedbbytendb">1. &lt;strong>æ•°æ®åº“ï¼ˆveDB/ByteNDBï¼‰&lt;/strong> &lt;a href="#1-%e6%95%b0%e6%8d%ae%e5%ba%93vedbbytendb" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>å¹³å‡å†™å…¥å»¶è¿Ÿé™ä½ &lt;strong>61%&lt;/strong>ï¼ˆä» 12ms é™è‡³ 4.7msï¼‰&lt;/li>
&lt;li>è¯»å–å»¶è¿Ÿé™ä½ &lt;strong>16%&lt;/strong>ï¼ˆä» 3.2ms é™è‡³ 2.7msï¼‰&lt;/li>
&lt;li>æ€»ä½“ WAF é™ä½ &lt;strong>24%&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="2-ç¼“å­˜ç³»ç»Ÿabase">2. &lt;strong>ç¼“å­˜ç³»ç»Ÿï¼ˆABaseï¼‰&lt;/strong> &lt;a href="#2-%e7%bc%93%e5%ad%98%e7%b3%bb%e7%bb%9fabase" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>å†™å…¥ QPS æå‡ &lt;strong>87%&lt;/strong>ï¼ˆå³°å€¼è¾¾ 120ä¸‡ QPSï¼‰&lt;/li>
&lt;li>P99 å†™å…¥å»¶è¿Ÿé™ä½ &lt;strong>38%&lt;/strong>ï¼ˆä» 45ms é™è‡³ 28msï¼‰&lt;/li>
&lt;li>å­˜å‚¨æˆæœ¬å‡å°‘ &lt;strong>46%&lt;/strong>ï¼ˆé€šè¿‡æ··éƒ¨èµ„æºä¼˜åŒ–ï¼‰&lt;/li>
&lt;/ul>
&lt;h3 id="3-æµå¤„ç†flink">3. &lt;strong>æµå¤„ç†ï¼ˆFlinkï¼‰&lt;/strong> &lt;a href="#3-%e6%b5%81%e5%a4%84%e7%90%86flink" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>CPU ä½¿ç”¨ç‡é™ä½ &lt;strong>67%&lt;/strong>ï¼ˆå½’å› äº LavaFS çš„é›¶æ‹·è´ä¼˜åŒ–ï¼‰&lt;/li>
&lt;li>æ•°æ®å­˜å‚¨å ç”¨å‡å°‘ &lt;strong>15%&lt;/strong>ï¼ˆåŸºäº CBT ç´¢å¼•å‹ç¼©ï¼‰&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="æœªæ¥æ–¹å‘ä¸è¡Œä¸šå¯ç¤º">æœªæ¥æ–¹å‘ä¸è¡Œä¸šå¯ç¤º &lt;a href="#%e6%9c%aa%e6%9d%a5%e6%96%b9%e5%90%91%e4%b8%8e%e8%a1%8c%e4%b8%9a%e5%90%af%e7%a4%ba" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ol>
&lt;li>
&lt;p>&lt;strong>ç¡¬ä»¶ååŒä¼˜åŒ–&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>æ¢ç´¢ &lt;strong>ZNS SSDs&lt;/strong> çš„ Zone ç‰¹æ€§ä¸ LavaKV GC ç­–ç•¥ç»“åˆï¼Œè¿›ä¸€æ­¥é™ä½ WAFã€‚&lt;/li>
&lt;li>é›†æˆ &lt;strong>SPDK&lt;/strong> åŠ é€Ÿç”¨æˆ·æ€ I/O æ ˆï¼Œç›®æ ‡å°† fsync å»¶è¿Ÿå‹ç¼©è‡³ &lt;strong>10Î¼s çº§&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è·¨å±‚ GC ååŒ&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>è”åˆ SSD æ§åˆ¶å™¨å®ç° &lt;strong>ç‰©ç†å—å›æ”¶æç¤º&lt;/strong>ï¼Œå‡å°‘ SSD å†…éƒ¨ GC å¼€é”€ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å­¦æœ¯ä»·å€¼&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>LavaStore çš„æ¨¡å—åŒ–è®¾è®¡ï¼ˆKV åˆ†ç¦»ã€ä¸“ç”¨ WALã€ç”¨æˆ·æ€ FSï¼‰ä¸ºå·¥ä¸šç•Œæä¾›äº† &lt;strong>&amp;ldquo;å®šå‘ä¼˜åŒ–+é€šç”¨å…¼å®¹&amp;rdquo;&lt;/strong> çš„èŒƒå¼ï¼Œç›¸å…³è®ºæ–‡å·²è¢« VLDB 2024 æ”¶å½•ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="æ€»ç»“-1">æ€»ç»“ &lt;a href="#%e6%80%bb%e7%bb%93-1" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>LavaStore é€šè¿‡ &lt;strong>å‚ç›´è§£è€¦&lt;/strong>ï¼ˆGC ä¸å‹ç¼©åˆ†ç¦»ï¼‰ã€&lt;strong>æ°´å¹³å®šåˆ¶&lt;/strong>ï¼ˆWAL ä¸“ç”¨å¼•æ“ï¼‰å’Œ &lt;strong>åº•å±‚é‡æ„&lt;/strong>ï¼ˆç”¨æˆ·æ€ FSï¼‰çš„ä¸‰å±‚ä¼˜åŒ–ï¼Œåœ¨å†™å…¥æ€§èƒ½ã€å­˜å‚¨æ•ˆç‡å’Œå°¾å»¶è¿Ÿæ§åˆ¶ä¸Šå‡å–å¾—çªç ´ã€‚å…¶è®¾è®¡å“²å­¦è¡¨æ˜ï¼š&lt;strong>åœ¨é€šç”¨å­˜å‚¨å¼•æ“æ— æ³•æ»¡è¶³æç«¯åœºæ™¯éœ€æ±‚æ—¶ï¼Œé’ˆå¯¹æ€§åœ°æ”¹é€ å…³é”®å­ç³»ç»Ÿï¼Œèƒ½ä»¥è¾ƒä½æˆæœ¬å®ç°æ˜¾è‘—æ”¶ç›Š&lt;/strong>ã€‚&lt;/p>
&lt;dl>
&lt;dt>å¯¹äºä»ä¸šè€…è€Œè¨€ï¼ŒLavaStore çš„å®è·µéªŒè¯äº†ä»¥ä¸‹å…¬å¼çš„å¯è¡Œæ€§ï¼š&lt;/dt>
&lt;dt>$$ \text{ç³»ç»Ÿä¼˜åŒ–æ”¶ç›Š} = \sum (\text{æ¨¡å—å®šåˆ¶åŒ–å¢ç›Š}) - \text{å…¼å®¹æ€§ä»£ä»·} $$&lt;/dt>
&lt;dt>æœªæ¥ï¼Œéšç€å­˜å‚¨ç¡¬ä»¶ä¸è½¯ä»¶æ ˆçš„æ·±åº¦ååŒï¼Œæ­¤ç±»å®šå‘ä¼˜åŒ–æ–¹æ¡ˆæˆ–å°†æˆä¸ºäº‘åŸºç¡€è®¾æ–½çš„æ ‡é…ã€‚&lt;/dt>
&lt;dd>
&lt;p>å­—èŠ‚è·³åŠ¨åŸºç¡€æ¶æ„å›¢é˜Ÿ. LavaStore: ByteDanceâ€™s Purpose-built, High-performance, Cost-effective Local Storage Engine for Cloud Services. VLDB 2024.&lt;/p>
&lt;/dd>
&lt;/dl>
&lt;p>å¦‚æœä½ å¯¹ LavaStore æˆ–ç±»ä¼¼å­˜å‚¨å¼•æ“çš„ä¼˜åŒ–æœ‰æ›´å¤šè§è§£ï¼Œæ¬¢è¿ç•™è¨€äº¤æµï¼&lt;/p></description></item></channel></rss>