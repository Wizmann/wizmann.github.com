<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Sort on Maerlyn's Rainbow</title><link>https://wizmann.top/tags/sort/</link><description>Recent content in Sort on Maerlyn's Rainbow</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Sat, 25 Apr 2015 11:17:01 +0000</lastBuildDate><atom:link href="https://wizmann.top/tags/sort/index.xml" rel="self" type="application/rss+xml"/><item><title>ç”¨C++å®žçŽ°ä¸€ä¸ªé€šç”¨çš„sortå‡½æ•°</title><link>https://wizmann.top/posts/a-common-sorting-function-with-cpp/</link><pubDate>Sat, 25 Apr 2015 11:17:01 +0000</pubDate><guid>https://wizmann.top/posts/a-common-sorting-function-with-cpp/</guid><description>&lt;h2 id="é—®é¢˜">é—®é¢˜ &lt;a href="#%e9%97%ae%e9%a2%98" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>ç”¨C++å®žçŽ°ä¸€ä¸ªå°½å¯èƒ½é€šç”¨çš„sortå‡½æ•°&lt;/p>
&lt;h2 id="åˆ†æž">åˆ†æž &lt;a href="#%e5%88%86%e6%9e%90" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>ä¸€ä¸ªé€šç”¨çš„sortå‡½æ•°åº”è¯¥åŒ…å«ä»¥ä¸‹è¦ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ç¡®å®žå¯ä»¥æŽ’åº(LOL)&lt;/li>
&lt;li>å¯ä»¥åº”å¯¹C-style arrayå’ŒC++-style containerçš„æŽ’åºéœ€æ±‚&lt;/li>
&lt;li>å¯ä»¥åº”ç”¨äºŽä»»æ„random access container&lt;/li>
&lt;li>å¯ä»¥ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„æŽ’åºå‡½æ•° / ä»¿å‡½æ•° / lambdaå‡½æ•°&lt;/li>
&lt;/ul>
&lt;h2 id="å®žçŽ°">å®žçŽ° &lt;a href="#%e5%ae%9e%e7%8e%b0" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>ä¸ºäº†ä¸Žstdä¸­çš„é€šç”¨å‡½æ•°åšåŒºåˆ«ï¼Œè¿™é‡Œçš„å‘½åè§„åˆ™ï¼ŒåŒ…æ‹¬ç±»åž‹ä¸Žå‡½æ•°ï¼Œéƒ½åœ¨å‰é¢åŠ äº†&amp;quot;my&amp;quot;ä»¥ç¤ºåŒºåˆ«ã€‚å¯èƒ½ä¸Žæ ‡å‡†çš„å‘½åæ³•æœ‰å‡ºå…¥ï¼Œæ‰€ä»¥ä»…åšç¤ºä¾‹ç”¨ã€‚&lt;/p>
&lt;h3 id="æ€è·¯">æ€è·¯ &lt;a href="#%e6%80%9d%e8%b7%af" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>** æ‹·è´ä»£ç æ˜¯æ„šè ¢çš„è¡Œä¸ºã€‚**&lt;/p>
&lt;p>æˆ–è€…è¯´ï¼Œ&lt;/p>
&lt;p>** å¯¹äºŽåŒä¸€é’Ÿå®žçŽ°ï¼Œå°½é‡ä½¿ç”¨åŒä¸€ä»½ä»£ç ã€‚ **&lt;/p>
&lt;p>æ„Ÿè°¢C++ Templatesï¼Œå¯¹äºŽä¸åŒç±»åž‹ä¸Žéœ€æ±‚çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç”Ÿæˆå¤šä»½ä»£ç çš„åŠ³åŠ¨æ”¾å¿ƒçš„äº¤ç»™ç¼–è¯‘å™¨ã€‚å¹¶ä¸”ï¼ŒTemplatesçš„ä»£ç ç”Ÿæˆæ˜¯åœ¨ç¼–è¯‘æœŸå®Œæˆçš„ï¼Œå³ä¸ä¼šé€ æˆé¢å¤–çš„ä»£ç è†¨èƒ€ï¼ˆå¦‚æžœä½ å§¿åŠ¿æ­£ç¡®çš„è¯ï¼‰ï¼Œä¹Ÿä¸€èˆ¬ä¸ä¼šé€ æˆé¢å¤–çš„è¿è¡Œæ—¶å¼€é”€ã€‚&lt;/p>
&lt;h3 id="å‡½æ•°åŽŸåž‹">å‡½æ•°åŽŸåž‹ &lt;a href="#%e5%87%bd%e6%95%b0%e5%8e%9f%e5%9e%8b" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>æˆ‘ä»¬æ¨¡ä»¿std::sortæ¥è¿›è¡Œå¼€å‘ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>template&amp;lt; class It, class Compare &amp;gt;
void sort(It first, It last, Compare comp );
&lt;/code>&lt;/pre>&lt;h3 id="ä»Žè¿­ä»£å™¨æŒ‡é’ˆèŽ·å¾—å…ƒç´ ç±»åž‹">ä»Žè¿­ä»£å™¨/æŒ‡é’ˆèŽ·å¾—å…ƒç´ ç±»åž‹ &lt;a href="#%e4%bb%8e%e8%bf%ad%e4%bb%a3%e5%99%a8%e6%8c%87%e9%92%88%e8%8e%b7%e5%be%97%e5%85%83%e7%b4%a0%e7%b1%bb%e5%9e%8b" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>æˆ‘ä»¬è¦å¤„ç†Cé£Žæ ¼çš„æ•°ç»„ä¸ŽC++ç½‘ç»œçš„å®¹å™¨ã€‚é¦–å…ˆè¦ä»Žè¿­ä»£å™¨/æŒ‡é’ˆ&lt;code>It&lt;/code>ä¸­èŽ·å¾—å…ƒç´ ç±»åž‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">template&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#66d9ef">typename&lt;/span> It&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> &lt;span style="color:#a6e22e">myiter_traits&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">typedef&lt;/span> &lt;span style="color:#66d9ef">typename&lt;/span> It&lt;span style="color:#f92672">::&lt;/span>value_type value_type;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">template&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#66d9ef">typename&lt;/span> T&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> &lt;span style="color:#a6e22e">myiter_traits&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>T&lt;span style="color:#f92672">*&amp;gt;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">typedef&lt;/span> T value_type;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™ä¸ªå®žçŽ°éžå¸¸ç®€å•ï¼Œä¸åšèµ˜è¿°ã€‚&lt;/p>
&lt;h3 id="å®žçŽ°mysortå‡½æ•°">å®žçŽ°mysortå‡½æ•° &lt;a href="#%e5%ae%9e%e7%8e%b0mysort%e5%87%bd%e6%95%b0" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">template&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#66d9ef">typename&lt;/span> RandomAccessor, &lt;span style="color:#66d9ef">typename&lt;/span> FUNC&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">void&lt;/span> mysort(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> RandomAccessor&lt;span style="color:#f92672">&amp;amp;&lt;/span> head,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> RandomAccessor&lt;span style="color:#f92672">&amp;amp;&lt;/span> tail,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FUNC cmp)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (tail &lt;span style="color:#f92672">-&lt;/span> head &lt;span style="color:#f92672">&amp;lt;=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> RandomAccessor pivot &lt;span style="color:#f92672">=&lt;/span> mypartition(head, tail, cmp);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mysort(head, pivot, cmp);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mysort(pivot &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>, tail, cmp);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>mysortå‡½æ•°æœ¬ä½“å¹¶ä¸éš¾ç†è§£ï¼Œè¿™é‡Œé‡ç‚¹è®¨è®ºä¸€ä¸‹æ¨¡æ¿çš„æ€è·¯ã€‚&lt;/p>
&lt;p>ç”±äºŽè¿­ä»£å™¨ä¸éœ€è¦ç§»åŠ¨ï¼Œæ‰€ä»¥å£°æ˜Žä¸ºconst referenceã€‚åˆç”±äºŽæˆ‘ä»¬éœ€è¦å…¼å®¹å„ç§ä¸åŒç±»åž‹çš„æŽ’åºæ–¹æ³•ï¼ˆå‡½æ•°ã€ä»¿å‡½æ•°ã€lambdaã€std::functionç­‰ï¼‰ï¼Œæ‰€ä»¥ä¸å¯¹&lt;code>FUNC&lt;/code>ç±»åž‹è¿›è¡Œé™åˆ¶ï¼Œå³æ‰€æœ‰å¯ä»¥è¢«callçš„ç±»åž‹éƒ½å¯ä»¥åšä¸ºæ¨¡æ¿å‚æ•°ã€‚&lt;/p>
&lt;h3 id="å®žçŽ°mypartitionå‡½æ•°">å®žçŽ°mypartitionå‡½æ•° &lt;a href="#%e5%ae%9e%e7%8e%b0mypartition%e5%87%bd%e6%95%b0" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>å¿«é€ŸæŽ’åºçš„çµé­‚å°±æ˜¯å¿«é€Ÿåˆ’åˆ†ã€‚å¦‚æžœå¤„ç†å¾—å½“ï¼Œquick sortå¯ä»¥è§†ä½œä¸€ä¸ªç¨³å®šçš„æŽ’åºå‡½æ•°ï¼›å¦åˆ™ï¼Œä¸€ç»„æž„é€ ï¼ˆä¸å¿…è¦ç²¾å¿ƒæž„é€ ï¼‰çš„æ•°æ®å°±å¯ä»¥æŠŠquick sortå˜æˆ&amp;quot;slow sort&amp;quot;ã€‚&lt;/p>
&lt;h4 id="å¯èƒ½ä¼šä¸Šquick-sorté€€åŒ–çš„æ•°æ®">å¯èƒ½ä¼šä¸Šquick sorté€€åŒ–çš„æ•°æ® &lt;a href="#%e5%8f%af%e8%83%bd%e4%bc%9a%e4%b8%8aquick-sort%e9%80%80%e5%8c%96%e7%9a%84%e6%95%b0%e6%8d%ae" class="anchor">ðŸ”—&lt;/a>&lt;/h4>&lt;ul>
&lt;li>åŸºæœ¬ä¸€è‡´çš„æ•°æ® &lt;br>
e.g. &lt;code>1, 1, 1, 1 ... 1, 1&lt;/code> or &lt;code>1, 1, ... 2, 2, ... 3, 3&lt;/code>&lt;/li>
&lt;li>æœ‰åºæˆ–åŸºæœ¬æœ‰åºçš„æ•°æ® &lt;br>
e.g. &lt;code>1, 2, ... 5, 6&lt;/code> or &lt;code>6, 5, ... 2, 1&lt;/code>&lt;/li>
&lt;/ul>
&lt;h4 id="è§£å†³æ€è·¯">è§£å†³æ€è·¯ &lt;a href="#%e8%a7%a3%e5%86%b3%e6%80%9d%e8%b7%af" class="anchor">ðŸ”—&lt;/a>&lt;/h4>&lt;p>å¯¹äºŽæœ‰å¤§é‡é‡å¤çš„æ•°æ®ï¼Œæˆ‘ä»¬åœ¨å¤„ç†æ—¶è¦æ³¨æ„å¹³å‡åˆ†é…è¿™äº›é‡å¤æ•°æ®ã€‚å³ï¼Œå¯¹äºŽä¸Žpivotç›¸ç­‰çš„æ•°æ®ï¼Œå°½é‡ä¿è¯ä¸€åŠæ”¾åœ¨å·¦é¢ï¼Œä¸€åŠæ”¾åœ¨å³é¢ã€‚&lt;/p>
&lt;p>å¯¹äºŽæœ‰åºæˆ–åŸºæœ¬æœ‰åºçš„æ•°æ®ï¼Œæˆ‘ä»¬åœ¨pivotçš„é€‰æ‹©ä¸Šå¯ä»¥ä½¿ç”¨éšæœºã€ä¸‰å€¼æ³•ç­‰æ‰‹æ®µï¼Œä¿è¯æ•°æ®çš„å¹³å‡åˆ†é…ã€‚&lt;/p>
&lt;p>æ€»çš„è¯´æ¥ï¼Œquick sortçš„é«˜æ•ˆæ€§ï¼Œå–å†³äºŽpartitionå‡½æ•°çš„å¹³å‡åˆ†é…æ€§èƒ½ä¸Šã€‚&lt;/p>
&lt;h4 id="ä¸€ä¸ªå®žçŽ°">ä¸€ä¸ªå®žçŽ° &lt;a href="#%e4%b8%80%e4%b8%aa%e5%ae%9e%e7%8e%b0" class="anchor">ðŸ”—&lt;/a>&lt;/h4>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">template&lt;/span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#66d9ef">typename&lt;/span> RandomAccessor, &lt;span style="color:#66d9ef">typename&lt;/span> FUNC&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RandomAccessor mypartition(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> RandomAccessor&lt;span style="color:#f92672">&amp;amp;&lt;/span> head,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> RandomAccessor&lt;span style="color:#f92672">&amp;amp;&lt;/span> tail,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FUNC cmp)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">auto&lt;/span> dis &lt;span style="color:#f92672">=&lt;/span> distance(head, tail);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RandomAccessor pivot &lt;span style="color:#f92672">=&lt;/span> head &lt;span style="color:#f92672">+&lt;/span> rand() &lt;span style="color:#f92672">%&lt;/span> dis;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iter_swap(pivot, head);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pivot &lt;span style="color:#f92672">=&lt;/span> head;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RandomAccessor l &lt;span style="color:#f92672">=&lt;/span> head;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RandomAccessor r &lt;span style="color:#f92672">=&lt;/span> tail &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> ptr &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">while&lt;/span> (l &lt;span style="color:#f92672">&amp;lt;=&lt;/span> r) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">while&lt;/span> (l &lt;span style="color:#f92672">&amp;lt;=&lt;/span> r) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">bool&lt;/span> lt &lt;span style="color:#f92672">=&lt;/span> cmp(&lt;span style="color:#f92672">*&lt;/span>l, &lt;span style="color:#f92672">*&lt;/span>pivot);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">bool&lt;/span> gt &lt;span style="color:#f92672">=&lt;/span> cmp(&lt;span style="color:#f92672">*&lt;/span>pivot, &lt;span style="color:#f92672">*&lt;/span>l);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">bool&lt;/span> eq &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">!&lt;/span>lt &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#f92672">!&lt;/span>gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (lt &lt;span style="color:#f92672">||&lt;/span> (eq &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> ptr &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> l&lt;span style="color:#f92672">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ptr &lt;span style="color:#f92672">^=&lt;/span> (eq&lt;span style="color:#f92672">?&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">while&lt;/span> (l &lt;span style="color:#f92672">&amp;lt;=&lt;/span> r) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">bool&lt;/span> lt &lt;span style="color:#f92672">=&lt;/span> cmp(&lt;span style="color:#f92672">*&lt;/span>r, &lt;span style="color:#f92672">*&lt;/span>pivot);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">bool&lt;/span> gt &lt;span style="color:#f92672">=&lt;/span> cmp(&lt;span style="color:#f92672">*&lt;/span>pivot, &lt;span style="color:#f92672">*&lt;/span>r);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">bool&lt;/span> eq &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">!&lt;/span>lt &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#f92672">!&lt;/span>gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (gt &lt;span style="color:#f92672">||&lt;/span> (eq &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> ptr &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> r&lt;span style="color:#f92672">--&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ptr &lt;span style="color:#f92672">^=&lt;/span> (eq&lt;span style="color:#f92672">?&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (l &lt;span style="color:#f92672">&amp;lt;=&lt;/span> r) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> swap(&lt;span style="color:#f92672">*&lt;/span>l, &lt;span style="color:#f92672">*&lt;/span>r);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> l&lt;span style="color:#f92672">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> r&lt;span style="color:#f92672">--&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iter_swap(pivot, r);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> r;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ä¸»å‡½æ•°">ä¸»å‡½æ•° &lt;a href="#%e4%b8%bb%e5%87%bd%e6%95%b0" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> srand(time(NULL));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vector&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#66d9ef">int&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span> vec({&lt;span style="color:#ae81ff">2&lt;/span>, &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">4&lt;/span>, &lt;span style="color:#ae81ff">1999&lt;/span>});
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mysort(vec.begin(), vec.end(), less&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#66d9ef">int&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> (&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">auto&lt;/span>&lt;span style="color:#f92672">&amp;amp;&lt;/span> i: vec) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#e6db74">&amp;#34;%d &amp;#34;&lt;/span>, i);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> puts(&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> array[] &lt;span style="color:#f92672">=&lt;/span> {&lt;span style="color:#ae81ff">99&lt;/span>, &lt;span style="color:#ae81ff">19&lt;/span>, &lt;span style="color:#ae81ff">9999&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mysort(array &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>, array &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [](&lt;span style="color:#66d9ef">int&lt;/span> a, &lt;span style="color:#66d9ef">int&lt;/span> b)&lt;span style="color:#f92672">-&amp;gt;&lt;/span>&lt;span style="color:#66d9ef">bool&lt;/span> { &lt;span style="color:#66d9ef">return&lt;/span> a &lt;span style="color:#f92672">&amp;gt;&lt;/span> b; });
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> (&lt;span style="color:#66d9ef">int&lt;/span> i &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>; i &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#ae81ff">3&lt;/span>; i&lt;span style="color:#f92672">++&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#e6db74">&amp;#34;%d &amp;#34;&lt;/span>, array[i]);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> puts(&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>