<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>GeoHash on Maerlyn's Rainbow</title><link>https://wizmann.top/tags/geohash/</link><description>Recent content in GeoHash on Maerlyn's Rainbow</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Tue, 04 Feb 2014 00:10:00 +0000</lastBuildDate><atom:link href="https://wizmann.top/tags/geohash/index.xml" rel="self" type="application/rss+xml"/><item><title>GeoHashç®—æ³•</title><link>https://wizmann.top/posts/geo-hash-algorithm/</link><pubDate>Tue, 04 Feb 2014 00:10:00 +0000</pubDate><guid>https://wizmann.top/posts/geo-hash-algorithm/</guid><description>&lt;h2 id="geohash">GeoHash &lt;a href="#geohash" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;blockquote>
&lt;p>Geohash is a latitude/longitude geocode system invented by Gustavo Niemeyer when writing the web service at geohash.org, and put into the public domain. It is a hierarchical spatial data structure which subdivides space into buckets of grid shape.&lt;/p>&lt;/blockquote>
&lt;p>ç®€å•è¯´ï¼ŒGeoHashæ˜¯ä¸€ä¸ªå°†ç»çº¬åº¦ä¿¡æ¯ç¼–ç æˆä¸€ä¸ªstringçš„ç®—æ³•ã€‚ä»Žè€Œä¾¿äºŽå‚¨å­˜ã€æŸ¥æ‰¾ã€‚&lt;/p>
&lt;h2 id="geohashç®—æ³•çš„æ­¥éª¤">GeoHashç®—æ³•çš„æ­¥éª¤ &lt;a href="#geohash%e7%ae%97%e6%b3%95%e7%9a%84%e6%ad%a5%e9%aa%a4" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>GeoHashå¯¹ç»åº¦çº¬åº¦åˆ†åˆ«ç¼–ç ï¼ŒåŽŸç†æ˜¯è¿­ä»£åšäºŒåˆ†ï¼Œè¿›è€Œé€¼è¿‘çœŸå®žå€¼ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä»¥çº¬åº¦ä¸¾ä¾‹ã€‚&lt;/p>
&lt;p>ç”±äºŽåœ°çƒçº¬åº¦åŒºé—´æ˜¯[-90,90]ï¼Œæ‰€ä»¥å–åŒºé—´ä¸­ç‚¹&lt;code>pivot&lt;/code>ã€‚å¦‚æžœæŸåœ°ç‚¹Pçš„çº¬åº¦å¤§äºŽ&lt;code>pivot&lt;/code>çš„å€¼ï¼Œåˆ™ç¼–ç çš„ç¬¬1ä½ä¸º&lt;code>1&lt;/code>ï¼Œåä¹‹ä¸º&lt;code>0&lt;/code>ã€‚&lt;/p>
&lt;p>ç„¶åŽç¼©å°èŒƒå›´ï¼Œè¿­ä»£Næ¬¡ã€‚å¾—åˆ°æœ€åŽçš„ç»“æžœã€‚&lt;/p>
&lt;p>ç»åº¦çš„èŒƒå›´æ˜¯[-180, 180]ã€‚æˆ‘ä»¬é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°ç»åº¦ç¼–ç ã€‚&lt;/p>
&lt;p>æœ€åŽæˆ‘ä»¬æŠŠç»åº¦å’Œçº¬åº¦çš„ç¼–ç è¿›è¡Œäº¤é”™ç»„åˆï¼Œå¶æ•°ä½æ”¾ç»åº¦ï¼Œå¥‡æ•°ä½æ”¾çº¬åº¦ã€‚å¾—åˆ°æœ€åŽçš„GeoHashç¼–ç ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œç»çº¬åº¦&lt;code>(57.64911,10.40744)&lt;/code>å¯ä»¥ä½¿ç”¨base32ç¼–ç ä¸º &lt;code>u4pruydqqvj&lt;/code>ã€‚&lt;/p>
&lt;h2 id="geohashç®—æ³•çš„ç”¨é€”">GeoHashç®—æ³•çš„ç”¨é€” &lt;a href="#geohash%e7%ae%97%e6%b3%95%e7%9a%84%e7%94%a8%e9%80%94" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>ç”±äºŽGeoHashä½¿ç”¨ç»çº¬åº¦äº¤é”™ç¼–ç ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨æŸä¸€ä¸ª&lt;b>å‰è¾&lt;/b>ï¼Œå°±å¯ä»¥åˆ’å®šä¸€ä¸ªç»çº¬åº¦èŒƒå›´ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-tk-pic/blog-geohash-grid.jpg" alt="GeoHash-grid">&lt;/p>
&lt;p>å¦‚æžœæˆ‘ä»¬å¯¹GeoHashç¼–ç è¿™ä¸€åˆ—è¿›è¡Œç´¢å¼•åŠ é€Ÿï¼Œåˆ™å¯ä»¥åœ¨è¾ƒå¿«çš„æ—¶é—´å†…æŸ¥æ‰¾åˆ°æŸä¸€ä¸ªèŒƒå›´å†…çš„æ‰€æœ‰gridï¼Œè¿›è€ŒèŽ·å¾—POIç­‰ä¿¡æ¯ã€‚&lt;/p>
&lt;h2 id="geohashçš„åŽ‹ç¼©æ€æƒ³">GeoHashçš„åŽ‹ç¼©æ€æƒ³ &lt;a href="#geohash%e7%9a%84%e5%8e%8b%e7%bc%a9%e6%80%9d%e6%83%b3" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>GeoHashçš„äº¤é”™ç¼–ç ä¸ºåŒºé—´æŸ¥æ‰¾æä¾›äº†éåŽ†ã€‚è€Œå¯¹ç»çº¬åº¦çš„é€¼è¿‘ç¼–ç åˆ™æä¾›äº†éžå¸¸å¥½çš„åŽ‹ç¼©ç‰¹æ€§ã€‚&lt;/p>
&lt;p>æ˜“å¾—ï¼Œä¸€ä¸ªç‚¹ä½äºŽ&lt;code>pivot&lt;/code>çš„å·¦å³/ä¸Šä¸‹çš„æœºçŽ‡æ˜¯ç›¸åŒçš„ã€‚æ‰€ä»¥ç¼–ç çš„æ¯ä¸€ä½çš„ä¿¡æ¯é‡éƒ½æ˜¯&lt;code>-logPr[s]&lt;/code>=&amp;gt;&lt;code>1bit&lt;/code>ï¼Œè¾¾åˆ°äº†æ•°æ®åŽ‹ç¼©çš„ä¸‹é™ã€‚&lt;/p>
&lt;p>åˆç”±äºŽäºŒåˆ†é€¼è¿‘çš„è‰¯å¥½æ€§èƒ½ï¼Œä½¿å¾—åŽ‹ç¼©/è§£åŽ‹ç¼©çš„é€Ÿåº¦å¯ä»¥è¾¾åˆ°æžé™ã€‚&lt;/p>
&lt;p>ä¸è¿‡åœ¨å®žé™…åº”ç”¨ä¸­ï¼ŒPOIä¸å¯èƒ½å®Œå…¨å¹³å‡åˆ†å¸ƒï¼Œæ‰€ä»¥GeoHashçš„åŽ‹ç¼©åªæ˜¯ä¸€ç§æŽ¥è¿‘æœ€ä¼˜è§£çš„æ–¹æ¡ˆã€‚ä½†æ˜¯ç”±äºŽäºŒåˆ†é€¼è¿‘æ³•å¸¦æ¥çš„å¯ç´¢å¼•æ€§ï¼ŒGeoHashç»å¯¹å¯ä»¥ç§°çš„ä¸Šæ˜¯ä¸€ä¸ªç²¾å¦™å®Œç¾Žçš„è®¾è®¡äº†ã€‚&lt;/p>
&lt;h2 id="åº”ç”¨---æ‹‰å–ç›®æ ‡å‘¨å›´çš„poi">åº”ç”¨ - æ‹‰å–ç›®æ ‡å‘¨å›´çš„POI &lt;a href="#%e5%ba%94%e7%94%a8---%e6%8b%89%e5%8f%96%e7%9b%ae%e6%a0%87%e5%91%a8%e5%9b%b4%e7%9a%84poi" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>æˆ‘ä»¬åœ¨ä¸€äº›LBSåº”ç”¨ä¸­ï¼Œç»å¸¸éœ€è¦æ‹‰å–æŸä¸€ç‚¹å‘¨å›´çš„POIã€‚&lt;/p>
&lt;p>å‡è®¾æˆ‘ä»¬å°†POIå­˜å‚¨ä¸ºä¸€ä¸ª&lt;code>pvlist&lt;/code>æ˜ å°„ã€‚å¹¶ä¸”èŽ·å¾—äº†æŸç‚¹çš„GeoHashå€¼ã€‚é‚£ä¹ˆæˆ‘ä»¬æ€Žä¹ˆå–å¾—å‘¨å›´çš„POIå‘¢ï¼Ÿ&lt;/p>
&lt;p>ç†æƒ³çŠ¶æ€ä¸‹ï¼Œâ€œé™„è¿‘çš„POIâ€éƒ½æ˜¯åœ¨ä¸€ä¸ªä»¥æŸç‚¹ä¸ºåœ†å¿ƒçš„åœ†è¿›è¡ŒæŸ¥æ‰¾ã€‚ä½†æ˜¯ç”±äºŽGeoHashåˆ’åˆ†çš„èŒƒå›´æ˜¯ä¸€ä¸ªçŸ©å½¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª&lt;code>3Ã—3&lt;/code>çš„å¤§çŸ©å½¢æ¥æ›¿ä»£åœ†å½¢èŒƒå›´ã€‚&lt;/p>
&lt;p>å…¶ä¸­&lt;code>3Ã—3&lt;/code>çŸ©å½¢ä¸­æœ€ä¸­é—´çš„çŸ©å½¢æ˜¯æˆ‘ä»¬ç¡®å®šçš„é‚£ä¸ªç‚¹ã€‚&lt;/p>
&lt;p>ç„¶åŽï¼Œæˆ‘ä»¬æ ¹æ®ç»™å‡ºçš„åŠå¾„&lt;code>r&lt;/code>ç¡®å®šGeoHashçš„ç²¾ç¡®åº¦ã€‚ä½¿å¾—æˆ‘ä»¬çš„&lt;code>3Ã—3&lt;/code>å¤§çŸ©å½¢å¯ä»¥åŒ…å«ç†æƒ³çš„åœ†å½¢èŒƒå›´ã€‚&lt;/p>
&lt;p>äºŽæ˜¯ä¸‹ä¸€æ­¥çš„ç›®æ ‡å°±æ˜¯æ‰¾åˆ°æŸç‚¹GeoHashçš„&lt;strong>8ä¸ª&lt;/strong>ä¸´è¿‘çš„GeoHashã€‚&lt;/p>
&lt;p>ç”±ä¸Šæ–‡æˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼ŒGeoHashçš„ç»çº¬åº¦æ˜¯åˆ†åˆ«ç¼–ç çš„ã€‚ä»¥ä¸€ä¸ª&lt;code>4Ã—4&lt;/code>çš„åœ°å›¾ä¸ºä¾‹ã€‚&lt;/p>
&lt;p>è¿™æ˜¯åœ¨çº¬åº¦ä¸Šçš„åˆ’åˆ†ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-tk-pic/blog-geohash-latitude-grid.png" alt="çº¬åº¦">&lt;/p>
&lt;p>å¯ä»¥çœ‹å‡ºï¼Œè¿žç»­çš„&lt;code>GeoHash Grid&lt;/code>çš„çº¬åº¦ç¼–ç ä¹Ÿæ˜¯è¿žç»­çš„ã€‚&lt;/p>
&lt;p>ç»åº¦åŒç†ã€‚&lt;/p>
&lt;p>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦&lt;code>decode&lt;/code>æˆ‘ä»¬çš„GeoHashç¼–ç ï¼Œå°†&lt;code>longitude&lt;/code>å’Œ&lt;code>latitude&lt;/code>ç¼–ç åˆ†åˆ«è¿›è¡Œ&lt;code>-1/+1&lt;/code>çš„æ“ä½œå°±å¯ä»¥èŽ·å¾—&lt;strong>é™„è¿‘çš„POI&lt;/strong>çš„GeoHashç /å‰è¾äº†ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“ &lt;a href="#%e6%80%bb%e7%bb%93" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>GeoHashçš„ä¸‰ä¸ªç‰¹æ€§ï¼Œ&lt;b>å¯ç´¢å¼•&lt;/b>ï¼Œ&lt;b>åŽ‹ç¼©&lt;/b>ï¼Œ&lt;b>ä¾¿äºŽå­˜å‚¨&lt;/b>ã€‚&lt;/p>
&lt;p>è¿˜æœ‰ï¼Œå¥½ä¹…ä¸å†™æ–‡äº†ã€‚&lt;/p>
&lt;h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™ &lt;a href="#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&lt;a href="http://book.douban.com/subject/11554138/">HBase in Action&lt;/a>, Chpt. 8&lt;/li>
&lt;li>&lt;a href="http://book.douban.com/subject/3729518/">æ·±å…¥æœç´¢å¼•æ“Ž&lt;/a>, Chpt. 2&lt;/li>
&lt;li>&lt;a href="http://en.wikipedia.org/wiki/Geohash">GeoHash - Wikipedia&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.cnblogs.com/LBSer/p/3310455.html">GeoHashæ ¸å¿ƒåŽŸç†è§£æž&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://code.google.com/p/python-geohash/">python-geohash&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>