<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Paxos on Maerlyn's Rainbow</title><link>https://wizmann.top/tags/paxos/</link><description>Recent content in Paxos on Maerlyn's Rainbow</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Wed, 05 Dec 2018 00:00:00 +0000</lastBuildDate><atom:link href="https://wizmann.top/tags/paxos/index.xml" rel="self" type="application/rss+xml"/><item><title>ç™½è¯ä¸€è‡´æ€§åè®® - Paxosã€Raftå’ŒPacificA[1]</title><link>https://wizmann.top/posts/paxos-raft-pecifaca1/</link><pubDate>Wed, 05 Dec 2018 00:00:00 +0000</pubDate><guid>https://wizmann.top/posts/paxos-raft-pecifaca1/</guid><description>&lt;h2 id="ä¹¦æ¥ä¸Šæ–‡---multi-paxos">ä¹¦æ¥ä¸Šæ–‡ - Multi Paxos &lt;a href="#%e4%b9%a6%e6%8e%a5%e4%b8%8a%e6%96%87---multi-paxos" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†Basic Paxoså’ŒMulti Paxosçš„å¼‚åŒã€‚åœ¨&lt;a href="https://lamport.azurewebsites.net/pubs/paxos-simple.pdf">Paxos Made Simple&lt;/a>è®ºæ–‡ä¸­ï¼Œä½œè€…æåˆ°äº†Multi Paxosçš„ä¸€ç§å®ç°ã€‚è¿™ä¸ªå®ç°å…è®¸æˆ‘ä»¬å¯¹ä¸€ä¸ªè¿ç»­çš„æ•°æ®æµï¼ˆä¹Ÿå¯ä»¥ç§°ä¸ºå¤åˆ¶æ—¥å¿—ï¼Œreplicated logï¼‰è¾¾æˆå…±è¯†ï¼Œä»è€Œå®ç°èŠ‚ç‚¹çŠ¶æ€çš„ä¸€è‡´æ€§å¤åˆ¶ã€‚&lt;/p>
&lt;h3 id="ç¡®å®šæ€§çŠ¶æ€æœº">ç¡®å®šæ€§çŠ¶æ€æœº &lt;a href="#%e7%a1%ae%e5%ae%9a%e6%80%a7%e7%8a%b6%e6%80%81%e6%9c%ba" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>æˆ‘ä»¬å¯ä»¥å°†ç³»ç»Ÿä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹æŠ½è±¡ä¸ºä¸€ä¸ªæœ‰ç€ç¡®å®šæ€§çŠ¶æ€æœºï¼Œå³ç»™å®šå¤šä¸ªçŠ¶æ€ä¸€è‡´çš„çŠ¶æ€æœºï¼Œåœ¨æ‰§è¡ŒåŒä¸€ä¸ªå‘½ä»¤ä¹‹åï¼Œå…¶çŠ¶æ€ä»ä¿æŒä¸€è‡´ã€‚ï¼ˆå¯ä»¥æƒ³ä¸€æƒ³ç¼–è¯‘åŸç†é‡Œé¢çš„DFAï¼‰&lt;/p>
&lt;h3 id="leader---ç³»ç»Ÿä¸­å”¯ä¸€çš„proposer">Leader - ç³»ç»Ÿä¸­å”¯ä¸€çš„proposer &lt;a href="#leader---%e7%b3%bb%e7%bb%9f%e4%b8%ad%e5%94%af%e4%b8%80%e7%9a%84proposer" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>å¦‚æœç³»ç»Ÿä¸­å­˜åœ¨æœ‰å¤šä¸ªproposerï¼Œé‚£ä¹ˆå°±å¾ˆå¯èƒ½ä¼šå‡ºç°å¤šä¸ªææ¡ˆç›¸äº’å¹²æ‰°çš„æƒ…å†µã€‚è™½ç„¶æ ¹æ®è¯æ˜ï¼Œæœ€ç»ˆè¿™äº›ææ¡ˆéƒ½ä¼šæ”¶æ•›åˆ°ä¸€è‡´ï¼Œä½†æ˜¯æ€§èƒ½ä¼šéå¸¸ä½ä¸‹ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ç³»ç»Ÿä¸­é€šè¿‡é€‰ä¸¾ï¼Œé€‰å‡ºä¸€ä¸ªleaderåšä¸ºä¸»proposerï¼ˆdistinguishied proposerï¼‰ï¼Œæ‰€æœ‰çš„ææ¡ˆéƒ½ç”±leaderæå‡ºã€‚&lt;/p>
&lt;p>è¿™æ ·ä¸€æ¥ï¼Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¸ä¼šå‡ºç°ææ¡ˆç›¸äº’å¹²æ‰°çš„æƒ…å†µã€‚åªæœ‰åœ¨leaderåˆ‡æ¢çš„ç¬é—´ï¼Œå¯èƒ½ä¼šå‡ºç°ç›¸åŒç¼–å·çš„ä¸åŒææ¡ˆï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç®—æ³•å¯ä»¥å¾ˆå¥½çš„å¤„ç†è¿™ç§æƒ…å†µã€‚&lt;/p>
&lt;h3 id="åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„tcp">åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„â€œTCPâ€ &lt;a href="#%e5%88%86%e5%b8%83%e5%bc%8f%e7%b3%bb%e7%bb%9f%e4%b8%ad%e7%9a%84tcp" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>ç±»ä¼¼äºTCPåè®®ä¸­åºåˆ—å·ï¼ŒMulti Paxosä¸­çš„æ¯ä¸€ä¸ªå‘½ä»¤éƒ½æœ‰ä¸€ä¸ªé€’å¢çš„ç¼–å·ã€‚å³æˆ‘ä»¬å‰ä¸€ä¸ªæ‰§è¡Œçš„å‘½ä»¤æ˜¯100å·ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªæ‰§è¡Œçš„å‘½ä»¤ä¸€å®šæ˜¯101å·ã€‚æ¯ä¸€ä¸ªå‘½ä»¤éƒ½æ˜¯ä¸€ä¸ªPaxoså®ä¾‹ï¼ŒLeaderå‘æ‰€æœ‰èŠ‚ç‚¹å‘å¸ƒè¿™ä¸ªææ¡ˆï¼Œåœ¨ææ¡ˆè¾¾æˆä¸€è‡´ä¹‹åï¼ˆå¤šæ•°èŠ‚ç‚¹è¿”å›ACKï¼‰ï¼Œå°±å¯ä»¥è®¤ä¸ºè¿™ä¸ªå‘½ä»¤å·²ç»è¾¾æˆäº†ä¸€è‡´ã€‚&lt;/p>
&lt;p>å’ŒTCPä¸€æ ·ï¼Œå¦‚æœæˆ‘ä»¬é¡ºåºçš„å‘å¸ƒå¹¶è¡¨å†³ææ¡ˆï¼Œæ•ˆç‡ä¼šéå¸¸ä½ä¸‹ï¼ˆTCPåœç­‰æ¨¡å‹ï¼‰ã€‚æ‰€ä»¥ï¼ŒMulti Paxosé‡‡ç”¨ç±»ä¼¼æ»‘åŠ¨çª—å£çš„æ–¹æ¡ˆï¼Œæ¯æ¬¡å¯¹Nä¸ªææ¡ˆè¿›è¡Œè¡¨å†³ï¼Œä»¥å¢åŠ è¡¨å†³çš„å¸¦å®½ã€‚&lt;/p>
&lt;p>å’ŒTCPä¸åŒçš„æ˜¯ï¼Œå¦‚æœæŸäº›åºå·çš„TCPåŒ…åœ¨ä¼ è¾“ä¸­ä¸¢å¤±ï¼Œæœ€åçš„æƒ…å†µæ˜¯æˆ‘ä»¬ä¼šRSTè¿™æ¡é“¾æ¥ï¼Œå…¶å®ƒçš„å·¥ä½œéƒ½äº¤ç»™åº”ç”¨å±‚é€»è¾‘æ¥è§£å†³ã€‚&lt;/p>
&lt;p>ä½†æ˜¯å¯¹äºMulti Paxosæ¥è¯´ï¼Œå¦‚æœæŸäº›ææ¡ˆæ²¡æœ‰è¢«è¡¨å†³ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨æ—¥å¿—ä¸­ç•™ä¸‹ç©ºæ´ï¼ˆgapï¼‰ã€‚è¿™ä¼šç›´æ¥å½±å“ç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚å¦‚æœæ°å·§è¿™ä¸ªæ—¶å€™å‘ç”Ÿäº†Leaderå¤±æ•ˆï¼Œé‚£ä¹ˆæ–°é€‰ä¸¾å‡ºæ¥çš„LeaderèŠ‚ç‚¹å°±è¦å¤„ç†æ—¥å¿—ä¸­çš„ç©ºæ´ã€‚&lt;/p>
&lt;p>è§£å†³ç©ºæ´çš„åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯Leaderå‘æ‰€æœ‰æˆå‘˜è¯¢é—®ï¼Œå¯¹äºè¿™ä¸ªææ¡ˆï¼Œæ˜¯å¦å·²ç»æœ‰è¾¾æˆå…±è¯†çš„å€¼ã€‚å¦‚æœæœ‰çš„è¯ï¼Œå°±ä½¿ç”¨è¿™ä¸ªå€¼ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±ç”¨ä¸€ä¸ªno-opï¼ˆæ— æ“ä½œï¼‰å‘½ä»¤æ¥å¡«è¡¥è¿™ä¸ªç©ºä½ã€‚ä½†æ˜¯ï¼Œå¯¹äºå®é™…å·¥ç¨‹ä¸­æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è§£å†³æœªè¾¾æˆå…±è¯†æ—¶å€¼çš„å†²çªç­‰æƒ…å†µã€‚&lt;/p>
&lt;h2 id="ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦raft">ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦Raftï¼Ÿ &lt;a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e6%88%91%e4%bb%ac%e8%bf%98%e9%9c%80%e8%a6%81raft" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>Multi-Paxosåœ¨ç°å®çš„å·¥ç¨‹å½“ä¸­æ›´å¤šçš„æ˜¯ä¸€ç§ç¬¦å·ã€‚å› ä¸ºç†è®ºä¸å®è·µä¸Šçš„éš”é˜‚æ˜¯å¦‚æ­¤ä¹‹å¤§ï¼Œå¦‚æœæƒ³åœ¨å·¥ç¨‹æ„ä¹‰ä¸Šå®ç°ä¸€ä¸ªå¯ç”¨çš„Multi-Paxosç®—æ³•ï¼Œå¿…ç„¶ä¼šåœ¨åŸç®—æ³•çš„åŸºç¡€ä¸Šè¿›è¡Œä¸€ç³»åˆ—çš„é­”æ”¹ï¼Œè¿™äº›é­”æ”¹è™½ç„¶å‡å£°ç§°è‡ªå·±å®ç°äº†Multi-Paxosç®—æ³•ï¼Œä½†æ˜¯è¿™äº›ç®—æ³•å¤§å¤šä¸èƒ½è¢«è¯æ˜æ˜¯æ­£ç¡®çš„ã€‚&lt;/p>
&lt;p>Raftçš„ç›®æ ‡æ˜¯ï¼Œå³è®©ç®—æ³•æ»¡è¶³å·¥ç¨‹åŒ–éœ€è¦ï¼Œåˆèƒ½ä¿è¯å…¶æ­£ç¡®æ€§ã€‚&lt;/p>
&lt;blockquote>
&lt;p>Raftè®ºæ–‡å½“ä¸­è¯´Paxosç®—æ³•éš¾ä»¥ç†è§£ï¼Œæˆ‘å¹¶ä¸è¿™ä¹ˆè§‰å¾—ã€‚å› ä¸ºPaxosè®ºæ–‡é‡Œé¢æŠŠå›°éš¾çš„éƒ¨åˆ†éƒ½ä¸€ç¬”å¸¦è¿‡äº†ã€‚åªå‰©ä¸‹ç®€å•çš„é‚£éƒ¨åˆ†äº†ã€‚&lt;/p>&lt;/blockquote>
&lt;h2 id="raft-vs-paxos">Raft vs. Paxos &lt;a href="#raft-vs-paxos" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;h3 id="leaderé€‰ä¸¾">Leaderé€‰ä¸¾ &lt;a href="#leader%e9%80%89%e4%b8%be" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>åœ¨Paxosè®ºæ–‡ä¸­ï¼ŒLeaderé€‰ä¸¾è¢«è§†ä½œä¸€ç§ç‰¹æ®Šçš„â€œææ¡ˆé€‰ä¸¾â€ã€‚åªéœ€è¦Proposerå’ŒAcceptorè¿›è¡Œä¸€è½®æˆ–å¤šè½®ï¼ˆå–å†³äºè¿æ°”ï¼‰æŠ•ç¥¨ï¼Œå°±å¯ä»¥ç¡®å®šLeaderã€‚&lt;/p>
&lt;p>ä½†åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»¥ä¸‹çš„é—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å¦‚ä½•åˆ¤æ–­Leaderæ˜¯å¦å­˜æ´»&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ˜¯å¦æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰èµ„æ ¼æ‹…å½“Leader&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="leaderçš„ä»»æœŸ">Leaderçš„ä»»æœŸ &lt;a href="#leader%e7%9a%84%e4%bb%bb%e6%9c%9f" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>Leaderåœ¨è¢«é€‰ä¸¾å‡ºæ¥ä¹‹åï¼Œéƒ½ä¼šè¢«èµ‹äºˆä¸€ä¸ªä»»æœŸç¼–å·ï¼ˆtermï¼‰ã€‚åœ¨ä»»æœŸé‡Œï¼ŒLeaderä¼šå‘æ‰€æœ‰æˆå‘˜å‘é€å¿ƒè·³åŒ…ä»¥å»¶ç»­è‡ªå·±çš„ä»»æœŸã€‚&lt;/p>
&lt;p>å¦‚æœLeaderå¤±æ•ˆæ— æ³•å‘é€å¿ƒè·³åŒ…çš„è¯ï¼Œæˆå‘˜å°±ä¼šäº§ç”Ÿä¸€ä¸ªâ€œé€‰ä¸¾è¶…æ—¶â€ï¼Œæ­¤æ—¶å°±ä¼šé‡æ–°è§¦å‘ä¸€è½®é€‰ä¸¾ã€‚&lt;/p>
&lt;p>é€‰ä¸¾çš„æµç¨‹å’ŒBasic-Paxosç®—æ³•ç±»ä¼¼ï¼Œproposerå‘æ‰€æœ‰æˆå‘˜å‘é€â€œæˆ‘è¦å½“è€å¤§â€çš„ææ¡ˆï¼Œæˆå‘˜ä»¬ä¼šé…Œæƒ…å›å¤ã€‚å¦‚æœå¾—åˆ°äº†å¤šæ•°æˆå‘˜çš„è‚¯å®šï¼Œè¿™ä¸ªproposerå°±æ˜¯ä¸‹ä¸€ä¸ªä»»æœŸçš„Leaderäº†ã€‚&lt;/p>
&lt;p>ä»æœ¬è´¨ä¸Šè¯´ï¼Œæ¯ä¸€ä¸ªä»»æœŸçš„Leaderé€‰ä¸¾ï¼Œéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Basic-Paxoså®ä¾‹ã€‚ä»»æœŸå·ç›¸å½“äºPaxosé‡Œé¢çš„ææ¡ˆç¼–å·ã€‚&lt;/p>
&lt;h4 id="leaderèµ„æ ¼çš„è®¤å®š">Leaderèµ„æ ¼çš„è®¤å®š &lt;a href="#leader%e8%b5%84%e6%a0%bc%e7%9a%84%e8%ae%a4%e5%ae%9a" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>Rafté‡‡ç”¨å¼ºä¸€è‡´æ€§çš„æ¨¡å‹ï¼Œå¯¹äºå·²ç»ACKçš„ç”¨æˆ·è¯·æ±‚ï¼Œè¦å°½åŠ›ä¿è¯å…¶çŠ¶æ€ä¸ä¸¢å¤±ã€‚&lt;/p>
&lt;blockquote>
&lt;p>å¦‚æœä½ é—®æˆ‘ï¼Œç°åœ¨æ¥ä¸€æ ¸å¼¹æŠŠæœºæˆ¿ç‚¸äº†ï¼Œæ•°æ®éƒ½ä¸¢äº†ï¼Œé‚£ä½ æ€ä¹ˆèƒ½ä¿è¯å¼ºä¸€è‡´æ€§ã€‚ &lt;br>
å…¶å®è¿™ä¸ªé—®é¢˜éå¸¸ç®€å•ã€‚å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬ä¿è¯äº†ä¸¢æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚&lt;/p>&lt;/blockquote>
&lt;p>æ‰€ä»¥æˆ‘ä»¬è¦é€‰å‡ºä¸€ä¸ªLeaderï¼Œä½¿å…¶èƒ½å¤ŸåŒ…å«æ‰€æœ‰å·²ç»ACKçš„ææ¡ˆã€‚å½“ä¸€ä¸ªproposerå‘å…¶å®ƒèŠ‚ç‚¹å‘é€ææ¡ˆæ—¶ï¼Œå°±ä¼šæ”¶åˆ°å…¶å®ƒèŠ‚ç‚¹çš„å“åº”ã€‚å› ä¸ºä¸€ä¸ªå·²ç»ACKçš„ææ¡ˆå¿…ç„¶è¢«å¤šæ•°èŠ‚ç‚¹æ‰€è®¤å¯ï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªproposeræ²¡æœ‰åŒ…å«æ‰€æœ‰è¢«ACKçš„ææ¡ˆæ—¶ï¼Œå®ƒçš„ææ¡ˆå°±ä¼šè¢«å…¶å®ƒåŒ…å«æ›´å¤šçŠ¶æ€çš„èŠ‚ç‚¹é©³å›ã€‚æœ€åè¢«é€‰å‡ºæ¥çš„Leaderï¼Œä¸€å®šæ˜¯åŒ…å«æ‰€æœ‰è¢«ACKçš„çŠ¶æ€çš„èŠ‚ç‚¹ã€‚&lt;/p>
&lt;h3 id="æ—¥å¿—å¤åˆ¶">æ—¥å¿—å¤åˆ¶ &lt;a href="#%e6%97%a5%e5%bf%97%e5%a4%8d%e5%88%b6" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>å½“Leaderè¢«é€‰å‡ºåï¼ŒLeaderå°±ä¼šå¼€å§‹å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ã€‚ç”¨æˆ·çš„è¯·æ±‚å¯ä»¥çœ‹åšä¸€ç³»åˆ—çš„å‘½ä»¤ï¼Œåœ¨æ¥æ”¶åˆ°ææ¡ˆåï¼Œææ¡ˆé¦–å…ˆè¢«åˆ†å‘åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹çš„çŠ¶æ€æœºé¡ºåºæ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚åœ¨å¤šæ•°èŠ‚ç‚¹è¿”å›ACKåï¼Œè¿™ä¸ªå‘½ä»¤å°±è¢«è§†ä¸ºâ€œå·²æäº¤â€ï¼ˆcommitedï¼‰ã€‚&lt;/p>
&lt;p>ä¸Šæ–‡ä¸­å·²ç»æåˆ°äº†ä¸€è‡´æ€§ç®—æ³•ä¸­çš„æ—¥å¿—éå¸¸ç±»ä¼¼äºç½‘ç»œåè®®ä¸­çš„TCPã€‚å³å¦‚æœä¸¤ä¸ªå‘½ä»¤çš„IDä¸€æ ·ï¼Œé‚£ä¹ˆå…¶å†…å®¹å¿…å®šä¹Ÿä¸€æ ·ï¼›å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½æœ‰è®¤å¯äº†ç¼–å·ä¸ºpçš„å‘½ä»¤ï¼Œé‚£ä¹ˆæ‰€æœ‰ç¼–å·å°äºpçš„å‘½ä»¤ä¹Ÿå¿…å®šä¿æŒä¸€è‡´ã€‚ï¼ˆè¢«ç§°ä¸ºLog Matching Propertyï¼‰&lt;/p>
&lt;p>Raftä¸ºäº†ç®€åŒ–ç®—æ³•çš„å·¥ç¨‹å®ç°ï¼ŒæŠŠèŠ‚ç‚¹çš„çŠ¶æ€æŠ½è±¡ä¸ºä¸¥æ ¼append onlyçš„æ—¥å¿—ã€‚å³æˆ‘ä»¬å¯ä»¥å°†æ—¥å¿—æŒ‡é’ˆå‘åæˆ–å‘å‰ç§»åŠ¨ï¼Œæ¥â€œå›æ»šâ€æˆ–â€œæ›´æ–°â€çŠ¶æ€ã€‚ä½†æ˜¯ç»å¯¹ä¸å…è®¸åœ¨æ—¥å¿—ä¸­é—´æ·»åŠ æˆ–åˆ é™¤æ—¥å¿—æ¡ç›®ã€‚æ‰€ä»¥ï¼Œåœ¨Leaderå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚æœleaderå’Œå…¶ä»–followerä¹‹é—´çš„æ—¥å¿—ä¸åŒï¼Œé‚£ä¹ˆfolloweréœ€è¦å›æ»šæ—¥å¿—ä»¥ä¿æŒå’Œleaderæ—¥å¿—çš„ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;h3 id="å®‰å…¨æ€§">å®‰å…¨æ€§ &lt;a href="#%e5%ae%89%e5%85%a8%e6%80%a7" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;h4 id="ä¸å½’æˆ‘ç®¡çš„äº‹æˆ‘ä¸æ‹¿ä¸»æ„">ä¸å½’æˆ‘ç®¡çš„äº‹æˆ‘ä¸æ‹¿ä¸»æ„ &lt;a href="#%e4%b8%8d%e5%bd%92%e6%88%91%e7%ae%a1%e7%9a%84%e4%ba%8b%e6%88%91%e4%b8%8d%e6%8b%bf%e4%b8%bb%e6%84%8f" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>å‰æ–‡æˆ‘ä»¬è¯´åˆ°ï¼Œä¸€ä¸ªèŠ‚ç‚¹è¦æˆä¸ºLeaderï¼Œä¸€å®šè¦æ‹¥æœ‰æ‰€æœ‰å·²ç»è¢«ACKçš„çŠ¶æ€ï¼Œå¦åˆ™å°±ä¼šè¢«å…¶å®ƒèŠ‚ç‚¹é©³å›ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ç°å®éƒ½ä¼šå‡ºç°ä¸€äº›å°å°çš„æ„å¤–ã€‚åœ¨ç³»ç»Ÿçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ‰ä¸€äº›ææ¡ˆåªè¢«å°‘æ•°èŠ‚ç‚¹è®¤å¯ï¼Œä¸æ­¤åŒæ—¶å‘èµ·ææ¡ˆçš„Leaderæ„å¤–é€€å‡ºã€‚é‚£ä¹ˆåœ¨ä¸åŒèŠ‚ç‚¹ä¸Šçš„æ—¥å¿—ä¼šäº§ç”Ÿâ€œåˆ†å‰â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³æ—¥å¿—å½“ä¸­çš„å†²çªå‘¢ï¼Ÿ&lt;/p>
&lt;p>å¾ˆæ˜æ˜¾ï¼Œå› ä¸ºè¿™äº›ä»¥å°‘æ•°èŠ‚ç‚¹è®¤å¯çš„ææ¡ˆå¹¶æ²¡æœ‰è¢«ç¡®è®¤ã€‚æ‰€ä»¥æˆ‘ä»¬æ— è®ºæ˜¯æ¥å—ææ¡ˆè¿˜æ˜¯é©³å›ææ¡ˆï¼Œéƒ½ä¸å½±å“æˆ‘ä»¬å¼ºä¸€è‡´æ€§çš„è¦æ±‚ã€‚æ‰€ä»¥å…³é”®æ˜¯å¤„ç†å†²çªï¼Œä½¿å…¶ä¸äº§ç”Ÿå½±å“ç³»ç»Ÿä¸€è‡´æ€§çš„åæ•ˆã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/Wizmann/assets/master/wizmann-pic/18-12-02/Snipaste_2018-12-02_17-34-59.png" alt="">&lt;/p>
&lt;p>å‡è®¾åœ¨Term1ï¼Œæœ€åä¸€ä¸ªææ¡ˆæ˜¯&amp;quot;Value:3&amp;quot;ï¼Œè¿™ä¸ªææ¡ˆå¹¶æ²¡æœ‰å¾—åˆ°å¤šæ•°èŠ‚ç‚¹çš„è®¤å¯ï¼ŒLeaderå°±æŒ‚æ‰äº†ã€‚é€‰å‡ºæ¥äº†ä¸€ä¸ªæ–°Leaderï¼ŒTermæ•°åŠ 1ã€‚åœ¨Term2ï¼Œè¢«æå‡ºçš„ç¬¬ä¸€ä¸ªææ¡ˆæ˜¯&amp;quot;Value:1&amp;quot;ï¼Œè¿™ä¸ªææ¡ˆä¹Ÿæ²¡æœ‰å¾—åˆ°å¤šæ•°èŠ‚ç‚¹çš„è®¤å¯ï¼ŒLeaderä¹ŸæŒ‚æ‰äº†ã€‚&lt;/p>
&lt;p>å› ä¸ºè¿™ä¸¤ä¸ªåˆ†å‰çš„ææ¡ˆéƒ½æ²¡æœ‰å¾—åˆ°å¤šæ•°èŠ‚ç‚¹çš„è®¤å¯ï¼Œæ‰€ä»¥ä¸‹ä¸€ä¸ªLeaderå¯èƒ½å·²ç»ç¡®è®¤è¿™ä¸¤ä¸ªææ¡ˆï¼Œæˆ–è€…ä¸¤ä¸ªä¸­çš„ä¸€ä¸ªï¼Œä¹Ÿå¯èƒ½ä¸€ä¸ªéƒ½æ²¡æœ‰ç¡®è®¤ã€‚æ–°çš„Leaderåœ¨è¢«é€‰å‡ºåï¼Œéœ€è¦é¢å¯¹çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•å¤„ç†å±äºæ—§Termçš„ææ¡ˆã€‚&lt;/p>
&lt;p>è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š&lt;/p>
&lt;ol>
&lt;li>æ–°Leaderå°†æ—¥å¿—ä¸­ä»æ²¡æœ‰è¢«å¤šæ•°èŠ‚ç‚¹è®¤å¯çš„ææ¡ˆé‡æ–°æå‡ºï¼Œç›´åˆ°è¢«å¤šæ•°èŠ‚ç‚¹è®¤å¯ä¸ºæ­¢&lt;/li>
&lt;li>æ–°Leaderå¿½ç•¥å±äºæ—§çš„Termçš„ææ¡ˆï¼Œåªæäº¤å±äºæœ¬Termçš„ææ¡ˆï¼›å¯¹äºæ—¥å¿—å†²çªï¼Œä½¿ç”¨å¤åˆ¶æ—¥å¿—çš„æ–¹æ³•è§£å†³ï¼Œä½†ä¸ä¼šæ˜¾å¼è®¤å¯æ—§Termçš„ææ¡ˆã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://raw.githubusercontent.com/Wizmann/assets/master/wizmann-pic/18-12-02/Snipaste_2018-12-02_22-02-45.png" alt="">&lt;/p>
&lt;p>å¯¹äºæ–¹æ¡ˆ1ï¼Œæœ‰ä¸€ä¸ªéšå«çš„é—®é¢˜ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨æ—¶é—´ç‚¹1ï¼ŒS2ä¸ºLeaderï¼Œæ ‡çº¢çš„ä¸¤ä¸ªææ¡ˆå¹¶æ²¡æœ‰è¢«ç¡®è®¤ã€‚æ­¤æ—¶å¦‚æœLeaderåœ¨æ—¶é—´ç‚¹2é‡æ–°æå‡º&amp;quot;Term1/Value3&amp;quot;ï¼Œå¹¶ä¸”å¾—åˆ°äº†S1å’ŒS2çš„è®¤å¯ï¼Œé‚£ä¹ˆè¿™æ¡ææ¡ˆå·²ç»è¢«å¤šæ•°èŠ‚ç‚¹è®¤å¯ã€‚ä½†æ˜¯åœ¨æ—¶é—´ç‚¹3ï¼ŒS3è¢«é€‰ä¸¾ä¸ºäº†Leaderã€‚S1å’ŒS2éœ€è¦å›æ»šæ—¥å¿—ä»¥ä¿æŒä¸S3æ—¥å¿—çš„ä¸€è‡´ã€‚æ­¤æ—¶å°±å‡ºç°äº†ä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯å·²ç»è¢«ç¡®è®¤çš„æ—¥å¿—è¢«å›æ»šæ‰äº†ï¼Œå¼ºä¸€è‡´æ€§å°±ä¸èƒ½æ»¡è¶³äº†ã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/Wizmann/assets/master/wizmann-pic/18-12-02/Snipaste_2018-12-02_22-12-50.png" alt="">&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬é‡‡ç”¨æ–¹æ¡ˆ2ï¼Œé‚£ä¹ˆè¢«é€‰å‡ºçš„æ–°Leaderæå‡ºçš„ç¬¬ä¸€ä¸ªææ¡ˆçš„Termä¸€å®šä¸º3ã€‚ç¡®è®¤æ–°ææ¡ˆçš„èŠ‚ç‚¹æ¥ä¸‹æ¥ä¼šå¤åˆ¶Leaderçš„æ—¥å¿—ï¼Œå›æ»šæ‰æ²¡æœ‰è¢«è®¤å¯çš„ææ¡ˆ&amp;quot;Term2/Value1&amp;quot;ã€‚å¯¹äºæ ‡ç»¿çš„&amp;quot;Term1/Value3&amp;quot;ï¼Œè™½ç„¶è¢«å¤åˆ¶åˆ°äº†å…¶å®ƒçš„èŠ‚ç‚¹ä¸Šï¼Œä½†æ˜¯è¿™ä¸ªå€¼å¹¶ä¸ä¼šè¢«ç¡®è®¤ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬æ—¢ä¿è¯äº†å·²ç»è¢«ç¡®è®¤çš„ææ¡ˆä¸ä¼šè¢«å›æ»šï¼Œåˆä¿è¯äº†æ—¥å¿—çš„ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;p>åœ¨å…·ä½“å®ç°ä¸­ï¼Œâ€œT3/V1â€å¾€å¾€æ˜¯ä¸€ä¸ªç©ºå‘½ä»¤(no-op)ã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿æ²¡æœ‰å†™è¯·æ±‚ï¼ŒLeaderå°±å¯ä»¥æ›´å¿«çš„ç¡®è®¤æ–°çš„ä»»æœŸå¹¶åŒæ­¥Logäº†ã€‚&lt;/p>
&lt;h4 id="å¦‚ä½•è¯æ˜">å¦‚ä½•è¯æ˜ &lt;a href="#%e5%a6%82%e4%bd%95%e8%af%81%e6%98%8e" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>é‚£ä¹ˆæ€ä¹ˆä¿è¯ä¸Šé¢çš„ä½œæ³•å®ƒæ˜¯æ­£ç¡®çš„å‘¢ï¼Ÿ&lt;/p>
&lt;p>å‡è®¾å½“å‰ä»»æœŸä¸ºT1ï¼Œæ­¤æ—¶ç”±äºç³»ç»Ÿæ•…éšœï¼Œæˆ‘ä»¬é€‰å‡ºäº†æ–°çš„Leader - S2ï¼Œå¹¶è®°Termä¸ºT2ã€‚å› ä¸ºæˆ‘ä»¬ä¸¥æ ¼éµå®ˆäº†Log Matching Propertyã€‚&lt;/p>
&lt;p>é‚£ä¹ˆï¼Œå¯¹äºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š&lt;/p>
&lt;ol>
&lt;li>T2çš„Leaderå’ŒVoterçš„Logä¸­æœ€åä¸€ä¸ªææ¡ˆçš„ç¼–å·æ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“ä»–ä»¬æ—¥å¿—ä¸­çš„ææ¡ˆéƒ½æ˜¯å®Œå…¨ä¸€è‡´çš„&lt;/li>
&lt;li>T2ä¸­Leaderçš„Logæ¯”Voteræ›´æ–°ï¼Œé‚£ä¹ˆLeaderä¸€å®šåŒ…å«æ¯”Voteræ›´å¤šçš„ææ¡ˆï¼›å¦åˆ™Voterå°±ä¸ä¼šç»™LeaderæŠ•ç¥¨&lt;/li>
&lt;/ol>
&lt;p>æˆ‘ä»¬éƒ½å¯ä»¥è¯æ˜ï¼Œå¯¹äºå‰ä¸€ä¸ªTermå·²ç»è¢«ç¡®è®¤çš„ææ¡ˆï¼Œä¸€å®šä¼šè¢«åŒ…å«åœ¨åä¸€ä¸ªTermçš„æ—¥å¿—ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªè¢«ç¡®è®¤çš„ææ¡ˆä¸ä¼šä¸­é€”ä¸¢å¤±ã€‚&lt;/p>
&lt;h2 id="æˆå‘˜å˜åŒ–">æˆå‘˜å˜åŒ– &lt;a href="#%e6%88%90%e5%91%98%e5%8f%98%e5%8c%96" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>ä»¥ä¸Šæˆ‘ä»¬çš„è®¨è®ºéƒ½åŸºäºç³»ç»Ÿçš„èŠ‚ç‚¹ä¸ä¼šå‘ç”Ÿå˜æ›´ï¼Œä½†æ˜¯åœ¨ç°å®å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¾ˆéš¾å¯¹æ­¤è¿›è¡Œä»»ä½•ä¿è¯ã€‚æ‰€ä»¥ä¸€ä¸ªå®ç”¨çš„ç³»ç»Ÿï¼Œä¸€å®šèƒ½è§£å†³æˆå‘˜å˜åŒ–çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>æˆå‘˜å˜åŒ–é—®é¢˜çš„æœ¬è´¨æ˜¯ç³»ç»Ÿä¸­ä¸èƒ½åŒæ—¶å‡ºç°ä¸¤ä¸ªLeaderã€‚&lt;/p>
&lt;p>åœ¨Raftä¸­ï¼Œæˆ‘ä»¬å°†è¿‡æ¸¡æœŸçš„é…ç½®ç§°ä¸ºâ€œå…±åŒä¸€è‡´â€ï¼ˆjoint consensusï¼‰ï¼Œä¸€ä½†å®ƒè¢«ç¡®è®¤ï¼Œè¯´æ˜ç³»ç»Ÿå·²ç»è¿‡æ¸¡åˆ°äº†æ–°çš„æˆå‘˜é…ç½®ã€‚&lt;/p>
&lt;p>å…·ä½“çš„ç­–ç•¥å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>ç³»ç»Ÿä¸­åªæœ‰æ—§çš„é…ç½®C_oldï¼Œæ–°åŠ å…¥çš„æˆå‘˜ä¸å¯èƒ½æˆä¸ºLeader&lt;/li>
&lt;li>å½“å‰ç³»ç»Ÿçš„Leaderæ¥å—åˆ°æ–°çš„é…ç½®C_newã€‚ç„¶åLeaderå‘æ‰€æœ‰èŠ‚ç‚¹å‘èµ·ä¿®æ”¹é…ç½®ä¸ºC_old+newçš„ææ¡ˆã€‚&lt;/li>
&lt;li>å³ä½¿è¿™ä¸ªæ—¶é—´ç‚¹LeaderæŒ‚æ‰äº†ï¼Œæ–°çš„Leaderä¹Ÿåªä¼šæ‹¥æœ‰æ—§é…ç½®C_oldæˆ–è€…è¿‡æ¸¡æœŸé…ç½®C_old+newã€‚è¿™å–å†³äºLeaderé€‰ä¸¾çš„æ—¶æœºï¼ˆå’Œè¿æ°”ï¼‰ã€‚&lt;/li>
&lt;li>å½“è¿‡æ¸¡æœŸé…ç½®C_old+newè¢«å¤šæ•°èŠ‚ç‚¹ç¡®è®¤åï¼ŒLeaderå‘æ‰€æœ‰èŠ‚ç‚¹å‘èµ·ä¿®æ”¹é…ç½®ä¸ºC_newçš„ææ¡ˆã€‚&lt;/li>
&lt;li>å¦‚æœè¿™ä¸ªæ—¶é—´ç‚¹LeaderæŒ‚æ‰äº†ï¼Œæ–°Leaderä¼šä»æ‹¥æœ‰C_old+newå’ŒC_newçš„èŠ‚ç‚¹ä¸­é€‰å‡ºã€‚æ–°çš„Leaderä»ç„¶å¯ä»¥è¿›è¡Œé…ç½®çš„å˜æ›´ï¼Œè€Œä¸å½±å“æ•´ä¸ªç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚&lt;/li>
&lt;li>ç›´åˆ°C_newè¢«ç¡®è®¤ï¼Œé…ç½®æ›´æ¢å®£å‘Šå®Œæˆã€‚&lt;/li>
&lt;/ol>
&lt;p>â€œå…±åŒä¸€è‡´â€å…è®¸èŠ‚ç‚¹æ— éœ€è€ƒè™‘å®‰å…¨æ€§çš„æƒ…å†µä¸‹ï¼Œåœ¨ä»»æ„æ—¶é—´è¿›è¡Œé…ç½®çš„æ›´æ¢ã€‚é…ç½®çš„æ›´æ¢ä¹Ÿä¸ä¼šå½±å“å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚&lt;/p>
&lt;p>ä»¥ä¸Šæˆ‘ä»¬è§£å†³çš„æ˜¯å®‰å…¨æ€§é—®é¢˜ï¼Œä½†æ˜¯åœ¨å®é™…å·¥ç¨‹ä¸­æˆ‘ä»¬è¿˜éœ€è¦å…¼é¡¾æ•ˆç‡é—®é¢˜ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚æ–°åŠ å…¥çš„èŠ‚ç‚¹å¯ä»¥è§†ä½œâ€œnon-voting membersâ€ï¼ŒåªåŒæ­¥æ•°æ®ï¼Œä¸èƒ½å¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨ã€‚ç›´åˆ°æ•°æ®åŒæ­¥åŸºæœ¬å®Œæˆï¼Œæ‰è¿›è¡Œé…ç½®å˜æ›´ã€‚è¿™æ ·é¿å…äº†æ–°çš„èŠ‚ç‚¹ç”±äºç¼ºå°‘Logä¸èƒ½åŠæ—¶çš„å¤„ç†ææ¡ˆã€‚&lt;/p>
&lt;p>åˆå¦‚æ–°çš„æˆå‘˜åˆ—è¡¨ä¸­ï¼Œä¸åŒ…å«åŸå…ˆçš„LeaderèŠ‚ç‚¹ã€‚åœ¨æ—§Leaderè®¤å¯äº†æ–°çš„é…ç½®ææ¡ˆä¹‹åï¼Œå°±å¯ä»¥é€€ä½è®©è´¤ï¼Œè®©å…¶å®ƒèŠ‚ç‚¹é€‰ä¸¾å‡ºæ–°çš„Leaderã€‚&lt;/p>
&lt;p>ä»¥åŠè¢«æ¸…é™¤å‡ºæˆå‘˜åˆ—è¡¨çš„èŠ‚ç‚¹ï¼Œä¸ä¼šæ”¶åˆ°åç»­çš„å¿ƒè·³ï¼Œå®ƒä»¬ä¼šè®¤ä¸ºLeaderå·²ç»å¤±æ•ˆï¼Œæ‰€ä»¥è‡ªå·±è·³å‡ºæ¥ç«é€‰Leaderã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±ä¼šè§¦å‘æ–°çš„ï¼ˆæ— æ„ä¹‰ çš„ï¼‰Leaderé€‰ä¸¾ï¼Œå½±å“ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…æ”¶åˆ°äº†Leaderçš„å¿ƒè·³ï¼Œé‚£ä¹ˆå°±ä¼šå¿½ç•¥Leaderçš„ç«é€‰è¯·æ±‚ã€‚è¿™æ ·æ—¢ä¸ä¼šå½±å“æ­£å¸¸çš„é€‰ä¸¾ï¼Œåˆå¯ä»¥å±è”½æ— æ•ˆçš„é€‰ä¸¾è¯·æ±‚ã€‚&lt;/p>
&lt;h2 id="å¿«ç…§">å¿«ç…§ &lt;a href="#%e5%bf%ab%e7%85%a7" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>æˆ‘ä»¬çš„ææ¡ˆè¶Šæ¥è¶Šå¤šï¼Œæ—¥å¿—ä¹Ÿè¶Šæ¥è¶Šé•¿ã€‚éšä¹‹è€Œæ¥çš„æ˜¯æ¼«é•¿çš„æ¢å¤æ—¶é—´ä»¥åŠç£ç›˜ç©ºé—´çš„æµªè´¹ã€‚å¿«ç…§æŠ€æœ¯å¯ä»¥å¸®æˆ‘ä»¬æ¸…é™¤æ—§çš„æ— ç”¨æ—¥å¿—ï¼Œåªä¿ç•™æœ‰ç”¨çš„çŠ¶æ€ä¿¡æ¯ã€‚&lt;/p>
&lt;p>åœ¨Raftç®—æ³•ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½è‡ªä¸»çš„ç”Ÿæˆå¿«ç…§ã€‚å¥½å¤„æ˜¯é¿å…Leaderåˆ†å‘å¿«ç…§é€ æˆçš„æ•ˆç‡é™ä½ï¼Œä¹Ÿç®€åŒ–äº†Leaderçš„åŠŸèƒ½å’ŒèŒè´£ã€‚åˆç”±äºæ—¥å¿—çš„â€œTCPç‰¹æ€§â€ï¼Œæ‰€ä»¥ä¸åŒèŠ‚ç‚¹ä¸Šï¼Œåªè¦ä¿è¯ææ¡ˆç¼–å·ä¸€è‡´ï¼Œé‚£ä¹ˆå…¶å†…å®¹å°±å¯ä»¥ä¿è¯ä¸€è‡´ã€‚&lt;/p>
&lt;h2 id="å®¢æˆ·ç«¯äº¤äº’">å®¢æˆ·ç«¯äº¤äº’ &lt;a href="#%e5%ae%a2%e6%88%b7%e7%ab%af%e4%ba%a4%e4%ba%92" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>ç”±äºå®¢æˆ·ç«¯ä¸äº†è§£ç³»ç»Ÿå†…éƒ¨çš„é€‰ä¸¾æƒ…å†µï¼Œæ‰€ä»¥åœ¨å¼€å§‹é€šä¿¡æ—¶ï¼Œä¼šéšæœºé€‰ä¸€å°èŠ‚ç‚¹å‘é€è¯·æ±‚ã€‚å¦‚æœè¿™ä¸ªèŠ‚ç‚¹ä¸æ˜¯Leaderï¼Œå°±ä¼šæ‹’ç»è¿™ä¸ªè¯·æ±‚ï¼Œä¼šå‘ŠçŸ¥å®¢æˆ·ç«¯å“ªä¸ªèŠ‚ç‚¹æ˜¯å½“å‰ä»»æœŸçš„Leaderã€‚å¦‚æœLeaderå¤±æ•ˆï¼Œå®¢æˆ·ç«¯è¯·æ±‚è¶…æ—¶ï¼Œå°±ä¼šé‡æ–°éšæœºé€‰æ‹©èŠ‚ç‚¹ï¼Œè·å–æ–°ä»»Leaderä¿¡æ¯ã€‚&lt;/p>
&lt;p>å¯¹äºå®¢æˆ·ç«¯å‘é€çš„å†™è¯·æ±‚ï¼ŒLeaderéœ€è¦è®°å½•å…¶å”¯ä¸€çš„è¯·æ±‚IDï¼Œä»¥é¿å…å®¢æˆ·ç«¯å‘é€çš„é‡å¤è¯·æ±‚ã€‚&lt;/p>
&lt;p>å¯¹äºå®¢æˆ·ç«¯å‘é€çš„è¯»è¯·æ±‚ï¼ŒLeaderéœ€è¦å†æ¬¡ç¡®è®¤å®ƒæ˜¯ä»æ˜¯å½“å‰ä»»æœŸçš„Leaderï¼Œé¿å…å‘å®¢æˆ·ç«¯å‘é€è¿‡æœŸæ•°æ®ã€‚å¦‚æœå¯¹æ•°æ®æ­£ç¡®æ€§å’Œæ—¶æ•ˆæ€§çš„æ•æ„Ÿæ€§ä¸é«˜ï¼Œå°±å¯ä»¥å‘ç³»ç»Ÿä¸­çš„ä»»æ„èŠ‚ç‚¹å‘é€è¯·æ±‚ï¼Œ&lt;/p>
&lt;h2 id="å†™åœ¨åé¢">å†™åœ¨åé¢ &lt;a href="#%e5%86%99%e5%9c%a8%e5%90%8e%e9%9d%a2" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>Paxosçš„äº®ç‚¹åœ¨äºæŠŠå¤æ‚çš„ä¸œè¥¿è¯´ç®€å•äº†ã€‚è€ŒRaftçš„äº®ç‚¹æ˜¯æŠŠç®€å•çš„ä¸œè¥¿å…·ä½“åŒ–ï¼Œä½¿ä¹‹æˆä¸ºèƒ½è½åœ°çš„å·¥ç¨‹é¡¹ç›®ã€‚&lt;/p>
&lt;p>ä½†æ˜¯Paxosåšä¸ºä¸€ç§Quorumåè®®ï¼ˆä¿—ç§°P2Pï¼‰ï¼Œå…¶å·¥ç¨‹å¤æ‚æ€§æ˜¯éš¾ä»¥é¿å…çš„ã€‚Raftåœ¨Paxosåè®®ä¸Šé¢åŠ å…¥äº†å¾ˆå¤šé™åˆ¶ä»¥ç®€åŒ–å®ç°ï¼Œä½†æ˜¯æƒ³è¦å®Œæ•´çš„å®ç°å…¶åŠŸèƒ½ä»ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ã€‚ï¼ˆæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥&lt;a href="https://pdos.csail.mit.edu/6.824/labs/lab-raft.html">æŒ‘æˆ˜ä¸€ä¸‹è‡ªå·±&lt;/a>ï¼‰&lt;/p>
&lt;p>ä¸‹é¢ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä¼šæ¢ä¸€ç§æ–°æ€è·¯ï¼Œå­¦ä¹ PecificAç®—æ³•ï¼Œçœ‹ä¸€çœ‹å¦‚ä½•ä½¿ç”¨Paxoså®ç°ä¸€ä¸ªä¸»ä»å¤åˆ¶åè®®ã€‚&lt;/p>
&lt;h2 id="å†™åœ¨æ›´åé¢">å†™åœ¨æ›´åé¢ &lt;a href="#%e5%86%99%e5%9c%a8%e6%9b%b4%e5%90%8e%e9%9d%a2" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>ä¸ªäººè§‰å¾—ï¼ŒRaftè®ºæ–‡çš„ä¸€ä¸ªæ›´å¤§äº®ç‚¹æ˜¯å……åˆ†çš„æ€è€ƒäº†Paxos/Multi-Paxosåœ¨å·¥ç¨‹å®è·µä¸Šçš„ç¼ºé™·ã€‚æ€è€ƒå¹¶æå‡ºæœ‰ä»·å€¼çš„è´¨ç–‘ï¼Œè€Œä¸æ˜¯è¢«ä»–äººçš„è§‚ç‚¹å¸¦ç€èµ°ï¼ŒçœŸçš„æ˜¯æœ€é‡è¦çš„èƒ½åŠ›ä¹‹ä¸€äº†ã€‚&lt;/p>
&lt;p>å¤§èƒ†çŒœæµ‹æ˜¯å› ä¸ºæœ‰è¶³å¤Ÿçš„ç†è§£èƒ½åŠ›ï¼Œæœ‰é¢å¤–çš„å¸¦å®½å»å‘é—®ï¼Ÿè¿™æ˜¯ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜ã€‚&lt;/p></description></item><item><title>ç™½è¯ä¸€è‡´æ€§åè®® - Paxosã€Raftå’ŒPacificA[0]</title><link>https://wizmann.top/posts/paxos-raft-pecifaca0/</link><pubDate>Sun, 25 Nov 2018 00:00:00 +0000</pubDate><guid>https://wizmann.top/posts/paxos-raft-pecifaca0/</guid><description>&lt;h2 id="ä¸€è‡´æ€§åè®®---paxos">ä¸€è‡´æ€§åè®® - Paxos &lt;a href="#%e4%b8%80%e8%87%b4%e6%80%a7%e5%8d%8f%e8%ae%ae---paxos" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå½“ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦ä¿æŒèŠ‚ç‚¹ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è®©ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹ç›¸äº’åè°ƒé€šåŠ›åˆä½œï¼Œæœ‰å¯èƒ½çš„è®©ç³»ç»Ÿæ­£ç¡®çš„å·¥ä½œã€‚ä½†æ˜¯ï¼Œç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿæœ¬èº«çš„ç‰¹æ€§ï¼Œéœ€è¦æˆ‘ä»¬åœ¨ä¸å¯é çš„ç¡¬ä»¶ä¸Šå°½å¯èƒ½çš„æ„å»ºå¯é çš„ç³»ç»Ÿã€‚æ‰€ä»¥ï¼Œçœ‹ä¼¼ç®€å•çš„ä¸€è‡´æ€§é—®é¢˜æˆä¸ºäº†åˆ†å¸ƒå¼ç³»ç»Ÿé¢†åŸŸçš„ä¸€ä¸ªé‡è¦çš„è¯¾é¢˜ã€‚&lt;/p>
&lt;p>Paxosç®—æ³•æ˜¯Leslie Lamportäº1990å¹´æå‡ºçš„ä¸€ç§ä¸€è‡´æ€§ç®—æ³•ã€‚ä¹Ÿæ˜¯ç›®å‰å…¬è®¤è§£å†³åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜æœ€æœ‰æ•ˆçš„ç®—æ³•ä¹‹ä¸€ã€‚&lt;/p>
&lt;p>Paxosç®—æ³•çš„ç›®æ ‡æ˜¯åœ¨ä¸€ä¸ªä¸å¯é çš„åˆ†å¸ƒå¼ç³»ç»Ÿå†…ï¼Œåªé€šè¿‡ç½‘ç»œé€šä¿¡ï¼Œèƒ½å¤Ÿå¿«é€Ÿä¸”æ­£ç¡®åœ°åœ¨é›†ç¾¤å†…éƒ¨å¯¹æŸä¸ªæ•°æ®çš„å€¼è¾¾æˆä¸€è‡´ã€‚å¹¶ä¸”ä¿è¯ä¸è®ºå‘ç”Ÿä»»ä½•å¼‚å¸¸ï¼Œéƒ½ä¸ä¼šç ´åç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;h2 id="paxosç®—æ³•">Paxosç®—æ³• &lt;a href="#paxos%e7%ae%97%e6%b3%95" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;h3 id="å¦ä¸€ç§ç®€åŒ–äº†çš„å½¢è±¡çš„é—®é¢˜æè¿°---ä¹°è½¦ä½">å¦ä¸€ç§ï¼ˆç®€åŒ–äº†çš„ï¼‰å½¢è±¡çš„é—®é¢˜æè¿° - ä¹°è½¦ä½ &lt;a href="#%e5%8f%a6%e4%b8%80%e7%a7%8d%e7%ae%80%e5%8c%96%e4%ba%86%e7%9a%84%e5%bd%a2%e8%b1%a1%e7%9a%84%e9%97%ae%e9%a2%98%e6%8f%8f%e8%bf%b0---%e4%b9%b0%e8%bd%a6%e4%bd%8d" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>æŸå°åŒºçš„ä¸€äº›å±…æ°‘åœ¨æŠ¢è½¦ä½ï¼Œè€Œè½¦ä½åªæœ‰ä¸€ä¸ªã€‚å±…æ°‘ä»¬è¾¾æˆåè®®ï¼Œåªè¦ä¸€ä¸ªæŠ¥ä»·è·å¾—åŠæ•°ä»¥ä¸Šå±…æ°‘è®¤å¯ï¼Œé‚£ä¹ˆæå‡ºè¿™ä¸ªå‡ºä»·çš„å±…æ°‘åˆ™è·å¾—äº†è½¦ä½çš„æ‰€æœ‰æƒã€‚&lt;/p>
&lt;p>å±…æ°‘ä¹‹é—´éå¸¸å‹å–„ï¼Œå¦‚æœçŸ¥é“äº†è½¦ä½å·²ç»æœ‰äº†ä¹°å®¶ï¼Œå°±ä¸ä¼šç»§ç»­å‡ºä»·è´­ä¹°ï¼Œå¹¶ä¸”ä¼šå¸®å¿™ä¼ æ’­è¿™ä¸ªä¿¡æ¯ã€‚&lt;/p>
&lt;p>å±…æ°‘ä»¬éƒ½æ˜¯éµçºªå®ˆæ³•çš„å¥½å…¬æ°‘ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­éƒ½åªä¼šå¦‚å®çš„ä¸å…¶å®ƒç”¨æˆ·åˆ†äº«ä¿¡æ¯ã€‚ä¿¡æ¯çš„åˆ†äº«æ˜¯åœ¨ç½‘ä¸Šï¼Œé€šè¿‡ä¸€å¯¹ä¸€çš„ç§å¯†èŠå¤©è¿›è¡Œã€‚ä½†æ˜¯å°åŒºçš„æ‰‹æœºä¿¡å·éå¸¸å·®ï¼Œæˆ‘ä»¬ä¸èƒ½ä¿è¯é€šä¿¡çš„è´¨é‡ï¼Œä¸€äº›ä¿¡æ¯å¯èƒ½ä¼šä¸¢å¤±ã€‚ä½†æ˜¯å±…æ°‘ä¸ä¼šæ‰çº¿ã€‚ä¹Ÿä¸ä¼šå¤±å»è®°å¿†ï¼Œå¹¶ä¸”é€šä¿¡çš„å†…å®¹æ˜¯å®Œæ•´çš„ï¼Œä¸ä¼šè¢«ç¯¡æ”¹çš„ã€‚&lt;/p>
&lt;p>åˆ’é‡ç‚¹ï¼š&lt;/p>
&lt;ol>
&lt;li>éœ€è¦åŠæ•°ä»¥ä¸Šå±…æ°‘çš„è®¤å¯ï¼Œæ‰èƒ½å£°ç§°æ‹¥æœ‰è½¦ä½ã€‚è¿™ä¸ªå±…æ°‘è¢«ç§°ä¸ºè½¦ä½çš„â€œå…¬è®¤æ‹¥æœ‰è€…â€&lt;/li>
&lt;li>è½¦ä½æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥ä¸€ä¸ªè½¦ä½ä¸èƒ½åŒæ—¶æœ‰ä¸¤ä¸ªâ€œå…¬è®¤æ‹¥æœ‰è€…â€&lt;/li>
&lt;li>è½¦ä½å¯ä»¥æš‚æ—¶æ²¡æœ‰æ‹¥æœ‰è€…ï¼Œä½†æ˜¯éœ€è¦å°½å¿«é€‰å‡ºä¸€ä¸ª&lt;/li>
&lt;li>é€šä¿¡æ˜¯ä¸å¯é çš„(not-reliable)ï¼Œä½†æ˜¯æ­£ç¡®æ€§(integrity)å’Œå¯æŒä¹…æ€§ï¼ˆdurabilityï¼‰æ˜¯å¯ä»¥ä¿è¯çš„&lt;/li>
&lt;li>æ•´ä¸ªæµç¨‹çš„ç›®æ ‡æ˜¯ç¡®å®šè½¦ä½çš„æ‹¥æœ‰è€…ã€‚æµç¨‹çš„å‚ä¸è€…ä¸ä¼šä»¥è‡ªå·±æ‹¥æœ‰è½¦ä½ä¸ºæœ€ç»ˆç›®æ ‡&lt;/li>
&lt;/ol>
&lt;h3 id="å¦‚ä½•é€‰å‡ºæœ€ç»ˆçš„ä¹°å®¶">å¦‚ä½•é€‰å‡ºæœ€ç»ˆçš„ä¹°å®¶ &lt;a href="#%e5%a6%82%e4%bd%95%e9%80%89%e5%87%ba%e6%9c%80%e7%bb%88%e7%9a%84%e4%b9%b0%e5%ae%b6" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>ç”±äºé€šä¿¡æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œå¯¹äºæ‰€æœ‰å‚ä¸è€…æ¥è¯´ï¼Œä»–ä»¬å¯¹æ•´ä¸ªç³»ç»Ÿçš„äº†è§£éƒ½æ˜¯ç‰‡é¢çš„ã€è¿‡æ—¶çš„ã€‚ä½†æ˜¯å‚ä¸è€…ä¼šé€šè¿‡ä¸å…¶å®ƒå‚ä¸è€…è¿›è¡Œé€šä¿¡ï¼Œä¸æ–­è·å¾—æ›´åŠæ—¶çš„ä¿¡æ¯ï¼Œä»è€Œæœ€ç»ˆè¾¾æˆä¸€è‡´ã€‚&lt;/p>
&lt;p>å¯¹äºæ™®é€šå±…æ°‘ï¼Œä¼šè®°å½•â€œå·²çŸ¥æœ€é«˜æŠ¥ä»·â€å’Œâ€œå·²ç¡®è®¤æŠ¥ä»·â€ä¸¤ä¸ªçŠ¶æ€ã€‚ä¼šå¤„ç†ä¸¤ç§è¯·æ±‚ï¼š&lt;/p>
&lt;ol>
&lt;li>è¯¢ä»·ï¼šå¦‚æœå±…æ°‘å·²ç¡®è®¤äº†æŸä¸ªæŠ¥ä»·ï¼Œåˆ™è¿”å›è¿™ä¸ªæŠ¥ä»·ã€‚å¦åˆ™ä¼šå°è¯•æ›´æ–°å·²çŸ¥æœ€é«˜æŠ¥ä»·ï¼Œå¹¶æŠ¥å‘Šä¹°å®¶å½“å‰çš„æœ€é«˜æŠ¥ä»·&lt;/li>
&lt;li>æŠ¥ä»·ï¼šå±…æ°‘ä¼šå°†è¯·æ±‚ä¸­çš„æŠ¥ä»·ä¸è‡ªå·±å·²çŸ¥çš„æœ€é«˜æŠ¥ä»·è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœé«˜äºæˆ–ç­‰äºæœ¬åœ°å·²ç»æŠ¥ä»·ï¼Œæ— è®ºæ˜¯å¦å·²ç»æœ‰å·²ç¡®è®¤æŠ¥ä»·ï¼Œéƒ½ä¼šç¡®è®¤è¿™ä¸ªæŠ¥ä»·&lt;/li>
&lt;/ol>
&lt;p>è€Œå¯¹äºä¹°å®¶ï¼Œä¼šå‘å‡ºä¸¤ç§ä¸åŒçš„ä¿¡æ¯ï¼š&lt;/p>
&lt;ol>
&lt;li>è¯¢ä»·ï¼šä»¥æŸä¸€ä¸ªæŠ¥ä»·é—®è¯¢å¤šæ•°å±…æ°‘ï¼Œå¦‚æœæœ‰å·²ç¡®è®¤çš„æŠ¥ä»·ï¼Œåˆ™æ”¾å¼ƒè‡ªå·±çš„æŠ¥ä»·ã€‚å¦‚æœè¿™ä¸ªæŠ¥ä»·ä½äºå±…æ°‘å·²çŸ¥çš„æŠ¥ä»·ï¼Œåˆ™æé«˜æŠ¥ä»·ã€‚&lt;/li>
&lt;li>æŠ¥ä»·ï¼šå¦‚æœè¯¢ä»·è¿‡ç¨‹ä¸­æ”¶åˆ°äº†å·²ç¡®è®¤çš„æŠ¥ä»·ï¼Œåˆ™å¸®å¿™è½¬å‘è¿™ä¸ªæŠ¥ä»·ã€‚å¦åˆ™å‘é€è‡ªå·±çš„æŠ¥ä»·ï¼Œå¦‚æœæŠ¥ä»·è·å¾—äº†å¤šæ•°å±…æ°‘çš„è®¤å¯ï¼Œå³å¯ä»¥è®¤ä¸ºæ‰€æœ‰æƒå·²ç»æ›´æ–°&lt;/li>
&lt;/ol>
&lt;h3 id="ä¸€è‡´æ€§çš„ç›´è§‚è¯æ˜">ä¸€è‡´æ€§çš„ç›´è§‚è¯æ˜ &lt;a href="#%e4%b8%80%e8%87%b4%e6%80%a7%e7%9a%84%e7%9b%b4%e8%a7%82%e8%af%81%e6%98%8e" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>æŠ¥ä»·é˜¶æ®µï¼Œé™¤äº†ä¿è¯æ­£ç¡®æ€§ä¹‹å¤–ï¼Œå¯¹äºå±…æ°‘å’Œä¹°å®¶å¹¶æ²¡æœ‰ä»»ä½•çº¦æŸã€‚å…¶æœ¬è´¨å‚ä¸è€…ä¹‹é—´åŒæ­¥ä¿¡æ¯çš„è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>è€Œä¸€è‡´æ€§åœ¨æŠ¥ä»·é˜¶æ®µå¯ä»¥è¢«å¾ˆå¥½çš„ä¿è¯&lt;/p>
&lt;ul>
&lt;li>å¦‚æœè½¦ä½è¿˜æ²¡æœ‰ä¸»äººï¼Œé‚£ä¹ˆå¤§å®¶å°±æ‹¼ä¸€æ‹¼è¿æ°”å’Œæ‰‹é€Ÿï¼Œç›´åˆ°æœ‰ä¸€ä¸ªä¹°å®¶è·å¾—äº†åŠæ•°å±…æ°‘çš„è®¤å¯ã€‚&lt;/li>
&lt;li>å¦‚æœç”¨æˆ·Aå·²ç»å£°æ˜ä»¥ä»·æ ¼Pä¹°å…¥è½¦ä½ï¼ˆè®°ä¸º&lt;code>(P, A)&lt;/code>ï¼‰ï¼Œæ­¤æ—¶å¿…æœ‰å¤šæ•°å±…æ°‘å·²ç»è®¤å¯&lt;code>(P, A)&lt;/code>ã€‚å¦‚æœç”¨æˆ·Bæƒ³è¦å£°æ˜ä»¥ä»·æ ¼Q(Q &amp;gt;= P)ä¹°å…¥è½¦ä½ï¼Œé¦–å…ˆéœ€è¦å‘å¤šæ•°å±…æ°‘è¯¢ä»·ï¼Œåœ¨è¯¢ä»·çš„è¿‡ç¨‹ä¸­ï¼Œä¸€å®šä¼šæ”¶åˆ°ç”¨æˆ·Aå·²ç»æ‹¥æœ‰è½¦ä½çš„ä¿¡æ¯ï¼Œæ­¤æ—¶Båªä¼šå¸®Aæ‰©æ•£ä¿¡æ¯ï¼Œè€Œä¸ä¼šå»äº‰å¤ºæ‹¥æœ‰æƒã€‚ç³»ç»Ÿæœ€ç»ˆä¼šè¾¾åˆ°ä¸€ä¸ªç¨³å®šçš„çŠ¶æ€ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="å¤±å¿†---æ”¾æ¾å¯æŒä¹…æ€§è¦æ±‚">å¤±å¿† - æ”¾æ¾å¯æŒä¹…æ€§è¦æ±‚ &lt;a href="#%e5%a4%b1%e5%bf%86---%e6%94%be%e6%9d%be%e5%8f%af%e6%8c%81%e4%b9%85%e6%80%a7%e8%a6%81%e6%b1%82" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>å¦‚æœæˆ‘ä»¬æ”¾æ¾å¯æŒä¹…æ€§çš„é™åˆ¶ã€‚å³å±…æ°‘å¯ä»¥æ‰çº¿ï¼Œæˆ–è€…æ¸…ç©ºè‡ªå·±çš„è®°å¿†ã€‚é‚£æ­¤æ—¶æœ€å·®æƒ…å†µæ˜¯å¤šæ•°å·²ç»ç¡®è®¤æŠ¥ä»·çš„å±…æ°‘ä¸å†æ‰¿è®¤æŠ¥ä»·ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±æœ‰å¯èƒ½é€€åŒ–åˆ°â€œä»æ²¡æœ‰äººæ‹¥æœ‰è½¦ä½â€çš„çŠ¶æ€ã€‚æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦å†è¿›è¡Œä¸€è½®é€‰ä¸¾ï¼Œé€‰å‡ºè½¦ä½æ–°çš„ä¸»äººå³å¯ã€‚è¿™å¹¶ä¸ä¼šç ´åæ•´ä¸ªç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;h3 id="æ—è§‚è€…è§†è§’">æ—è§‚è€…è§†è§’ &lt;a href="#%e6%97%81%e8%a7%82%e8%80%85%e8%a7%86%e8%a7%92" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>å‡å¦‚æˆ‘ä»¬åšä¸ºæ—è§‚è€…ï¼Œæƒ³è¦è§‚å¯Ÿæ˜¯è°æœ€ç»ˆæ‹¥æœ‰äº†è½¦ä½ã€‚å¯ä»¥æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š&lt;/p>
&lt;ol>
&lt;li>â€œæ¨â€æ¨¡å‹&lt;/li>
&lt;/ol>
&lt;p>å½“æ–°çš„ä¹°å®¶è¢«é€‰ä¸¾å‡ºæ¥æ—¶ï¼Œæ–°ä¹°å®¶ä¼šé€šçŸ¥æ‰€æœ‰æ—è§‚è€…è½¦ä½çš„æ‹¥æœ‰è€…å‘ç”Ÿäº†å˜åŒ–ã€‚è¿™æ ·è§‚å¯Ÿè€…ä»¬å¯ä»¥å®æ—¶çš„è·å¾—çŠ¶æ€çš„å˜åŒ–ï¼Œä½†æ˜¯ç”±äºé€šä¿¡æ˜¯ä¸å¯é çš„ï¼Œæ—è§‚è€…å¯èƒ½ä¼šé”™è¿‡çŠ¶æ€å˜åŒ–çš„ä¿¡æ¯ã€‚å¦‚æœè¿™ç§æƒ…å†µå‡ºç°ï¼Œè§‚å¯Ÿè€…åªèƒ½ç­‰å¾…ä¸‹æ¬¡çŠ¶æ€å˜åŒ–ï¼Œæ‰èƒ½æ›´æ–°è‡ªå·±çš„çŠ¶æ€ã€‚&lt;/p>
&lt;ol start="2">
&lt;li>â€œæ‹‰â€æ¨¡å‹&lt;/li>
&lt;/ol>
&lt;p>æ—è§‚è€…å¯ä»¥å‡è£…è‡ªå·±æ˜¯ä¸€ä¸ªä¹°å®¶ï¼Œå‘å¤šæ•°å±…æ°‘è¿›è¡Œè¯¢ä»·ã€‚å¦‚æœæœ€ç»ˆä¹°å®¶å·²ç»ç¡®å®šï¼Œé‚£ä¹ˆè¯¢ä»·çš„å“åº”ä¸­ä¸€å®šåŒ…å«ç€æœ€æ–°çš„æ‹¥æœ‰è€…ä¿¡æ¯ã€‚&lt;/p>
&lt;h3 id="paxoså¦‚ä½•è§£å†³æ´»é”é—®é¢˜">Paxoså¦‚ä½•è§£å†³æ´»é”é—®é¢˜ &lt;a href="#paxos%e5%a6%82%e4%bd%95%e8%a7%a3%e5%86%b3%e6%b4%bb%e9%94%81%e9%97%ae%e9%a2%98" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>å‡è®¾å±…æ°‘é‡Œæœ‰ä¹°å®¶Aã€Bï¼ŒåŒæ—¶å‘å…¶å®ƒå±…æ°‘æå‡ºè¯¢ä»·/æŠ¥ä»·ã€‚å¦‚æœä»–ä»¬çš„è¯¢ä»·/æŠ¥ä»·é¡ºåºæ’åˆ—å¦‚ä¸‹ï¼Œä¼šå‡ºç°ä»€ä¹ˆçŠ¶å†µå‘¢ï¼Ÿ&lt;/p>
&lt;pre tabindex="0">&lt;code>A: è¯¢ä»·ï¼Œ1å—
ä¼—å±…æ°‘ï¼šå¥½çš„ï¼Œæœ€é«˜ä»·ä¸º1å—
Bï¼šåŠ é’±ï¼Œ2å—
ä¼—å±…æ°‘ï¼šæ”¶åˆ°ï¼Œæœ€é«˜ä»·ä¸º2å—
ï¼ˆæ­¤æ—¶Aä»æ—§è®¤ä¸º1å—æ˜¯æœ€é«˜æŠ¥ä»·ï¼‰
Aï¼šæœ€ç»ˆæŠ¥ä»·ï¼Œ1å—
ä¼—å±…æ°‘ï¼šä¸è¡Œä¸è¡Œï¼ŒBå·²ç»åŠ åˆ°ä¸¤å—é’±äº†
Aï¼šï¼ˆå†…å¿ƒmmpï¼‰è¯¢ä»·ï¼Œ3å—
ï¼ˆBå¯¹Aæé«˜äº†æŠ¥ä»·ä¹Ÿæ¯«æ— å‡†å¤‡ï¼‰
Bï¼šæœ€ç»ˆæŠ¥ä»·ï¼Œ2å—
ä¼—å±…æ°‘ï¼šæ»šç²—ï¼ŒAå·²ç»æŠ¥ä»·3å—äº†
Bï¼šæˆ‘åŠ é’±
Aï¼šæˆ‘å†åŠ 
Bï¼šæˆ‘åŠ é’±
Aï¼šæˆ‘å†åŠ 
ä¼—å±…æ°‘ï¼šã€‚ã€‚ã€‚ï¼ˆä½ ä»¬ç©ä¸ªçƒå•Šï¼‰
&lt;/code>&lt;/pre>&lt;p>éœ‡æƒŠï¼Œè¿™å¸®æ— èŠçš„äººå±…ç„¶ä¸ºäº†è¿™å‡ å—é’±å¯ä»¥ç©ä¸€å¤©ï¼&lt;/p>
&lt;p>ä»¥è¿™æ ·çš„æµç¨‹è¿›è¡Œä¸‹å»ï¼Œç³»ç»Ÿä¼šé™·å…¥æ´»é”ï¼Œå‡ ä¹ä¸èƒ½è¾¾æˆä¸€è‡´äº†ã€‚æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†Aå’ŒBçš„è¯¢ä»·é‡è¯•æ—¶é—´åŠ å…¥éšæœºåŒ–å› å­ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©æ›´å¿«çš„è®©å±…æ°‘ä»¬è¾¾æˆä¸€è‡´ã€‚&lt;/p>
&lt;h3 id="paxoså¦‚ä½•è§£å†³æŠ•ç¥¨åˆ†è£‚é—®é¢˜">Paxoså¦‚ä½•è§£å†³æŠ•ç¥¨åˆ†è£‚é—®é¢˜ &lt;a href="#paxos%e5%a6%82%e4%bd%95%e8%a7%a3%e5%86%b3%e6%8a%95%e7%a5%a8%e5%88%86%e8%a3%82%e9%97%ae%e9%a2%98" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>&lt;img src="https://raw.githubusercontent.com/Wizmann/assets/master/wizmann-pic/18-11-25/split-vots.png" alt="">&lt;/p>
&lt;p>å¦‚å›¾æ‰€ç¤ºï¼Œå±…æ°‘ä»¬çš„æŠ•ç¥¨å¯èƒ½ä¼šå‘ç”Ÿåˆ†è£‚ï¼Œå³æ²¡æœ‰ä¸€ä¸ªå€¼è¾¾åˆ°äº†åŠæ•°ã€‚è¿™é‡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯è®©ä¹°å®¶é‡æ–°è¿›è¡Œè¯¢ä»·ï¼ŒåŒæ—¶åŠ å…¥éšæœºåŒ–å› å­ï¼Œä½¿å¾—æŠ•ç¥¨è¾¾æˆåŠæ•°ä»¥ä¸Šçš„æ¦‚ç‡æ›´å¤§ã€‚&lt;/p>
&lt;h2 id="è¯´æ­£ç»çš„">è¯´æ­£ç»çš„ &lt;a href="#%e8%af%b4%e6%ad%a3%e7%bb%8f%e7%9a%84" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>å¯¹äºPaxosç®—æ³•çš„å®˜æ–¹æè¿°å’Œæ­£ç¡®æ€§çš„è¯¦ç»†è¯æ˜å¯ä»¥å‚è€ƒ&lt;a href="https://lamport.azurewebsites.net/pubs/paxos-simple.pdf">åŸè®ºæ–‡&lt;/a>ã€‚è¿™é‡Œå°±ä¸æ¬è¿äº†ï¼Œåªæ˜¯æŠŠæˆ‘çš„ä¾‹å­å’Œå®˜æ–¹é€šç”¨æœ¯è¯­è¿›è¡Œä¸€ä¸‹è®²è§£ï¼Œé¿å…æŠŠå¤§å®¶å¸¦è·‘åäº†ã€‚&lt;/p>
&lt;p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œâ€œè½¦ä½â€çš„é€šç”¨æœ¯è¯­è¢«ç§°ä¸ºâ€œå…±è¯†â€ï¼Œæ•´ä¸ªç³»ç»Ÿä¸­æœ€å¤šæœ‰ä¸€ä¸ªå…±è¯†ã€‚è€Œâ€œè¯¢ä»·è¯·æ±‚â€è¢«ç§°ä¸ºâ€œprepareè¯·æ±‚â€ï¼Œâ€œæŠ¥ä»·è¯·æ±‚â€è¢«ç§°ä¸ºâ€œacceptè¯·æ±‚â€ã€‚&lt;/p>
&lt;p>æ¯ä¸ªè¯·æ±‚çš„ä»·æ ¼è¢«ç§°ä¸ºâ€œç¼–å·â€ï¼Œç¼–å·å¤§çš„è¯·æ±‚å¯ä»¥è¦†ç›–ç¼–å·å°çš„è¯·æ±‚ï¼Œå’Œâ€œä»·é«˜è€…å¾—â€æ˜¯ä¸€ä¸ªé“ç†ã€‚è¯·æ±‚ä¸­æ‰€å¸¦çš„ä¿¡æ¯è¢«ç§°ä¸ºâ€œvalueâ€ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä»£è¡¨ç€è´­ä¹°è€…çš„èº«ä»½ä¿¡æ¯ã€‚&lt;/p>
&lt;h2 id="basic-paxoså’Œmulti-paxos">Basic Paxoså’ŒMulti Paxos &lt;a href="#basic-paxos%e5%92%8cmulti-paxos" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>ä¸Šé¢æˆ‘ä»¬æè¿°çš„Paxosç®—æ³•åˆè¢«ç§°ä¸ºBasic Paxosï¼Œå› ä¸ºæ¯ä¸€è½®æµç¨‹æ‰§è¡Œå®Œï¼Œæ‰€æœ‰çš„å‚ä¸è€…éƒ½ä¼šï¼ˆä¸”åªä¼šï¼‰è¾¾æˆä¸€ä¸ªå…±è¯†ã€‚è€Œåœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿ç»­ä¸æ–­çš„å¯¹å¤šä¸ªå€¼è¾¾æˆå…±è¯†ã€‚è¿™æ—¶Basic Paxosç®—æ³•å°±åŠ›ä¸èƒ½åŠäº†ï¼Œä¸€æ¥æ¯ä¸€ä¸ªå€¼çš„å…±è¯†éƒ½è‡³å°‘éœ€è¦ä¸¤æ¬¡å¹¿æ’­ç½‘ç»œè¯·æ±‚ï¼Œæ€§èƒ½å¤ªä½ï¼ŒäºŒæ¥åŒæ—¶å­˜åœ¨çš„å¤šä¸ªææ¡ˆä¼šäº’ç›¸ç«äº‰ï¼Œä½¿å¾—é€šä¿¡çš„æ•ˆç‡ä¸‹é™ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒMulti Paxosç®—æ³•åº”è¿è€Œç”Ÿï¼Œå³ä¸€ç§å¯ä»¥é«˜æ•ˆçš„ã€è¿ç»­ä¸æ–­çš„å¯¹å¤šä¸ªå€¼è¾¾æˆå…±è¯†çš„ç®—æ³•ã€‚&lt;/p>
&lt;p>ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šä»‹ç»ä¸€ç§è¢«æ™®éè®¤å¯ï¼Œä»¥åŠå·²ç»è¢«å·¥ä¸šç•Œåº”ç”¨çš„Multi Paxosçš„å®ç° â€”â€” Raftç®—æ³•ã€‚&lt;/p>
&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ &lt;a href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&lt;a href="https://lamport.azurewebsites.net/pubs/paxos-simple.pdf">Paxos Made Simple&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://book.douban.com/subject/26292004/">ä»Paxosåˆ°Zookeeper&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://zhuanlan.zhihu.com/p/31780743">çŸ¥ä¹ï¼šPaxosç®—æ³•è¯¦è§£&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>