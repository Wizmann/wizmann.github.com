<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>WAS on Maerlyn's Rainbow</title><link>https://wizmann.top/tags/was/</link><description>Recent content in WAS on Maerlyn's Rainbow</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Wed, 11 Oct 2017 21:12:15 +0000</lastBuildDate><atom:link href="https://wizmann.top/tags/was/index.xml" rel="self" type="application/rss+xml"/><item><title>Windows Azure Storage Made Simple</title><link>https://wizmann.top/posts/azure-storage-made-simple/</link><pubDate>Wed, 11 Oct 2017 21:12:15 +0000</pubDate><guid>https://wizmann.top/posts/azure-storage-made-simple/</guid><description>&lt;h2 id="åŠ æœºå™¨å°±æ˜¯ä¸€æŠŠæ¢­">åŠ æœºå™¨å°±æ˜¯ä¸€æŠŠæ¢­ &lt;a href="#%e5%8a%a0%e6%9c%ba%e5%99%a8%e5%b0%b1%e6%98%af%e4%b8%80%e6%8a%8a%e6%a2%ad" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;blockquote>
&lt;p>æ²¡æœ‰ä»€ä¹ˆé—®é¢˜æ˜¯åŠ ä¸€åƒå°æœºå™¨è§£å†³ä¸äº†çš„ï¼Œå¦‚æžœæœ‰ï¼Œå°±å†åŠ ä¸€åƒå°ã€‚ &lt;br>
â€”â€” ã€Š21å¤©ç²¾é€šåˆ†å¸ƒå¼ç³»ç»Ÿã€‹&lt;/p>&lt;/blockquote>
&lt;p>åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨è®¾è®¡ä¹‹åˆï¼Œæ˜¯ä¸ºäº†è§£å†³å•æœºç³»ç»Ÿçš„å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§é—®é¢˜çš„ã€‚&lt;/p>
&lt;p>ä¸¾ä¸ªä¾‹å­ï¼Œå•æœºç³»ç»Ÿå°±æ˜¯é›‡ä¸€ä¸ªå°å¼Ÿæ›¿ä½ å¹²æ´»ï¼Œä½†æ˜¯è¿™ä¸ªå°å¼Ÿä¸å¤ªé è°±ï¼Œå¶å°”æ³¡ä¸ªç—…å·ä¸ä¸Šç­ï¼Œå¶å°”å·¥ä½œå¤ªå¤šä¸€ä¸ªäººå¹²ä¸è¿‡æ¥ã€‚&lt;/p>
&lt;p>åˆ†å¸ƒå¼ç³»ç»Ÿå°±æ˜¯é›‡ä¸€ç¾¤å°å¼Ÿå¸®ä½ å¹²æ´»ï¼Œå¶å°”æœ‰ä¸€ä¸¤ä¸ªå°å¼Ÿæ³¡ç—…å·ï¼Œæˆ‘ä»¬ä¼šæœ‰å¯Œè£•çš„äººåŠ›é¡¶ä¸Šï¼Œå·¥ä½œå¤ªå¤šæˆ‘ä»¬å¯ä»¥ç»§ç»­æ‹‰æ–°çš„å°å¼Ÿå…¥ä¼™ï¼Œç¾Žæ»‹æ»‹ã€‚&lt;/p>
&lt;p>è¿™ä¸ªæ¯”å–»å¾ˆå¥½çš„æè¿°äº†å•æœºç³»ç»Ÿå’Œåˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´çš„å…³ç³»ã€‚æ‰€ä»¥ä¸€ç§å¯èƒ½çš„åˆ†å¸ƒå¼ç³»ç»Ÿå°±æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-9-25/28278606.jpg" alt="">&lt;/p>
&lt;p>æˆ‘ä»¬å°†ç›¸åŒåŠŸèƒ½çš„æœåŠ¡å™¨ç»„æˆä¸€ä¸ªæ•´ä½“ï¼Œé€šè¿‡ä¸€ä¸ªload balancerå¯¹å¤–æä¾›æœåŠ¡ã€‚&lt;/p>
&lt;p>è¿™æ ·çš„ç³»ç»Ÿåˆæ­¥è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œåœ¨é¢å¯¹å¯æ‰©å±•æ€§å’Œå¯ç”¨æ€§çš„é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬ä¼šï¼š&lt;/p>
&lt;ul>
&lt;li>å®¹é‡ä¸è¶³å°±åŠ æœºå™¨&lt;/li>
&lt;li>å•æœºæŒ‚æŽ‰äº†å°±æŠŠæµé‡è°ƒåº¦åˆ°å…¶å®ƒçš„èŠ‚ç‚¹ä¸Š&lt;/li>
&lt;/ul>
&lt;p>ä¸è¿‡å•çº¯çš„åŠ æœºå™¨å¹¶ä¸èƒ½å®Œå…¨æ»¡è¶³æˆ‘ä»¬çš„éœ€è¦ã€‚å¯¹äºŽCPUå¯†é›†åž‹çš„æœåŠ¡ï¼Œå¢žåŠ å‰¯æœ¬æ•°å¯ä»¥æœ‰æ•ˆçš„å‡æ‘Šè®¡ç®—åŽ‹åŠ›ï¼Œä½†æ˜¯å¯¹äºŽå­˜å‚¨å¯†é›†åž‹çš„æœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å¢žåŠ åˆ†åº“é€»è¾‘æ‰èƒ½æœ‰æ•ˆçš„å¢žåŠ ç³»ç»Ÿçš„è®¡ç®—èƒ½åŠ›ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚æˆ‘ä»¬æœ‰100Gçš„æ•°æ®ï¼Œä½†æ˜¯æ•°æ®åº“çš„å®¹é‡æœ€å¤šåªæ”¯æŒ50Gã€‚è¿™æ ·æ— è®ºæ€Žä¹ˆæ ·å¢žåŠ å‰¯æœ¬éƒ½ä¸èƒ½è§£å†³é—®é¢˜ã€‚å¦‚æžœæˆ‘ä»¬å°†100Gçš„æ•°æ®å‡åˆ†ï¼Œå­˜å‚¨åœ¨ä¸¤ä¸ª50Gçš„åˆ†åº“ä¸Šï¼Œæˆ‘ä»¬å°±å¯ä»¥æ”¯æŒå•æœºç³»ç»Ÿå®¹çº³ä¸äº†çš„æ•°æ®äº†ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-9-22/14141171.jpg" alt="">&lt;/p>
&lt;p>æˆ‘ä»¬è¿˜å¯ä»¥æŠŠå¤šä¸ªè¿™æ ·çš„åˆ†å¸ƒå¼å­ç³»ç»Ÿç»„åˆèµ·æ¥ï¼Œå°±å¯ä»¥ç»„æˆä¸€ä¸ªå°æœ‰è§„æ¨¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿäº†ã€‚çŽ°åœ¨æˆ‘ä»¬åœ¨ä½¿ç”¨çš„ä¸€äº›æœåŠ¡ï¼Œä»åœ¨ä½¿ç”¨è¿™ç§æ¨¡åž‹ã€‚&lt;/p>
&lt;p>ä¸Šé¢åˆ†å¸ƒå¼æ¨¡åž‹è™½ç„¶æœ‰æ•ˆï¼Œä½†æ˜¯å¼•å…¥äº†ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼šå› ä¸ºèŠ‚ç‚¹ä¹‹é—´æ˜¯éš”ç¦»çš„ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡ä¸Žåè°ƒï¼Œæ‰€ä»¥åŸºæœ¬æ— æ³•å®Œå…¨ä¿è¯å‰¯æœ¬ä¹‹é—´ä¿æŒä¸€è‡´çš„å†…éƒ¨çŠ¶æ€ã€‚&lt;/p>
&lt;p>è¿™å°±æ˜¯æ‰€è°“çš„ä¸€è‡´æ€§é—®é¢˜ã€‚&lt;/p>
&lt;h2 id="è¡¥å……ä¸€ç‚¹ç†è®ºçŸ¥è¯†">è¡¥å……ä¸€ç‚¹ç†è®ºçŸ¥è¯† &lt;a href="#%e8%a1%a5%e5%85%85%e4%b8%80%e7%82%b9%e7%90%86%e8%ae%ba%e7%9f%a5%e8%af%86" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;h3 id="capç†è®º">CAPç†è®º &lt;a href="#cap%e7%90%86%e8%ae%ba" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>CAPç†è®ºæŒ‡çš„æ˜¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰å’Œåˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰è¿™ä¸‰ä¸ªåŸºæœ¬è¦æ±‚ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³å…¶ä¸­çš„ä¸¤é¡¹ã€‚&lt;/p>&lt;/blockquote>
&lt;p>CAPç†è®ºç”±Eric Breweråœ¨2000å¹´é¦–æ¬¡æå‡ºï¼Œå¹¶ä¸”2å¹´åŽè¢«Seth Gilbertå’ŒNancy Lynchä»Žç†è®ºä¸Šè¯æ˜Žè¿™ä¸ªç†è®ºã€‚&lt;/p>
&lt;ul>
&lt;li>ä¸€è‡´æ€§æ˜¯æŒ‡æ•°æ®çš„å¤šä¸ªå‰¯æœ¬ä¹‹é—´ä¿æŒä¸€è‡´çš„ç‰¹æ€§ï¼›&lt;/li>
&lt;li>å¯ç”¨æ€§æ˜¯æŒ‡ç³»ç»Ÿçš„æœåŠ¡å¿…é¡»ä¸€ç›´å¤„äºŽå¯ç”¨çš„çŠ¶æ€;&lt;/li>
&lt;li>è€Œåˆ†åŒºå®¹é”™æ€§æ˜¯æŒ‡ç³»ç»Ÿåœ¨é­é‡ä»»ä½•ç½‘ç»œåˆ†åŒºæ•…éšœçš„æ—¶å€™ä»ç„¶èƒ½å¤Ÿä¿è¯å¯¹å¤–æä¾›æ»¡è¶³ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„æœåŠ¡ï¼Œé™¤éžæ˜¯æ•´ä¸ªç½‘ç»œçŽ¯å¢ƒéƒ½å‘ç”Ÿäº†æ•…éšœ;&lt;/li>
&lt;/ul>
&lt;p>æŠ›å¼€ä¸€è‡´æ€§é—®é¢˜ä¸è°ˆï¼Œâ€œå¯ç”¨æ€§â€å’Œâ€œåˆ†åŒºå®¹é”™æ€§â€ä»ŽæŸç§æ„ä¹‰ä¸Šè®²æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„â€œæ ‡é…â€ï¼šå•æœºå’Œç½‘ç»œè¿žæŽ¥å¹¶ä¸å¯é ï¼Œä»Žä¸€å †ä¸å¯é çš„ç¡¬ä»¶ä¸Šå±‚å»ºç«‹ä¸€ä¸ªä¸å¯é çš„ç³»ç»Ÿå¹¶æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ä¸€è‡´æ€§å¸¸å¸¸è¢«ç‰ºç‰²ï¼Œæ¥ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ã€‚&lt;/p>
&lt;h3 id="paxosç®—æ³•">Paxosç®—æ³• &lt;a href="#paxos%e7%ae%97%e6%b3%95" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>Paxosæ˜¯Leslie Lamportåœ¨1990å¹´æå‡ºçš„ä¸€ç§åŸºäºŽæ¶ˆæ¯ä¼ é€’ä¸”å…·æœ‰é«˜åº¦å®¹é”™æ€§çš„ä¸€è‡´æ€§ç®—æ³•ã€‚&lt;/p>
&lt;p>Paxosè§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•åœ¨ä¸€ä¸ªå¯èƒ½å‘ç”Ÿä¸Šè¿°å¼‚å¸¸çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¿«é€Ÿä¸”æ­£ç¡®åœ°åœ¨é›†ç¾¤å†…éƒ¨å¯¹æŸä¸ªæ•°æ®çš„å€¼è¾¾æˆä¸€è‡´ï¼Œå¹¶ä¸”ä¿è¯ä¸è®ºå‘ç”Ÿä»»ä½•å¼‚å¸¸ï¼Œéƒ½ä¸ä¼šç ´åæ•´ä¸ªç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;p>Paxosçš„æè¿°å’Œè¯æ˜Žæœ‰ä¸€äº›å¤æ‚ï¼Œè¿™é‡Œä¸åšå±•å¼€ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç³»ç»Ÿä¸­çš„å„ä¸ªèŠ‚ç‚¹ä½¿ç”¨ç±»ä¼¼äºŽé€‰ä¸¾æŠ•ç¥¨çš„ç®—æ³•æ¥è¾¾æˆä¸€è‡´ï¼Œé€‰ä¸¾è¿‡ç¨‹ä¸­ä¼šæœ‰çŸ­æš‚çš„æ•°æ®ä¸å¯ç”¨ä¸­é—´çŠ¶æ€ã€‚&lt;/p>
&lt;h2 id="æˆ‘æœ€è®¨åŽŒæˆ‘æƒ³åšçš„äº‹æƒ…åšä¸æˆ">â€œæˆ‘æœ€è®¨åŽŒæˆ‘æƒ³åšçš„äº‹æƒ…åšä¸æˆâ€ &lt;a href="#%e6%88%91%e6%9c%80%e8%ae%a8%e5%8e%8c%e6%88%91%e6%83%b3%e5%81%9a%e7%9a%84%e4%ba%8b%e6%83%85%e5%81%9a%e4%b8%8d%e6%88%90" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;blockquote>
&lt;p>åœ¨åˆ†å¸ƒå¼çŽ¯å¢ƒä¸­ï¼Œä¸€è‡´æ€§æ˜¯æŒ‡æ•°æ®åœ¨å¤šä¸ªå‰¯æœ¬ä¹‹é—´æ˜¯å¦èƒ½å¤Ÿä¿æŒä¸€è‡´çš„ç‰¹æ€§ã€‚åœ¨ä¸€è‡´æ€§çš„éœ€æ±‚ä¸‹ï¼Œå½“ä¸€ä¸ªç³»ç»Ÿåœ¨æ•°æ®ä¸€è‡´çš„çŠ¶æ€ä¸‹æ‰§è¡Œæ›´æ–°æ“ä½œåŽï¼Œåº”è¯¥ä¿è¯ç³»ç»Ÿçš„æ•°æ®ä»ç„¶å¤„äºŽä¸€è‡´çš„çŠ¶æ€ã€‚ &lt;br>
â€”â€” ã€Šä»ŽPaxosåˆ°ZooKeeperã€‹&lt;/p>&lt;/blockquote>
&lt;p>æ— æ•°çš„ç†è®ºå’Œå®žè·µè¯æ˜Žï¼Œè§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§é—®é¢˜æ˜¯éžå¸¸å›°éš¾çš„ã€‚ä»Žæœ€ç›´è§‚ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬æ‰¾ä¸åˆ°ä¸¤ç‰‡ä¸€æ ·çš„æ ‘å¶ï¼Œä¹Ÿæ‰¾ä¸åˆ°ä¸¤å°çŠ¶æ€å®Œå…¨ä¸€è‡´çš„åˆ†å¸ƒå¼èŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>ä½†æ˜¯å‰äººçš„æ™ºæ…§æ˜¯æ— ç©·çš„ï¼Œæˆ‘ä»¬ä»ç„¶æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ¡ˆæ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼š&lt;/p>
&lt;h3 id="2pc-and-3pc">2PC and 3PC &lt;a href="#2pc-and-3pc" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>2PCï¼ˆTwo-phase Commitï¼Œä¸¤é˜¶æ®µæäº¤ï¼‰æ˜¯ç”¨æ¥ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸€è‡´æ€§çš„ä¸€ä¸ªåè®®ã€‚å…¶æµç¨‹å¯ä»¥ç”±è¿™ä¸ªä¾‹å­æ¥è¡¨ç¤ºï¼š&lt;/p>
&lt;blockquote>
&lt;p>PMï¼ˆåè°ƒè€…ï¼‰: æˆ‘è¦åŠ ä¸ªéœ€æ±‚ï¼ï¼ˆé˜¶æ®µ1ï¼Œæäº¤äº‹åŠ¡è¯·æ±‚ï¼‰ &lt;br>
Dev1ï¼ˆå‚ä¸Žè€…ï¼‰ï¼šä½ åŠ å§ &lt;br>
Dev2ï¼ˆå‚ä¸Žè€…ï¼‰ï¼šä½ åŠ å§ &lt;br>
PMï¼ˆåè°ƒè€…ï¼‰ï¼šæˆ‘çœŸåŠ äº†ï¼ï¼ˆé˜¶æ®µ2ï¼Œæ‰§è¡Œäº‹åŠ¡æäº¤ï¼‰ &lt;br>
Dev1ï¼ˆå‚ä¸Žè€…ï¼‰ï¼šåŠ å®Œäº† &lt;br>
Dev2ï¼ˆå‚ä¸Žè€…ï¼‰ï¼šåŠ å®Œäº†&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>æ³¨ï¼šPMå’ŒDevæ˜¯ç¨‹åºå‘˜è€æ¢—è€Œå·²ã€‚å„ä¸ªèŒä¸šåªæ˜¯åˆ†å·¥ä¸åŒï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸ºäººæ°‘æœåŠ¡ã€‚&lt;/p>&lt;/blockquote>
&lt;p>æ•´ä¸ªæµç¨‹çœ‹èµ·æ¥å¾ˆç¾Žå¥½ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>åŒæ­¥é˜»å¡ž &lt;br>
åœ¨æäº¤è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿéœ€è¦ç­‰å¾…æ‰€æœ‰å‚ä¸Žè€…çš„å“åº”ï¼Œæ‰€ä»¥ç³»ç»Ÿæ•´ä½“å¤„äºŽä¸€ç§é˜»å¡žçŠ¶æ€ï¼Œå½±å“æ•ˆçŽ‡ã€‚&lt;/li>
&lt;li>å•ç‚¹é—®é¢˜ &lt;br>
åè°ƒè€…æ˜¯ç³»ç»Ÿçš„å•ç‚¹ï¼Œå¦‚æžœå½“æŽ‰ï¼Œæ•´ä¸ªç³»ç»Ÿå°±å¤„äºŽä¸å¯ç”¨çŠ¶æ€ã€‚&lt;/li>
&lt;li>æ•°æ®ä¸ä¸€è‡´ &lt;br>
ä¸€ä¸ªæ•°æ®ä¸€è‡´æ€§åè®®ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œç¡®å®žæ˜¯éžå¸¸è®½åˆºçš„äº‹æƒ…ã€‚åœ¨æ‰§è¡Œäº‹åŠ¡æäº¤é˜¶æ®µï¼Œå¦‚æžœåè°ƒè€…ä¸Žå‚ä¸Žè€…çš„é€šä¿¡ä¸­æ–­ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ï¼š
&lt;ul>
&lt;li>å½“åè°ƒè€…å‘å¾€éƒ¨åˆ†å‚ä¸Žè€…çš„Commitæ¶ˆæ¯ä¸¢å¤±ï¼Œæ²¡æœ‰æ”¶åˆ°Commitçš„å‚ä¸Žè€…ä¼šå› ä¸ºè¶…æ—¶è€Œè®¤ä¸ºè¿™æ¬¡è¯·æ±‚å¤±è´¥è€Œè¿›è¡Œå›žæ»š&lt;/li>
&lt;li>å½“å‚ä¸Žè€…å‘å¾€åè°ƒè€…çš„ACKæ¶ˆæ¯ä¸¢å¤±ï¼Œåè°ƒè€…ä¼šè®¤ä¸ºè¿™æ¬¡è¯·æ±‚å¤±è´¥ï¼Œä½†æ˜¯å‚ä¸Žè€…ç¡®å®žå·²ç»Commitäº†æ•°æ®&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>3PCï¼ˆThree-phace Commitï¼Œä¸‰é˜¶æ®µæäº¤ï¼‰æ˜¯2PCåè®®çš„æ”¹è¿›ç‰ˆï¼Œå°†æ•´ä¸ªè¯·æ±‚åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š&lt;/p>
&lt;ul>
&lt;li>äº‹åŠ¡è¯¢é—®&lt;/li>
&lt;li>é¢„æäº¤&lt;/li>
&lt;li>æ‰§è¡Œæäº¤&lt;/li>
&lt;/ul>
&lt;p>è¿™æ ·çš„æ”¹è¿›å‡å°‘äº†åŒæ­¥é˜»å¡žçš„ç²’åº¦ï¼Œä½†æ˜¯ä»ç„¶æ²¡æœ‰è§£å†³å•ç‚¹é—®é¢˜å’Œæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚æ‰€ä»¥2PCå’Œ3PCéƒ½ä¸æ˜¯éžå¸¸ç†æƒ³çš„æ•°æ®ä¸€è‡´æ€§åè®®ã€‚&lt;/p>
&lt;h3 id="paxos">Paxos &lt;a href="#paxos" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>ä¸Šæ–‡ä¸­æˆ‘ä»¬æåˆ°Paxosæ˜¯ä¸€ç§è¢«æ•°å­¦è¯æ˜Žè¿‡çš„ï¼Œå…·æœ‰é«˜åº¦å®¹é”™æ€§çš„ä¸€è‡´æ€§ç®—æ³•ã€‚ä½†æ˜¯å…¶æµç¨‹å¤æ‚ï¼Œé€šä¿¡æ¬¡æ•°è¾ƒå¤šï¼Œå¹¶ä¸”åœ¨ææ¡ˆæœªè¢«é€‰ä¸­ä¹‹å‰ä¸èƒ½ä¿è¯æ•°æ®çš„å¯ç”¨æ€§ã€‚&lt;/p>
&lt;p>æ‰€ä»¥Paxosçš„åº”ç”¨åœºæ™¯å¤šä¸ºå‘½åæœåŠ¡ã€é…ç½®ç®¡ç†ã€åˆ†å¸ƒå¼é”ç­‰è½»é‡çº§ä½†æ˜¯è€Œåˆéžå¸¸æ ¸å¿ƒçš„æœåŠ¡ï¼Œä»Žè€Œæ‰¬é•¿é¿çŸ­ï¼Œæ›´å¥½çš„ä¸ºäººæ°‘æœåŠ¡ï¼Œ&lt;del>æ›´å¥½çš„åä¸‰ä¿—&lt;/del>ã€‚ã€‚&lt;/p>
&lt;h3 id="quorum-like-algorithm-amazon-dynamo">Quorum-like Algorithm (Amazon Dynamo) &lt;a href="#quorum-like-algorithm-amazon-dynamo" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>å¯¹äºŽåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§ï¼Œæœ€ç›´è§‚çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯åœ¨ä¿®æ”¹èŠ‚ç‚¹çŠ¶æ€æ—¶ï¼Œå°†ä¿®æ”¹å¹¿æ’­åˆ°æ‰€æœ‰èŠ‚ç‚¹ä¸Šã€‚è¿™æ ·ä»Žç†è®ºä¸Šè®²ï¼Œå°±å¯ä»¥ä¿æŒèŠ‚ç‚¹çš„ä¸€è‡´æ€§äº†ã€‚&lt;/p>
&lt;p>ä½†æ˜¯åœ¨çŽ°å®žå·¥ç¨‹å½“ä¸­ï¼Œå¹¿æ’­ä¿®æ”¹æ˜¯æœ€ä¸å¯é çš„æ–¹æ¡ˆï¼Œå› ä¸ºé€šä¿¡å¯èƒ½å¤±è´¥ï¼ŒèŠ‚ç‚¹å¯èƒ½å¤±æ•ˆï¼Œæˆ‘ä»¬çš„ä¿®æ”¹å¾ˆæœ‰å¯èƒ½ä¸ä¼šåŒæ­¥åˆ°æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šï¼ˆå‡è®¾æ¯ä¸ªèŠ‚ç‚¹çš„å¯é æ€§ä¸º99.9%ï¼Œé‚£ä¹ˆ10ä¸ªèŠ‚ç‚¹åŒæ—¶å¯é æ¦‚çŽ‡åªæœ‰99%ï¼Œ100ä¸ªèŠ‚ç‚¹åŒæ—¶å¯é çš„æ¦‚çŽ‡ä¸º90%ï¼‰ã€‚&lt;/p>
&lt;p>ä¸è¿‡ï¼Œè®©æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¿æŒå®Œå…¨ä¸€è‡´è™½ç„¶å¾ˆå®Œç¾Žï¼Œä½†æ˜¯å…¶ä»˜å‡ºçš„ä»£ä»·ä¹Ÿè®¸æ˜¯çŽ°æœ‰ çš„ç³»ç»Ÿéš¾ä»¥æ‰¿å—çš„ã€‚Amazon Dynamoä½¿ç”¨äº†ä¸€ç§ç±»ä¼¼é€‰ä¸¾çš„ç®—æ³•æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;p>è®¾æˆ‘ä»¬æœ‰Nä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å†æŒ‡å®šä¸¤ä¸ªæ•°Rå’ŒWï¼Œä½¿å¾— R + W &amp;gt; Nã€‚åœ¨å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬åŒæ—¶å‘Nä¸ªèŠ‚ç‚¹å†™å…¥ï¼Œå½“æœ‰Wä¸ªï¼ˆåŠä»¥ä¸Šï¼‰èŠ‚ç‚¹å†™å…¥æˆåŠŸï¼Œå°±å‘å®¢æˆ·ç«¯è¿”å›žæˆåŠŸï¼›åœ¨è¯»å–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘Rä¸ªèŠ‚ç‚¹è¯·æ±‚æ•°æ®ï¼Œæ­¤æ—¶ä¸€å®šä¼šè¯»åˆ°åˆšåˆšå†™å…¥æ–°æ•°æ®çš„èŠ‚ç‚¹ï¼Œç„¶åŽæˆ‘ä»¬å°†æœ€æ–°çš„æ•°æ®è¿”å›žç»™ç”¨æˆ·ã€‚&lt;/p>
&lt;p>ä¸è¿‡è¿™ç§è®¾è®¡å¹¶ä¸å®Œå–„ï¼Œå½“å‡ºçŽ°ç½‘ç»œé”™è¯¯æˆ–è€…å¤§è§„æ¨¡èŠ‚ç‚¹å¤±æ•ˆçš„æ—¶å€™ï¼Œæ•°æ®ä¸€è‡´æ€§å°±å¾ˆéš¾ä¿è¯äº†ã€‚&lt;/p>
&lt;p>æˆ‘ç§°è¿™ç§ä¸€è‡´æ€§æ¨¡åž‹ä¸º â€”â€” â€œå°½åŠ›ä¸€è‡´æ€§â€ã€‚&lt;/p>
&lt;h3 id="event-stream-for-eventual-consistency-apache-kafka">Event Stream for Eventual Consistency (Apache Kafka) &lt;a href="#event-stream-for-eventual-consistency-apache-kafka" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>ä»ŽDynamoçš„ç»éªŒä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç›´æŽ¥å°†çŠ¶æ€çš„ä¿®æ”¹å¹¿æ’­åˆ°ä¸åŒçš„èŠ‚ç‚¹æ˜¯ä¸å¯é çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬æœ‰æ²¡æœ‰åŠžæ³•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ&lt;/p>
&lt;p>Apache Kafkaä½¿ç”¨äº†ç±»ä¼¼â€œé¢„å†™å¼æ—¥å¿—â€çš„æ–¹æ³•æ¥ä¿è¯ä¸€è‡´æ€§ã€‚å½“çŠ¶æ€ä¿®æ”¹è¯·æ±‚åˆ°æ¥æ—¶ï¼Œå…ˆå†™å…¥ä¸€æ¡å…¬å…±çš„æ•°æ®æµï¼Œè¿™æ¡æ•°æ®æµå¾€å¾€æ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜çš„ã€‚ç„¶åŽä¸åŒçš„èŠ‚ç‚¹å†è®¿é—®æ•°æ®æµï¼Œæ‰§è¡ŒåŒæ ·çš„çŠ¶æ€ä¿®æ”¹è¯·æ±‚ï¼Œä¿è¯èŠ‚ç‚¹çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-9-27/17974300.jpg" alt="">&lt;/p>
&lt;p>è¿™ç§è®¾è®¡çš„ç¼ºé™·æ˜¯è™½ç„¶æœ€ç»ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šä¾æ¬¡æ‰§è¡Œç›¸åŒçš„å‘½ä»¤ï¼Œä½†æ˜¯èŠ‚ç‚¹æ‰§è¡Œå‘½ä»¤çš„é€Ÿåº¦æœ‰å¿«æœ‰æ…¢ï¼Œæ‰€ä»¥åœ¨çž¬æ—¶ä¼šæœ‰ä¸ä¸€è‡´çš„æƒ…å†µã€‚&lt;/p>
&lt;p>è¿™ç§ä¸€è‡´æ€§æ¨¡åž‹è¢«ç§°ä¸º â€”â€” â€œæœ€ç»ˆä¸€è‡´æ€§â€ã€‚&lt;/p>
&lt;h2 id="ä¸»è§’ç™»åœºwindows-azure-storage">ä¸»è§’ç™»åœºï¼šWindows Azure Storage &lt;a href="#%e4%b8%bb%e8%a7%92%e7%99%bb%e5%9c%bawindows-azure-storage" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>Windows Azure Storageï¼ˆä»¥ä¸‹ç®€ç§°WASï¼‰é‡‡ç”¨äº†å¤šç§ä¸€è‡´æ€§ç®—æ³•ï¼Œåœ¨æä¾›è¾ƒé«˜æ€§èƒ½æœåŠ¡çš„åŒæ—¶ï¼Œæ¥åŠªåŠ›ä¿è¯å­˜å‚¨ç³»ç»Ÿçš„CAPæ€§è´¨ã€‚&lt;/p>
&lt;p>å…¶ä¸­WASä½¿ç”¨äº†ä¸€äº›åˆ›æ–°æ€§çš„ç®—æ³•ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æ˜¯å…ˆä»Žå®ƒçš„æ•´ä½“æž¶æž„è°ˆèµ·ã€‚&lt;/p>
&lt;ul>
&lt;li>Windows Azure Storageçš„æž¶æž„&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-9-19/98830090.jpg" alt="">&lt;/p>
&lt;p>WASä»Žæž¶æž„ä¸Šåˆ†ä¸ºä¸‰å±‚ï¼Œåˆ†åˆ«æ˜¯å‰ç«¯ï¼ˆFE Layerï¼‰ï¼Œåˆ†åŒºå±‚ï¼ˆPartition Layerï¼‰å’Œæ•°æ®æµå±‚ï¼ˆStream Layerï¼‰ã€‚è¿™ä¸‰å±‚ä»ŽåŠŸèƒ½ä¸Šå„æœ‰åˆ†å·¥ï¼Œä½†æ˜¯åˆåˆ†åˆ«è§£è€¦ï¼Œå¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šã€‚&lt;/p>
&lt;p>ä¸‹é¢æˆ‘ä»¬è‡ªåº•å‘ä¸Šçš„è®¨è®ºä¸€ä¸‹å„å±‚ä¹‹é—´çš„åŠŸèƒ½ä¸Žè”ç³»ã€‚&lt;/p>
&lt;h2 id="was---æ•°æ®æµå±‚">WAS - æ•°æ®æµå±‚ &lt;a href="#was---%e6%95%b0%e6%8d%ae%e6%b5%81%e5%b1%82" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>æ•°æ®æµåŒ…å«ç€å„ç§æ•°æ®æ“ä½œï¼Œæ“ä½œåŒ…å«æ’å…¥ã€ä¿®æ”¹ã€åˆ é™¤ç­‰åŸºæœ¬æ“ä½œï¼Œâ€œæµâ€åˆ™å¯ä»¥çœ‹åšæ˜¯ä¸€æ¡æ— é™é•¿çš„é˜Ÿåˆ—ã€‚&lt;/p>
&lt;h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æµç»“æž„">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æµç»“æž„ï¼Ÿ &lt;a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e4%bd%bf%e7%94%a8%e6%b5%81%e7%bb%93%e6%9e%84" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>ä¸ºä»€ä¹ˆè¦ç”¨æµç»“æž„å‘¢ï¼ŒåŽŸå› éžå¸¸ç®€å•ï¼Œå› ä¸ºæµä¸­çš„æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼Œå¦åˆ™ä¼šé€ æˆä¸ç¡®å®šçš„ç»“æžœã€‚&lt;/p>
&lt;p>ä¾‹å¦‚æˆ‘ä»¬çŽ°åœ¨æœ‰ä¸‰ä¸ªæ“ä½œï¼š&lt;/p>
&lt;p>æ“ä½œ1ï¼šæ’å…¥å€¼x=1 &lt;br>
æ“ä½œ2ï¼šä¿®æ”¹è¯¥å€¼ä¸ºx=2 &lt;br>
æ“ä½œ3ï¼šä¿®æ”¹è¯¥å€¼ä¸ºx=5&lt;/p>
&lt;p>å¦‚æžœæ“ä½œæ˜¯æŒ‰ç…§é¡ºåºæ¥åšçš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬èŽ·å¾—çš„å€¼ä¸ºx=5ã€‚ä½†æ˜¯å¦‚æžœæˆ‘ä»¬å°†æ“ä½œ2å’Œæ“ä½œ3è°ƒæ¢ä¹‹åŽï¼Œé‚£ä¹ˆæˆ‘ä»¬èŽ·å¾—çš„å€¼ä¸ºx=2ï¼›å¦‚æžœæˆ‘ä»¬å°†æ“ä½œ1æ”¾ç½®åœ¨æ“ä½œ2æˆ–æ“ä½œ3ä¹‹åŽï¼Œæˆ‘ä»¬å°±åœ¨ä¿®æ”¹ä¸€ä¸ªä¸å­˜åœ¨çš„å€¼ï¼Œè¿™åŠ¿å¿…ä¼šé€ æˆé”™è¯¯ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ï¼Œæ•°æ®æµçš„æœ‰åºæ€§ä¿è¯äº†æ“ä½œçš„â€œå›žæ”¾ä¸€è‡´æ€§â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸åŒçš„æ•°æ®æµåº”ç”¨åœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼ŒèŽ·å¾—çš„æœ€ç»ˆçŠ¶æ€æ˜¯ä¸€è‡´çš„ã€‚&lt;/p>
&lt;p>åŒæ—¶ï¼Œç”±äºŽHDDçš„é¡ºåºè¯»å†™æ€§èƒ½ä¼˜äºŽéšæœºè¯»å†™æ€§èƒ½ã€‚ä½¿ç”¨æµæ•°æ®ç»“æž„å¯ä»¥å°†å†™å…¥è¯·æ±‚é¡ºåºåŒ–ï¼Œè¿½åŠ å†™å…¥ç£ç›˜ï¼Œåœ¨å»‰ä»·çš„ç¡¬ä»¶ä¸ŠèŽ·å¾—æœ€å¥½çš„æ€§èƒ½ã€‚&lt;/p>
&lt;h5 id="ç§‘æ™®æ—¶é—´hddä¸Žssd">ç§‘æ™®æ—¶é—´ï¼šHDDä¸ŽSSD &lt;a href="#%e7%a7%91%e6%99%ae%e6%97%b6%e9%97%b4hdd%e4%b8%8essd" class="anchor">ðŸ”—&lt;/a>&lt;/h5>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-10-10/63227271.jpg" alt="image">&lt;/p>
&lt;p>HDDæŒ‡çš„æ˜¯Hard Disk Driveï¼Œåˆç§°Spinning Diskï¼Œæ˜¯è®¡ç®—æœºä½¿ç”¨çš„ä¸€ç§ä»¥ç£æ€§ç¢Ÿç‰‡å­˜å‚¨æ•°æ®çš„ä¸€ç§éžæ˜“å¤±æ€§å­˜å‚¨è®¾å¤‡ï¼ˆäººè¯å°±æ˜¯ï¼šæ–­ç”µåŽä¸ä¸¢æ•°æ®ï¼‰ã€‚æ•°æ®å­˜å‚¨åœ¨åŒå¿ƒåœ†ç£é“ä¸Šï¼Œå·¥ä½œæ—¶ç¢Ÿç‰‡ä¼šæ—‹è½¬ï¼ˆå’ŒCDæœºä¸€æ ·ï¼‰ï¼Œç£å¤´ä¼šç§»åŠ¨åˆ°ç›¸åº”çš„ç£é“ä¸Šè¿›è¡Œæ•°æ®çš„è¯»å†™ï¼ˆCDæœºç”¨çš„æ˜¯å…‰å¤´ï¼‰ã€‚æ‰€ä»¥ï¼Œé¡ºåºè¯»å†™æ—¶ï¼ŒHDDçš„æ€§èƒ½ä¼šæ¯”éšæœºè¯»å†™è¦å¥½ï¼Œå› ä¸ºéšæœºè¯»å†™å¸¦æ¥çš„å¤§é‡ç£ç›˜å¯»å€ä¼šè®©ç£å¤´ä¸æ–­ç§»åŠ¨ï¼Œä»Žè€Œæ‹–æ…¢æ€§èƒ½ã€‚&lt;/p>
&lt;p>ä¸Žæ­¤åŒæ—¶ï¼Œç”±äºŽç¢Ÿç‰‡å†…å¼§çš„æ—‹è½¬&lt;strong>çº¿é€Ÿåº¦&lt;/strong>è¦å°äºŽå¤–å¼§ï¼Œæ‰€ä»¥å¤–å¼§çš„è¯»å†™æ€§èƒ½ä¼šä¼˜äºŽå†…å¼§ã€‚&lt;/p>
&lt;p>SSDæŒ‡çš„æ˜¯Solid State Diskï¼Œå³å›ºæ€ç¡¬ç›˜ï¼Œä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„éžæ˜“å¤±æ€§å­˜å‚¨è®¾å¤‡ã€‚å…¶ä½¿ç”¨é—ªå­˜èŠ¯ç‰‡æ¥å­˜å‚¨æ•°æ®ã€‚ç”±äºŽå…¶å¹¶ä¸åƒHDDä¸€æ ·éœ€è¦ç‰©ç†ä¸Šç§»åŠ¨ç£å¤´æ¥è¿›è¡Œå¯»å€ï¼Œåœ¨é¡ºåºå†™å…¥ä¸ŽHDDæˆ–ç•¥å¼ºäºŽHDDç£ç›˜çš„åŒæ—¶ï¼Œéšæœºå†™å…¥æ€§èƒ½è¦è¿œè¿œå¼ºäºŽHDDï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è£…ç”µè„‘éƒ½å–œæ¬¢æŠŠç³»ç»Ÿè£…åˆ°SSDç›˜ä¸Šï¼‰ã€‚&lt;/p>
&lt;p>ä½†æ˜¯SSDåœ¨æˆæœ¬å’Œè´¨é‡ä¸Šå¼±äºŽHDDç£ç›˜ã€‚1TBçš„SSDçš„ä»·æ ¼çº¦ä¸º400åˆ€ï¼Œè€Œ1TBçš„HHDä»·æ ¼ä»…ä¸º80~100åˆ€ï¼ˆ2017å¹´10æœˆ&lt;a href="https://pcpartpicker.com/trends/internal-hard-drive/">æ•°æ®&lt;/a>ï¼‰ï¼›SSDæœ‰å†™å…¥æ¬¡æ•°çš„é™åˆ¶ï¼Œå½“é—ªå­˜èŠ¯ç‰‡æŸåæ—¶ï¼Œä¼šå½±å“SSDçš„æ€§èƒ½ã€‚ç›¸æ¯”è€Œè¨€ï¼ŒHDDçš„æŠ€æœ¯çš„æ€§èƒ½æ›´ç¨³å®šï¼ŒæŠ€æœ¯æ›´ä¸ºæˆç†Ÿï¼Œè´¨é‡ä¼šæ›´å¥½ä¸€äº›ã€‚&lt;/p>
&lt;h3 id="æ•°æ®æµçš„ä¸€è‡´æ€§ç®—æ³•">æ•°æ®æµçš„ä¸€è‡´æ€§ç®—æ³• &lt;a href="#%e6%95%b0%e6%8d%ae%e6%b5%81%e7%9a%84%e4%b8%80%e8%87%b4%e6%80%a7%e7%ae%97%e6%b3%95" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>å› ä¸ºè¦ä¿è¯å¯ç”¨æ€§ï¼Œæ‰€ä»¥æ•°æ®æµå¿…é¡»è¦æ˜¯å¤šæœºçš„ï¼Œè€Œå¤šæœºç³»ç»Ÿå°±è¦é¢ä¸´ä¸€è‡´æ€§é—®é¢˜ã€‚WASæå‡ºäº†ä¸€ç§â€œé“¾å¼æäº¤â€æ–¹æ³•æ¥ä¿è¯äº†åˆ†å¸ƒå¼æ•°æ®æµçš„ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-10-7/32688212.jpg" alt="">&lt;/p>
&lt;p>ä¸Žä¹‹å‰æåˆ°çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§çš„å¤šæœºå¹¶è¡Œçš„ç®—æ³•ä¸åŒï¼ŒWASåœ¨æ•°æ®æµå±‚é‡‡ç”¨äº†ä¸€ç§â€œé“¾å¼â€çš„æäº¤ç®—æ³•ï¼š&lt;/p>
&lt;ol>
&lt;li>å½“å‰¯æœ¬1æŽ¥å—åˆ°æ•°æ®åŽï¼Œä¼šé¦–å…ˆå°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œä¹‹åŽå†å°†ç›¸åŒçš„è¯·æ±‚è½¬å‘ç»™å‰¯æœ¬2ï¼›&lt;/li>
&lt;li>å‰¯æœ¬2èŽ·å¾—æ•°æ®åŽï¼ŒæŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå†è¯·è¯·æ±‚è½¬å‘ç»™å‰¯æœ¬3ï¼›&lt;/li>
&lt;li>å‰¯æœ¬3å°†æ•°æ®æˆåŠŸæŒä¹…åŒ–åŽï¼Œè¿”å›žACKï¼›&lt;/li>
&lt;li>å‰¯æœ¬2æŽ¥æ”¶åˆ°å‰¯æœ¬3çš„ACKæ¶ˆæ¯åŽï¼ŒåŒæ ·è¿”å›žACKï¼›&lt;/li>
&lt;li>å‰¯æœ¬1æŽ¥æ”¶åˆ°å‰¯æœ¬2çš„ACKæ¶ˆæ¯åŽï¼Œå‘è¯·æ±‚æ–¹è¿”å›žACKã€‚&lt;/li>
&lt;/ol>
&lt;p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå½“æ•°æ®è¯·æ±‚è¿”å›žACKåŽï¼Œä¸€å®šæœ‰ä¸‰ä¸ªï¼ˆæˆ–ä»¥ä¸Šï¼Œæ ¹æ®ç³»ç»Ÿçš„å‚æ•°è€Œå®šï¼‰å‰¯æœ¬åŒæ—¶å†™å…¥å¹¶æŒä¹…åŒ–è¿™æ¡è¯·æ±‚ã€‚æ­¤æ—¶ä¸‰ä¸ªå‰¯æœ¬ä¸€å®šæ˜¯â€œå¼ºä¸€è‡´â€çš„ã€‚&lt;/p>
&lt;p>ä¸è¿‡ï¼Œå¦‚æžœé“¾å¼æäº¤å½“ä¸­æœ‰ä»»ä½•ä¸€ä¸ªçŽ¯èŠ‚å‡ºçŽ°äº†é—®é¢˜ï¼Œæ¯”å¦‚æœºå™¨å¤±æ•ˆã€ç½‘ç»œè¶…æ—¶ç­‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦é¢ä¸´æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚WASä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†è¢«ç§°ä¸ºâ€œå°å­˜â€çš„æœºåˆ¶ã€‚&lt;/p>
&lt;h3 id="å°å­˜sealingæœºåˆ¶">å°å­˜ï¼ˆsealingï¼‰æœºåˆ¶ &lt;a href="#%e5%b0%81%e5%ad%98sealing%e6%9c%ba%e5%88%b6" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>ä¸Šæ–‡è¯´åˆ°ï¼Œæ•°æ®æµæ˜¯ä¸€ä¸ªæ— é™é•¿çš„é˜Ÿåˆ—ï¼Œåªèƒ½åœ¨å°¾éƒ¨è¿½åŠ å†™å…¥ã€‚æ‰€ä»¥æˆ‘ä»¬å¦‚æžœæƒ³è¦å­˜å‚¨è¿™æ¡æ•°æ®æµï¼Œå°±åŠ¿å¿…è¦æŠŠè¿™æ¡æ•°æ®æµåˆ†ä¸ºå¤šä¸ªèŠ‚ï¼Œå¹¶æŠŠå®ƒä»¬åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„æœºå™¨ä¸Šã€‚å¦åˆ™æ•°æ®æµçš„å¤§å°å°±è¦å—é™äºŽå•æœºçš„å­˜å‚¨å®¹é‡ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çœ‹åˆ°çš„ã€‚&lt;/p>
&lt;p>åˆç”±äºŽæ•°æ®æµçš„å°¾éƒ¨è¿½åŠ å†™å…¥ç‰¹æ€§ï¼Œæ‰€ä»¥æ•°æ®æµè¢«åˆ†ä¸ºå¤šä¸ªèŠ‚ä¹‹åŽï¼Œåªæœ‰æœ€åŽä¸€ä¸ªèŠ‚æ˜¯å¯è¯»å†™çš„ï¼Œå…¶å®ƒçš„æ‰€æœ‰èŠ‚éƒ½æ˜¯åªè¯»çš„ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-10-7/46032879.jpg" alt="">&lt;/p>
&lt;p>æˆ‘ä»¬å°†æŠŠå¯è¯»å¯è¿½åŠ çš„æ•°æ®æµè½¬åŒ–ä¸ºåªè¯»çš„æ•°æ®æµçš„æ“ä½œç§°ä¸ºâ€œå°å­˜â€ã€‚&lt;/p>
&lt;p>å°å­˜çš„ä½œç”¨ä¹‹ä¸€ï¼Œå°±æ˜¯åœ¨æ•°æ®æµçš„ä¸€èŠ‚è¿‡å¤§çš„æ—¶å€™ï¼Œåœæ­¢å†™å…¥è¯¥èŠ‚ï¼Œä½¿å¾—æ•°æ®èŠ‚çš„å¤§å°å¯æŽ§ã€‚&lt;/p>
&lt;p>ç¬¬äºŒä¸ªä½œç”¨ï¼Œæ˜¯ä¸Šé¢æˆ‘ä»¬æåˆ°çš„ï¼Œåœ¨â€œé“¾å¼æäº¤â€å¤±è´¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå°†æ‰€æœ‰çš„æ•°æ®æµå‰¯æœ¬å°å­˜ï¼Œå°å­˜çš„æ—¶å€™å–æ‰€æœ‰å‰¯æœ¬çš„æ•°æ®çš„äº¤é›†ã€‚è¿™æ ·å°±èƒ½æŽ’é™¤å› ä¸ºå†™å…¥å¤±è´¥è€Œä¸ä¸€è‡´çš„æ•°æ®ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-9-12/93804080.jpg" alt="">&lt;/p>
&lt;blockquote>
&lt;p>æ­¤æ—¶æœ‰åŒå­¦ä¼šé—®ï¼Œå¦‚æžœæˆ‘ä»¬å·²ç»æˆåŠŸçš„å†™å…¥äº†ä¸‰ä¸ªå‰¯æœ¬ï¼Œä½†æ˜¯ç”±äºŽç½‘ç»œåŽŸå› å¹¶æ²¡èƒ½å‘è¯·æ±‚æ–¹è¿”å›žACKã€‚è¯·æ±‚æ–¹ä¼šè®¤ä¸ºè¿™æ®µæ•°æ®å†™å…¥å¤±è´¥ã€‚ä½†æ˜¯æˆ‘ä»¬åœ¨å°å­˜çš„æ—¶å€™ï¼Œä»ç„¶ä¼šå°†è¿™éƒ¨åˆ†æ•°æ®å°å­˜åœ¨æ•°æ®èŠ‚ä¸­ã€‚è¿™ç§æƒ…å†µæ€Žä¹ˆå¤„ç†å‘¢ï¼Ÿ &lt;br>
è¿™ä¸ªé—®é¢˜åŽé¢ä¼šæœ‰è§£ç­”ï¼Œè¯·è€å¿ƒé˜…è¯»å“¦~&lt;/p>&lt;/blockquote>
&lt;h3 id="æ•°æ®æµå±‚çš„æž¶æž„">æ•°æ®æµå±‚çš„æž¶æž„ &lt;a href="#%e6%95%b0%e6%8d%ae%e6%b5%81%e5%b1%82%e7%9a%84%e6%9e%b6%e6%9e%84" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-10-8/29641653.jpg" alt="">&lt;/p>
&lt;p>åœ¨å‰é¢çš„æ–‡ç« é‡Œï¼Œæ²¡æœ‰æåˆ°â€œæ•°æ®æµç®¡ç†å™¨â€ï¼ˆStream Managerï¼Œç®€ç§°SMï¼‰è¿™ä¸ªè§’è‰²ã€‚è¿™ä¸ªè§’è‰²åœ¨æ•´ä¸ªæ•°æ®æµå±‚æ‰®æ¼”äº†ä¸€ä¸ªå¾ˆé‡è¦çš„è§’è‰²ã€‚&lt;/p>
&lt;p>SMæ˜¯ç”±ä¸€ä¸ªå°åž‹é›†ç¾¤ä½¿ç”¨paxosé€‰ä¸¾å‡ºæ¥çš„masterèŠ‚ç‚¹ï¼Œå…¶å®ƒèŠ‚ç‚¹å¤‡ç”¨ã€‚SMåªç”¨æ¥ç®¡ç†æ•´ä¸ªæ•°æ®æµçš„çŠ¶æ€ï¼Œå¹¶ä¸è´Ÿè´£å…·ä½“çš„è¯»å†™æ“ä½œã€‚&lt;/p>
&lt;p>SMçš„ä¸»è¦åŠŸèƒ½æœ‰ï¼š&lt;/p>
&lt;ol>
&lt;li>ç»Ÿè®¡èŠ‚ç‚¹çŠ¶æ€&lt;/li>
&lt;li>ç›‘æŽ§èŠ‚ç‚¹å¥åº·çŠ¶å†µ&lt;/li>
&lt;li>è´Ÿè½½å‡è¡¡&lt;/li>
&lt;li>å°å­˜ã€åˆ›å»ºæ–°çš„æ•°æ®èŠ‚&lt;/li>
&lt;li>å¤‡ä»½ä¸Žåžƒåœ¾å›žæ”¶&lt;/li>
&lt;/ol>
&lt;p>SMç®¡ç†ç€ä¸€æ‰¹å­˜å‚¨ç€æ•°æ®èŠ‚çš„èŠ‚ç‚¹ï¼ˆExtent Nodeï¼Œç®€ç§°ENï¼‰ï¼Œè¿™äº›èŠ‚ç‚¹å­˜å‚¨ç€æ•°æ®æµä¸­çš„èŠ‚ã€‚è¿™äº›èŠ‚ç‚¹ç›¸äº’é€šä¿¡ï¼Œä»¥å®Œæˆæäº¤ã€å¤‡ä»½ç­‰åŠŸèƒ½ã€‚&lt;/p>
&lt;p>ENèŠ‚ç‚¹ä¸­é‡‡ç”¨äº†é¢„å†™å…¥æ—¥å¿—ã€‚æ¯ä¸€æ¬¡å†™å…¥æ“ä½œï¼ŒENä¼šå¹¶å‘çš„&lt;/p>
&lt;ol>
&lt;li>è¿½åŠ å†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶å°†æ–°æ•°æ®å†™å…¥å†…å­˜ç¼“å­˜&lt;/li>
&lt;li>å†™å…¥æŒä¹…åŒ–å­˜å‚¨&lt;/li>
&lt;/ol>
&lt;p>å½“äºŒè€…æœ‰ä¸€ä¸ªå®Œæˆï¼Œå°±è¿”å›žæˆåŠŸæ ‡è®°ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œç”±äºŽHDDè¿½åŠ å†™å…¥çš„æ€§èƒ½éžå¸¸å¥½å¹¶ä¸”ç¨³å®šï¼Œæ‰€ä»¥æ­¥éª¤1çš„å“åº”æ—¶é—´æ˜¯ç¨³å®šçš„å¹¶ä¸”å¯ä»¥ä¼°è®¡çš„ã€‚ä¿è¯äº†ç³»ç»Ÿæ•´ä½“çš„å“åº”æ—¶é—´ä¸å‡ºçŽ°å¤§çš„é¢ ç°¸ã€‚&lt;/p>
&lt;h2 id="was---åˆ†åŒºå±‚">WAS - åˆ†åŒºå±‚ &lt;a href="#was---%e5%88%86%e5%8c%ba%e5%b1%82" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>åˆ†åŒºå±‚ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè¢«ç§°ä¸ºâ€œå¯¹è±¡è¡¨â€ï¼ˆObject Tableï¼‰çš„æŠ½è±¡ã€‚å¯¹è±¡è¡¨æä¾›äº†æ’å…¥ã€æ›´æ–°ã€åˆ é™¤åŠŸèƒ½ã€‚&lt;/p>
&lt;p>ä¸ºäº†æä¾›å®¹é‡æ”¯æŒï¼Œä¸€ä¸ªå¯¹è±¡è¡¨ä¼šè¢«åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼ˆè¿™å°±æ˜¯â€œåˆ†åŒºå±‚â€åå­—çš„æ¥æºï¼‰ã€‚åˆ†åŒºä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä¸ä¼šäº’ç›¸å½±å“ã€‚&lt;/p>
&lt;p>å¯¹è±¡è¡¨æž„å»ºåœ¨æ•°æ®æµå±‚ä¹‹ä¸Šã€‚ä½†æ˜¯ä»Žç›´è§‚ä¸Šæ¥è®²ï¼Œè¡¨ç»“æž„å’Œæµç»“æž„æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œé‚£ä¹ˆåˆ†åŒºå±‚æ˜¯å¦‚ä½•å°†è¡¨å­˜å‚¨åœ¨æ•°æ®æµå±‚çš„å‘¢ï¼Ÿ&lt;/p>
&lt;h3 id="lsm-treelog-structed-merge-tree">LSM Treeï¼ˆLog-Structed Merge-Treeï¼‰ &lt;a href="#lsm-treelog-structed-merge-tree" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;blockquote>
&lt;p>æ®µå­ï¼š &lt;br>
ä¸€ä¸ªå­¦ç”ŸèƒŒç€æ»¡ä¹¦åŒ…çš„ä¹¦è¿›å…¥å›¾ä¹¦é¦†ï¼Œå®å®å®ï¼Œå›¾ä¹¦é¦†çš„æŠ¥è­¦å™¨å“äº†ï¼Œå­¦ç”Ÿèµ¶ç´§æŠŠä¹¦ä»Žä¹¦åŒ…å€’å‡ºæ¥ï¼Œå‡†å¤‡ä¸€æœ¬ä¸€æœ¬çš„éªŒè¯ï¼Œçœ‹æ˜¯å“ªæœ¬ä¹¦æœ‰é—®é¢˜ã€‚ &lt;br>
ä¸€æ—æ‰«åœ°çš„é˜¿å§¨çœ‹ä¸ä¸‹åŽ»äº†ï¼Œè¿‡æ¥æŠŠä¹¦åˆ†æˆäº†ä¸¤æŒªï¼Œå…ˆæ£€æŸ¥ç¬¬ä¸€æŒªï¼Œå®å®å®ï¼ŒæŠ¥è­¦å™¨å“äº†ï¼Œè¯´æ˜Žè¿™ä¸€æŒªæœ‰é—®é¢˜ï¼ŒåˆæŠŠè¿™ä¸€æŒªåˆ†æˆä¸¤æŒªï¼Œå…ˆæ£€æŸ¥å…¶ä¸­ä¸€æŒªï¼Œè¦æ˜¯å“ªä¸€æŒªå“äº†ï¼Œå°±æŠŠè¿™ä¸€æŒªç»§ç»­åˆ†æˆä¸¤æŒªï¼Œç»§ç»­æ£€æŸ¥ï¼Œä¸åˆ°ä¸‰å›žåˆï¼Œå¤§å¦ˆå°±æŠŠæœ‰é—®é¢˜çš„å“ªæœ¬ä¹¦æ‰¾å‡ºæ¥äº†ã€‚ &lt;br>
å¤§å¦ˆç”¨é„™è§†çš„çœ¼ç¥žçœ‹ç€é‚£å­¦ç”Ÿï¼Œä»¿ä½›åœ¨è¯´è¿žOï¼ˆnï¼‰è·ŸOï¼ˆlog nï¼‰éƒ½åˆ†ä¸æ¸…æ¥šã€‚&lt;/p>&lt;/blockquote>
&lt;p>æˆ‘ä»¬ä¸Šæ–‡ä¸­æåˆ°ï¼ŒHDDç£ç›˜å¯ä»¥åœ¨è¾ƒä½Žæˆæœ¬ä¸‹æä¾›å¾ˆå¥½çš„è¿½åŠ å†™å…¥æ€§èƒ½ï¼Œä½†æ˜¯å¯¹äºŽéšæœºè¯»å†™çš„æ€§èƒ½ä¸ä½³ã€‚&lt;/p>
&lt;p>ä½†æ˜¯å¯¹äºŽè¡¨ç»“æž„æ¥è¯´ï¼Œå¿…ç„¶æ¶‰åŠåˆ°å¤§é‡çš„éšæœºè¯»å†™ã€‚å› ä¸ºè¾“å…¥æ•°æ®å°±åƒæ‰“ä¹±è¿‡çš„æ‰‘å…‹ç‰Œï¼Œå¾ˆéš¾ä¿è¯è§„å¾‹æ€§ï¼›è€Œæˆ‘ä»¬åˆè¦æŠŠç‰¹å®šçš„è¾“å…¥æ•°æ®æ”¾åˆ°ç‰¹å®šçš„è¡Œä¸Šï¼Œæ‰€ä»¥æ•°æ®çš„å†™å…¥ä½ç½®å¿…ç„¶æ˜¯éšæœºçš„ã€‚æ‰€ä»¥ï¼Œç›´æŽ¥åœ¨ç£ç›˜ä¸­å­˜å‚¨è¡¨ç»“æž„æ˜¯éžå¸¸ä½Žæ•ˆçš„ã€‚&lt;/p>
&lt;p>é‚£ä¹ˆLSM Treeæ˜¯æ€Žä¹ˆè§£å†³é—®é¢˜çš„å‘¢ï¼Ÿ&lt;/p>
&lt;p>é¦–å…ˆæˆ‘ä»¬æŠŠå·²æœ‰çš„æ•°æ®æ ¹æ®keyè¿›è¡ŒæŽ’åºï¼Œå­˜å‚¨åœ¨ç£ç›˜ä¸­ï¼Œæ ‡è®°ç¬¬0ä»£ã€‚æ‰€æœ‰å†™å…¥ç£ç›˜çš„æ•°æ®éƒ½æ˜¯æœ‰åºçš„ã€åªè¯»çš„ã€‚&lt;/p>
&lt;p>å½“æœ‰æ–°çš„æ•°æ®å†™å…¥æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å…¶ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚å½“æ•°æ®è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼æ—¶ï¼Œæˆ‘ä»¬å°†å†…å­˜ä¸­çš„æ•°æ®è¿›è¡ŒæŽ’åºï¼Œå¹¶å†™å…¥ç£ç›˜ã€‚è¿™ä¸€éƒ¨åˆ†æ•°æ®è¢«æ ‡è®°ä¸ºç¬¬1ä»£ã€‚&lt;/p>
&lt;p>ä¹‹åŽçš„æ•°æ®ä¾æ¬¡ç±»æŽ¨ï¼Œè¢«æ ‡è®°ä¸ºç¬¬2ä»£ï¼Œç¬¬3ä»£&amp;hellip;ç¬¬nä»£ã€‚ä»£æ•°è¶Šé«˜ï¼Œè¡¨ç¤ºæ•°æ®è¶Šæ–°ã€‚å¹¶ä¸”ä»£æ•°é«˜çš„æ•°æ®åœ¨é€»è¾‘ä¸Šå¯ä»¥è¦†ç›–ä»£æ•°ä½Žçš„æ•°æ®ã€‚&lt;/p>
&lt;p>åœ¨æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆæ£€ç´¢å†…å­˜ä¸­çš„ç¼“å­˜æ•°æ®ï¼Œå¦‚æžœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¾æ¬¡ä»Žç¬¬nä»£çš„æ•°æ®æŸ¥è¯¢åˆ°ç¬¬0ä»£ã€‚å¦‚æžœä»ç„¶æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±è¿”å›žæœªæ‰¾åˆ°ã€‚ç”±äºŽæ‰€æœ‰çš„æŸ¥è¯¢éƒ½ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæ•ˆçŽ‡è¾ƒé«˜ã€‚åŒæ—¶æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨[å¸ƒéš†è¿‡æ»¤å™¨][6]ï¼Œå¿«é€Ÿåˆ¤å®šä¸€ä¸ªkeyæ˜¯å¦åœ¨LSM Treeä¸­ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ç»†å¿ƒçš„åŒå­¦ä¼šå‘çŽ°ï¼ŒæŒ‰ç…§ä¸Šé¢æè¿°çš„ç®—æ³•ï¼ŒLSM Treeçš„ä»£æ•°ä¼šæ— é™è†¨èƒ€ä¸‹åŽ»ï¼Œæœ€ç»ˆå¯¼è‡´éžå¸¸å·®çš„çš„æ£€ç´¢æ•ˆæžœã€‚åœ¨è®ºæ–‡ä¸­æ²¡æœ‰æ˜Žç¡®æåˆ°LSM Treeçš„è°ƒæ•™å‚æ•°ï¼Œä½†æ˜¯æˆ‘çŒœæµ‹å…¶ä»£æ•°ä¸ä¼šå¤ªå¤šã€‚å¹¶ä¸”åœ¨å†—ä½™æ•°æ®è¿‡å¤šæ—¶ï¼Œä¼šè¿›è¡Œåžƒåœ¾å›žæ”¶ï¼Œä¿è¯æ£€ç´¢çš„æ•ˆçŽ‡ã€‚ &lt;br>
åŒæ—¶è¿™ä¹Ÿæé†’æˆ‘ä»¬åœ¨ä½¿ç”¨WASçš„æ—¶å€™ï¼Œå°½é‡ä¸è¦å‘æŸä¸€ä¸ªæˆ–æŸä¸€äº›è¿žç»­çš„åˆ†åŒºè¿žç»­å†™å…¥å¤§é‡æ•°æ®ï¼Œå¦åˆ™ä¼šå¯¼è‡´åˆ†åŒºå±‚çš„æ€§èƒ½é€€åŒ–ã€‚&lt;/p>&lt;/blockquote>
&lt;h3 id="åˆ†åŒºå±‚ä½¿ç”¨çš„æ•°æ®æµ">åˆ†åŒºå±‚ä½¿ç”¨çš„æ•°æ®æµ &lt;a href="#%e5%88%86%e5%8c%ba%e5%b1%82%e4%bd%bf%e7%94%a8%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b5%81" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>åˆ†åŒºå±‚ä½¿ç”¨æ•°æ®æµæ¥ä¿å­˜LSM Treeï¼Œä½¿ç”¨é¡ºåºå†™å…¥ä»£æ›¿éšæœºå†™å…¥ä»¥èŽ·å¾—æ€§èƒ½æå‡ï¼Œè¿™æ¡æµè¢«ç§°ä¸ºâ€œè¡Œæ•°æ®æµâ€ï¼ˆRow Data Streamï¼‰ã€‚&lt;/p>
&lt;p>ä¸Žæ­¤åŒæ—¶ï¼Œåˆ†åŒºå±‚è¿˜ä½¿ç”¨äº†â€œäºŒè¿›åˆ¶æ•°æ®æµâ€ï¼ˆBlob Data Streamï¼‰æ¥ä¿å­˜äºŒè¿›åˆ¶æ•°æ®ã€‚ä»¥åŠâ€œæäº¤æ—¥å¿—æµâ€ï¼ˆCommit Log Streamï¼‰æ¥æŒä¹…åŒ–é¢„å†™å…¥æ—¥å¿—ã€‚&lt;/p>
&lt;p>åˆ†åŒºå±‚å‘æ•°æ®æµå±‚å†™å…¥æ—¶ï¼Œåªæœ‰å½“æ•°æ®æµå±‚è¿”å›žACKåŽï¼Œæ‰è®¤ä¸ºå†™å…¥æˆåŠŸã€‚æ‰€ä»¥ï¼Œåœ¨æ•°æ®æµå±‚å†™å…¥æˆåŠŸï¼Œä½†æœªèƒ½è¿”å›žACKæ—¶ï¼Œè™½ç„¶æ•°æ®æµå±‚ä¿ç•™äº†æ•°æ®ï¼Œä½†æ˜¯åˆ†åŒºå±‚å¹¶ä¸èƒ½è®¿é—®è¿™éƒ¨åˆ†æ•°æ®ï¼Œæˆ‘ä»¬å°±åœ¨åˆ†åŒºå±‚ä¿è¯äº†æ•°æ®çš„æ­£ç¡®æ€§ã€‚&lt;/p>
&lt;h3 id="åˆ†åŒºå±‚çš„ä¸€è‡´æ€§ä¿è¯">åˆ†åŒºå±‚çš„ä¸€è‡´æ€§ä¿è¯ &lt;a href="#%e5%88%86%e5%8c%ba%e5%b1%82%e7%9a%84%e4%b8%80%e8%87%b4%e6%80%a7%e4%bf%9d%e8%af%81" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>åˆ†åŒºå±‚çš„æŒä¹…åŒ–ä¿¡æ¯ä¾èµ–äºŽæ•°æ®æµå±‚ï¼Œæ‰€ä»¥å¦‚æžœåˆ†åŒºå±‚ä½¿ç”¨åœ¨çº¿å¤šå‰¯æœ¬ï¼Œå°±ä¼šé‡åˆ°èŠ‚ç‚¹çŠ¶æ€ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶ä¸åŒçš„èŠ‚ç‚¹åŠ è½½äº†ç›¸åŒçš„æ•°æ®ï¼Œä½†æ˜¯åŠ è½½é€Ÿåº¦æœ‰å¿«æœ‰æ…¢ï¼Œå¾ˆéš¾ä¿è¯èŠ‚ç‚¹ä¹‹é—´ä»¥ä¸€ä¸ªåŒæ ·çš„çŠ¶æ€å¯¹å¤–æœåŠ¡ã€‚åŒæ—¶ï¼Œåœ¨çº¿å¤šå‰¯æœ¬çš„å†™å…¥ä¼šå¼•å…¥ç«žæ€ï¼Œå¦‚æžœå†åŠ é”ï¼Œå°±ä¼šå¤§å¤§çš„å½±å“ç³»ç»Ÿçš„æ•ˆçŽ‡ã€‚&lt;/p>
&lt;p>é‚£ä¹ˆWASæ˜¯æ€Žä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿ&lt;/p>
&lt;p>ç­”ï¼šä¸èƒ½ä¿è¯ä¸€è‡´æ€§å°±ä¸è¦ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;p>è¿™æ ·çš„ä¸è¦ä¸€è‡´æ€§å¹¶ä¸æ˜¯æ”¾ä»»èŠ‚ç‚¹é—´çš„çŠ¶æ€ä¸åŒæ­¥ï¼Œè€Œæ˜¯æ¯ä¸€ä¸ªåˆ†åŒºåªä½¿ç”¨ä¸€ä¸ªåœ¨çº¿æœåŠ¡èŠ‚ç‚¹ã€‚å¯¹äºŽå”¯ä¸€ä¸€ä¸ªèŠ‚ç‚¹æ¥è¯´ï¼Œä¸€è‡´æ€§å°±æ˜¯ä¸å­˜åœ¨çš„ã€‚ï¼ˆæ˜¯ä¸æ˜¯éžå¸¸æš´åŠ›ï¼‰&lt;/p>
&lt;p>æ‰€ä»¥ï¼Œåœ¨åŒä¸€æ—¶é—´åªæœ‰ä¸€å°æœºå™¨å¯¹å¤–æä¾›æœåŠ¡ï¼ˆè¯»+å†™ï¼‰ã€‚å…¶å®ƒçš„å‰¯æœ¬æ˜¯åœ¨çº¿å¤‡ä»½ï¼Œåœ¨å¯¹å¤–æä¾›æœåŠ¡çš„æœºå™¨åœ¨è®¡åˆ’å†…ä¸‹çº¿æˆ–æ„å¤–å½“æŽ‰æ—¶ï¼Œå°±ä¼šå¯ç”¨å¦ä¸€å°å‰¯æœ¬å¯¹å¤–æä¾›æœåŠ¡ã€‚å½“ç„¶è¿™ä¹Ÿä¼šé€ æˆä¸€è‡´æ€§é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œç‰ºç‰²äº†ä¸€ç‚¹å¯ç”¨æ€§ï¼Œä¹Ÿå°±æ˜¯åœ¨æ—§èŠ‚ç‚¹ä¸‹çº¿åŽï¼Œæ–°èŠ‚ç‚¹å¿…é¡»åŠ è½½å®Œæ‰€æœ‰çš„æ•°æ®æ‰å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ã€‚ä¸­é—´çš„ä¸€æ®µæ—¶é—´è¿™ä¸ªåˆ†åŒºæ˜¯ä¸å¯ç”¨çš„ã€‚&lt;/p>
&lt;h3 id="åˆ†åŒºå±‚çš„æž¶æž„">åˆ†åŒºå±‚çš„æž¶æž„ &lt;a href="#%e5%88%86%e5%8c%ba%e5%b1%82%e7%9a%84%e6%9e%b6%e6%9e%84" class="anchor">ðŸ”—&lt;/a>&lt;/h3>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-10-10/51400577.jpg" alt="">&lt;/p>
&lt;p>å›¾ä¸­çš„PSæŒ‡çš„å°±æ˜¯ä¸Šæ–‡æåˆ°çš„åˆ†åŒºæœåŠ¡ï¼Œæ¯ä¸ªPSç»´æŠ¤ç€å¯¹è±¡è¡¨çš„ä¸€ä¸ªåˆ†åŒºï¼Œå…¶æŒä¹…åŒ–ä¿¡æ¯éƒ½å‚¨å­˜åœ¨æ•°æ®æµå±‚ä¸Šã€‚&lt;/p>
&lt;p>PMï¼ˆPartition Managerï¼‰ä¹Ÿæ˜¯ä½¿ç”¨paxosç®—æ³•é€‰ä¸¾å‡ºæ¥çš„masterèŠ‚ç‚¹ï¼Œç”¨æ¥ç®¡ç†åˆ†åŒºæœåŠ¡çš„è´Ÿè½½å‡è¡¡ã€ç¾å¤‡ç­‰æ“ä½œã€‚&lt;/p>
&lt;p>Lock Serviceç”¨æ¥å¯¹åˆ†åŒºèŠ‚ç‚¹è¿›è¡Œé€‰ä¸¾ï¼Œé€‰å‡ºçš„å”¯ä¸€masterèŠ‚ç‚¹å¯¹å¤–æä¾›æœåŠ¡ã€‚&lt;/p>
&lt;p>Partion Map Tableç”¨æ¥å­˜å‚¨ä¸Žæ£€ç´¢åˆ†åŒºæ‰€å¯¹åº”çš„èŠ‚ç‚¹ã€‚&lt;/p>
&lt;h2 id="was---å‰ç«¯å±‚">WAS - å‰ç«¯å±‚ &lt;a href="#was---%e5%89%8d%e7%ab%af%e5%b1%82" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>å‰ç«¯å±‚åªæ˜¯è–„è–„çš„ä¸€å±‚REST APIå°è£…ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå…¶å®ƒç‰¹æ®ŠåŠŸèƒ½ã€‚è¿™é‡Œä¸€ç¬”å¸¦è¿‡ã€‚&lt;/p>
&lt;h2 id="æˆ˜èƒœcapç†è®ºä½ ä»–å¨˜çš„çœŸæ˜¯ä¸ªå¤©æ‰">æˆ˜èƒœCAPç†è®ºï¼Ÿä½ ä»–å¨˜çš„çœŸæ˜¯ä¸ªå¤©æ‰ï¼ &lt;a href="#%e6%88%98%e8%83%9ccap%e7%90%86%e8%ae%ba%e4%bd%a0%e4%bb%96%e5%a8%98%e7%9a%84%e7%9c%9f%e6%98%af%e4%b8%aa%e5%a4%a9%e6%89%8d" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-9-20/10049124.jpg" alt="">&lt;/p>
&lt;p>WASå®£ç§°è‡ªå·±æˆ˜èƒœäº†CAPç†è®ºï¼Œæä¾›äº†é«˜å¯ç”¨æ€§å’Œå¼ºä¸€è‡´æ€§ã€‚WASèƒ½åšåˆ°è¿™ç‚¹ä¸»è¦æ˜¯å› ä¸ºæ•°æ®æµå±‚è®¾è®¡çš„å¥½ã€‚&lt;/p>
&lt;p>æ•°æ®æµå±‚ä½¿ç”¨äº†åªè¿½åŠ å†™çš„æ•°æ®æ¨¡åž‹ï¼ŒåŠ ä¸Šé“¾å¼æäº¤æä¾›çš„é«˜ä¸€è‡´æ€§ï¼Œæ‰€ä»¥èƒ½åº”å¯¹èŠ‚ç‚¹å¤±æ•ˆï¼ˆå¯ç”¨æ€§ï¼‰å’Œç½‘ç»œå¤±æ•ˆï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰çš„æ•…éšœã€‚&lt;/p>
&lt;p>æ•°æ®æµå±‚ä¹‹ä¸Šçš„åˆ†åŒºå±‚åˆ©ç”¨äº†å…¶ç‰¹æ€§ï¼Œå¾ˆå®¹æ˜“çš„å®žçŽ°äº†é«˜å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ã€‚åŒæ—¶ï¼Œåˆç”±äºŽå…¶ä½¿ç”¨å•ç‚¹å‘å¤–æä¾›æœåŠ¡ï¼Œæ‰€ä»¥ä¸€è‡´æ€§ä¹Ÿæœ‰äº†ä¿éšœã€‚&lt;/p>
&lt;p>æ‰€ä»¥WASå®£ç§°è‡ªå·±æˆ˜èƒœäº†CAPç†è®ºï¼Œä¹Ÿä¸æ˜¯æ²¡æœ‰é“ç†ã€‚ä½†æ˜¯ä¸ªäººæ„Ÿè§‰WASåœ¨åˆ†åŒºå±‚çš„å•ç‚¹è®¾å®šï¼Œæ˜¯ä»¥ç‰ºç‰²å¯ç”¨æ€§ï¼ˆAï¼‰æ¢å–ä¸€è‡´æ€§ï¼ˆCï¼‰çš„ä¸€ç§å¦¥åï¼Œåªæ˜¯ç”±äºŽæœºå™¨æ•…éšœå¹¶éžå¤šå‘ï¼Œè§¦å‘é—®é¢˜çš„æœºçŽ‡æ¯”è¾ƒå°ã€‚&lt;/p>
&lt;h2 id="å†™åœ¨åŽé¢">å†™åœ¨åŽé¢ &lt;a href="#%e5%86%99%e5%9c%a8%e5%90%8e%e9%9d%a2" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;p>æœ¬æ–‡æ˜¯ã€ŠWindows Azure Storage: A Highly Available Cloud Storage Service with Strong Consistencyã€‹ä¸€æ–‡çš„è¯»åŽæ„Ÿï¼Œåˆ èŠ‚äº†ä¸€éƒ¨åˆ†ä¸å®¹æ˜“ç†è§£çš„ç»†èŠ‚ã€‚æƒ³è¦æ›´è¯¦å°½çš„ç†è§£WASçš„è®¾è®¡æ€æƒ³ï¼Œè¯·é˜…è¯»è®ºæ–‡åŽŸæ–‡ä»¥åŠå®˜æ–¹æ–‡æ¡£ã€‚ä¸€åˆ‡å†…å®¹å’Œç†è§£ä¸Šçš„å†²çªï¼Œä»¥åŽŸæ–‡å’Œå®˜æ–¹æ–‡æ¡£ä¸ºå‡†ã€‚&lt;/p>
&lt;p>æ’°å†™æœ¬æ–‡æ—¶ï¼Œæˆ‘ä½¿ç”¨Atreus2tapè¿·ä¹‹å°é”®ç›˜ï¼Œåœ¨å­¦ä¹ å‰äººç»éªŒæ•™è®­çš„åŒæ—¶ï¼Œé‡æ–°å­¦ä¹ äº†æ‰“å­—ã€‚&lt;/p>
&lt;p>å°é”®ç›˜çš„å¥½å¤„æ˜¯ä¾¿æºï¼Œä»¥åŠé¿å…æ‰‹æŒ‡ç§»åŠ¨å¸¦æ¥çš„åŠ³æŸã€‚ç¼ºç‚¹æ˜¯éœ€è¦ç²¾å¿ƒè®¾è®¡å¹¶ç»ƒä¹ å¤§é‡çš„ç»„åˆé”®ï¼ŒåŒæ—¶æˆå¥—çš„é”®å¸½çœŸæ˜¯ä¸å¥½ä¹°ã€‚&lt;/p>
&lt;p>ä¸Šä¸€å¼ å›¾ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-10-10/71011744.jpg" alt="">&lt;/p>
&lt;blockquote>
&lt;p>å¬è¯´ç”¨è¿™ç§å¥‡æ€ªé”®ç›˜çš„äººéƒ½æ³¨å­¤äº†ã€‚&lt;/p>&lt;/blockquote>
&lt;h2 id="å‚è€ƒé“¾æŽ¥">å‚è€ƒé“¾æŽ¥ &lt;a href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" class="anchor">ðŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&lt;a href="http://wetest.qq.com/lab/view/105.html">åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡çš„æ±‚ç”Ÿä¹‹è·¯&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://waylau.com/talk-about-distributed-system/">ç”¨å¤§ç™½è¯èŠèŠåˆ†å¸ƒå¼ç³»ç»Ÿ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://book.douban.com/subject/26292004/">ã€Šä»ŽPaxosåˆ°Zookeeperã€‹&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.allthingsdistributed.com/files/amazon-dynamo-sosp2007.pdf">Dynamo: Amazonâ€™s Highly Available Key-value Store&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>