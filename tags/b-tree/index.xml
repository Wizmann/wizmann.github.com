<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>B-Tree on Maerlyn's Rainbow</title><link>https://wizmann.top/tags/b-tree/</link><description>Recent content in B-Tree on Maerlyn's Rainbow</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Mon, 18 Dec 2017 00:49:00 +0000</lastBuildDate><atom:link href="https://wizmann.top/tags/b-tree/index.xml" rel="self" type="application/rss+xml"/><item><title>Bw-Treeï¼šåœ¨æ–°ç¡¬ä»¶å¹³å°ä¸Šçš„æ–°B-Tree</title><link>https://wizmann.top/posts/bw-tree/</link><pubDate>Mon, 18 Dec 2017 00:49:00 +0000</pubDate><guid>https://wizmann.top/posts/bw-tree/</guid><description>&lt;h2 id="ars-ä¸-bw-tree">ARS ä¸ Bw-Tree &lt;a href="#ars-%e4%b8%8e-bw-tree" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>nosqlæ•°æ®åº“ä»æœ¬è´¨ä¸Šè¯´ï¼Œéƒ½å±äºARSï¼ˆAtomic Record Storesï¼Œâ€œåŸå­è®°å½•å­˜å‚¨â€ï¼‰ã€‚&lt;/p>
&lt;p>æœ€å¸¸è§çš„â€œåŸå­è®°å½•å­˜å‚¨â€ä¸€ç§å®ç°å°±æ˜¯æœ´ç´ çš„Hashè¡¨ï¼šé€šè¿‡ä¸€ä¸ªç‰¹å®šçš„keyï¼Œæ¥è¯»å†™ä¸€æ¡ç‹¬ç«‹çš„æ•°æ®è®°å½•ã€‚&lt;/p>
&lt;p>ä¸€äº›åŸºäºkey-valueï¼ˆé”®-å€¼ï¼‰æ¨¡å‹çš„nosqlçš„å†…éƒ¨å®ç°æ­£æ˜¯ä½¿ç”¨äº†Hashè¡¨ï¼Œä¾‹å¦‚Redis&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>ã€memcacheã€Riakç­‰ã€‚&lt;/p>
&lt;p>è€Œæœ‰ä¸€äº›nosqlæ•°æ®åº“ä¸ºäº†æ”¯æŒé«˜æ•ˆçš„key-sequentialï¼ˆé”®-åºåˆ—ï¼‰æŸ¥æ‰¾ï¼Œé‡‡ç”¨äº†tree-based&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>æ•°æ®ç»“æ„è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œæ‰€ä»¥B-Treeæˆä¸ºäº†ä¸€äº›æ•°æ®åº“ï¼ˆboth nosql and sqlï¼‰çš„é¦–é€‰ã€‚&lt;/p>
&lt;p>æœ¬æ–‡ä»‹ç»äº†ä¸€ç§åŸºäºæ–°å‹ç¡¬ä»¶çš„é«˜æ€§èƒ½ARSå®ç°ï¼Œå…¶æ ¸å¿ƒæŠ€æœ¯æœ‰ï¼š&lt;/p>
&lt;ol>
&lt;li>é¡µå¼å†…å­˜ç®¡ç†&lt;/li>
&lt;li>Bw-Treeï¼Œä¸€ç§åŸºäºB-Treeçš„æ ‘å­˜å‚¨ç»“æ„&lt;/li>
&lt;li>åŸºäºæ—¥å¿—çš„å­˜å‚¨ç®¡ç†&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-8/19953353.jpg" alt="">&lt;/p>
&lt;h2 id="åœ¨ç°ä»£ç¡¬ä»¶ä¸Šçš„bw-tree">åœ¨ç°ä»£ç¡¬ä»¶ä¸Šçš„Bw-Tree &lt;a href="#%e5%9c%a8%e7%8e%b0%e4%bb%a3%e7%a1%ac%e4%bb%b6%e4%b8%8a%e7%9a%84bw-tree" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;h3 id="ç°ä»£å¤šæ ¸cpu">ç°ä»£å¤šæ ¸CPU &lt;a href="#%e7%8e%b0%e4%bb%a3%e5%a4%9a%e6%a0%b8cpu" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>å¤šæ ¸CPUå¸¦æ¥äº†é«˜å¹¶å‘ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿå¼•å…¥äº†é”ç«äº‰å’Œç¼“å­˜å¤±æ•ˆé—®é¢˜ã€‚&lt;/p>
&lt;p>ä¸ºäº†è®²è§£é”ç«äº‰ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªç»å…¸çš„ä¾‹å­ï¼šå¤šçº¿ç¨‹è®¡æ•°å™¨ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¦‚æœä¸ä½¿ç”¨é”æ¥ä¿æŠ¤è®¡æ•°å™¨å˜é‡çš„è¯ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„ç»“æœå‡ ä¹ä¸å¯èƒ½æ˜¯æ­£ç¡®çš„ã€‚å¤šä¸ªçº¿ç¨‹ä¸­ï¼Œåªèƒ½æœ‰å”¯ä¸€ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æŒæœ‰é”ï¼Œå…¶å®ƒçš„çº¿ç¨‹éƒ½éœ€è¦ç­‰å¾…ã€‚è¿™æ ·å°±å½±å“åˆ°äº†ç¨‹åºçš„å¹¶å‘åº¦ã€‚&lt;/p>
&lt;blockquote>
&lt;p>è¿™é‡Œä¸€äº›é«˜çº§ç©å®¶ä¼šæåˆ°CASï¼ˆcompare-and-swapï¼‰å‘½ä»¤ã€‚CASç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯â€œæ¯”è¾ƒå¹¶äº¤æ¢â€ï¼Œç”¨åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­å®ç°æ•°æ®äº¤æ¢æ“ä½œã€‚è¯¦æƒ…è¯·è§ï¼š&lt;a href="https://en.wikipedia.org/wiki/Compare-and-swap">æ¯”è¾ƒå¹¶äº¤æ¢&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>ç¼“å­˜å¤±æ•ˆäº§ç”Ÿäºä¸¤ç§åœºæ™¯ã€‚ä¸€æ˜¯ä¸Šæ–‡æåˆ°çš„é”äº‰ç”¨ï¼Œå³æ¯æ¬¡é”äº‰ç”¨éƒ½ä¼šè®©å½“å‰çº¿ç¨‹é™·å…¥å†…æ ¸æ€ï¼Œäº§ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¯¼è‡´CPUç¼“å­˜çš„å¤±æ•ˆã€‚äºŒæ˜¯ç¼“å­˜ä¸€è‡´æ€§åè®®å¯¼è‡´çš„ç¼“å­˜è¡Œå¤±æ•ˆï¼Œå³å¤šä¸ªCPUåœ¨å…±äº«ä¸€ä¸ªå…±åŒçš„ä¸»å­˜èµ„æºæ—¶ï¼Œä¸ºäº†ä¿è¯ç¼“å­˜ä¸­çš„æ•°æ®ä¸€è‡´æ€§ï¼Œåœ¨ä¸»å­˜èµ„æºè¢«ä¿®æ”¹åï¼Œç›¸åº”çš„ç¼“å­˜è¡Œä¹Ÿä¼šå¤±æ•ˆã€‚&lt;/p>
&lt;p>Bw-Treeä¸ºäº†è§£å†³ä»¥ä¸Šçš„é—®é¢˜ï¼Œä½¿ç”¨äº†ä»¥ä¸‹ä¸¤ä¸ªæªæ–½ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ— é”æ•°æ®ç»“æ„ &lt;br>
é¿å…äº†ç³»ç»Ÿé˜»å¡åœ¨é”ä¸Šï¼Œæ›´é¿å…äº†ç”±äºé”äº‰ç”¨å¯¼è‡´çš„ç¼“å­˜å¤±æ•ˆä»¥åŠä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¢é‡æ›´æ–° &lt;br>
ä½¿ç”¨å¢é‡æ›´æ–°è€Œä¸æ˜¯åŸåœ°æ›´æ–°ï¼Œé¿å…ä¿®æ”¹å…±äº«çš„ä¸»å­˜èµ„æºï¼Œè§„é¿ç¼“å­˜ä¸€è‡´æ€§äº§ç”Ÿçš„ç¼“å­˜å¤±æ•ˆé—®é¢˜ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="ç°ä»£å­˜å‚¨è®¾å¤‡">ç°ä»£å­˜å‚¨è®¾å¤‡ &lt;a href="#%e7%8e%b0%e4%bb%a3%e5%ad%98%e5%82%a8%e8%ae%be%e5%a4%87" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>æ•°æ®åº“ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦ç“¶é¢ˆå°±æ˜¯IOæ€§èƒ½ã€‚SSDï¼ˆå›ºæ€ç¡¬ç›˜ï¼‰æä¾›äº†æ¯”ä¼ ç»Ÿæœºæ¢° ç¡¬ç›˜æ›´å¥½çš„è¯»å†™æ€§èƒ½ï¼Œè™½ç„¶è¡¨é¢ä¸Šç¼“è§£äº†é—®é¢˜ï¼Œä½†æ˜¯IOä»ç„¶å¯èƒ½æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆã€‚&lt;/p>
&lt;p>æ‰€ä»¥ï¼ŒBw-Treeä½¿ç”¨å¤§å†…å­˜åšä¸ºè¯»ç¼“å­˜ï¼ŒåŒæ—¶é‡‡ç”¨append-onlyç»“æ„ä¿å­˜å†™ä¿¡æ¯ã€‚å› ä¸ºä¸è®ºæ˜¯SSDè¿˜æ˜¯æœºæ¢°ç¡¬ç›˜ï¼Œé¡ºåºè¯»å†™çš„æ€§èƒ½éƒ½éå¸¸å‡ºè‰²ã€‚&lt;/p>
&lt;h2 id="bw-treeçš„é¡µå¼å­˜å‚¨ç»“æ„">Bw-Treeçš„é¡µå¼å­˜å‚¨ç»“æ„ &lt;a href="#bw-tree%e7%9a%84%e9%a1%b5%e5%bc%8f%e5%ad%98%e5%82%a8%e7%bb%93%e6%9e%84" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;h3 id="æ˜ å°„è¡¨mapping-table">æ˜ å°„è¡¨ï¼ˆMapping Tableï¼‰ &lt;a href="#%e6%98%a0%e5%b0%84%e8%a1%a8mapping-table" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>ä¸Šæ–‡ä¸­æˆ‘ä»¬æåˆ°äº†ç¼“å­˜ä¸€è‡´æ€§ï¼ˆcache coheranceï¼‰ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å½“æˆ‘ä»¬ä¿®æ”¹å¤šä¸ªCPUå…±äº«çš„å†…å­˜èµ„æºæ—¶ï¼Œä¼šå¯¼è‡´ç¼“å­˜çš„å¤±æ•ˆï¼Œè¿›è€Œå½±å“æŒ‡ä»¤çš„æ‰§è¡Œæ•ˆç‡ã€‚&lt;/p>
&lt;p>Bw-Treeä½¿ç”¨é¡µå¼ï¼ˆpaginatedï¼‰å­˜å‚¨ç®¡ç†ä¸æ˜ å°„è¡¨è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚Bw-Treeä»¥â€œé¡µâ€åšä¸ºå­˜å‚¨çš„å•å…ƒï¼Œæ¯ä¸€é¡µéƒ½æœ‰ä¸€ä¸ªPIDã€‚é¡µçš„ç‰©ç†ä½ç½®å¯ä»¥å­˜å‚¨åœ¨ä¸»å­˜ä¸Šï¼Œä¹Ÿå¯ä»¥å­˜å‚¨åœ¨ç£ç›˜ä¸Šã€‚&lt;/p>
&lt;p>æ˜ å°„è¡¨å°†PIDæ‰€ä»£è¡¨çš„æ˜ å°„åˆ°é¡µæ‰€åœ¨çš„å…·ä½“ç‰©ç†ä½ç½®ã€‚æ‰€ä»¥å½“é¡µçš„ç‰©ç†ä½ç½®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä»ç„¶ä¿æŒPIDä¸€è‡´ï¼Œä¸éœ€è¦å¯¹Bw-Treeçš„ç»“æ„è¿›è¡Œä»»ä½•ä¿®æ”¹ã€‚&lt;/p>
&lt;h3 id="å¢é‡ä¿®æ”¹delta-updating">å¢é‡ä¿®æ”¹ï¼ˆDelta Updatingï¼‰ &lt;a href="#%e5%a2%9e%e9%87%8f%e4%bf%ae%e6%94%b9delta-updating" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-10/18893113.jpg" alt="">&lt;/p>
&lt;p>å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰æ•°æ®&lt;code>D&lt;/code>ï¼Œå½“æœ‰ä¿®æ”¹è¯·æ±‚&lt;code>delta&lt;/code>åˆ°æ¥æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®&lt;code>D&lt;/code>&lt;strong>åŸåœ°&lt;/strong>ä¿®æ”¹ä¸º&lt;code>D'&lt;/code>ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å¢é‡æ›´æ–°çš„æ–¹æ³•å°†å…¶ä¿å­˜ä¸º&lt;code>delta + D&lt;/code>çš„å½¢å¼ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-18/98762144.jpg" alt="">&lt;/p>
&lt;p>å¢é‡æ›´æ–°çœ‹èµ·æ¥æ¯”åŸåœ°æ›´æ–°è€—è´¹äº†æ›´å¤šçš„å†…å­˜ï¼Œä½†å…¶ä¼˜åŠ¿ä¹Ÿéå¸¸æ˜æ˜¾ã€‚ä¸€æ˜¯ä¿®æ”¹ä¸éœ€è¦å¯¹é¡µåŠ é”ï¼Œå¯ä»¥ä½¿ç”¨CASæ— é”æ–¹æ³•å®‰å…¨çš„æ›´æ–°å…±äº«èµ„æºã€‚äºŒæ˜¯ä¸éœ€è¦ä¿®æ”¹é¡µå†…å­˜ï¼Œä¸ä¼šå¯¼è‡´ç°æœ‰cacheå¤±æ•ˆã€‚&lt;/p>
&lt;p>å½“å¢é‡è¿‡å¤šæ—¶ï¼ŒBw-Treeä¼šè‡ªåŠ¨åˆå¹¶å¢é‡å’Œé¡µå†…å­˜ï¼Œè¿™ä¸ªè¿‡ç¨‹åŒæ ·æ˜¯æ— é”çš„ã€‚&lt;/p>
&lt;h3 id="å¼¹æ€§è™šæ‹Ÿé¡µelastic-virtual-pages">å¼¹æ€§è™šæ‹Ÿé¡µï¼ˆElastic Virtual Pagesï¼‰ &lt;a href="#%e5%bc%b9%e6%80%a7%e8%99%9a%e6%8b%9f%e9%a1%b5elastic-virtual-pages" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-10/91449803.jpg" alt="image">&lt;/p>
&lt;blockquote>
&lt;p>B+-Treeï¼Œå›¾ç‰‡æ¥æºï¼š&lt;a href="https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html">B+ Trees Visualization&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>B+-Treeçš„ç‰¹æ€§æœ‰ï¼š&lt;/p>
&lt;ol>
&lt;li>æ‰€æœ‰è®°å½•éƒ½åœ¨å¶å­èŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹ä¹Ÿè¢«ç§°ä¸ºé¡µï¼‰ä¸Šï¼Œå¹¶ä¸”æ˜¯é¡ºåºå­˜æ”¾çš„&lt;/li>
&lt;li>æ¯ä¸ªéå¶å­èŠ‚ç‚¹åŒ…å«å…³é”®å­—ï¼ˆreferencesï¼‰ä¸å­©å­æŒ‡é’ˆ&lt;/li>
&lt;li>å¶å­èŠ‚ç‚¹æœ‰ä¸€ä¸ªæŒ‡å‘å·¦å³å…„å¼Ÿçš„æŒ‡é’ˆï¼Œæ–¹ä¾¿é¡ºåºéå†æ•°æ®&lt;/li>
&lt;/ol>
&lt;p>Bw-Treeåœ¨B+-Treeçš„åŸºç¡€ä¸Šæ·»åŠ äº†ï¼š&lt;/p>
&lt;ol>
&lt;li>low/high keyï¼Œç”¨æ¥æ ‡æ˜æœ¬èŠ‚ç‚¹ä»¥åŠå­èŠ‚ç‚¹çš„æ•°æ®èŒƒå›´&lt;/li>
&lt;li>æ¯ä¸ªèŠ‚ç‚¹ï¼ˆåŒ…æ‹¬å¶å­èŠ‚ç‚¹å’Œä¸­é—´èŠ‚ç‚¹ï¼‰éƒ½æœ‰ä¸€ä¸ªside pointeræŒ‡å‘å…¶å³é¢çš„å…„å¼ŸèŠ‚ç‚¹&lt;/li>
&lt;/ol>
&lt;h3 id="èŒƒå›´æŸ¥è¯¢">èŒƒå›´æŸ¥è¯¢ &lt;a href="#%e8%8c%83%e5%9b%b4%e6%9f%a5%e8%af%a2" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>ç”±äºBw-Treeçš„æ•°æ®éƒ½åˆ†å¸ƒåœ¨å¶å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¶å­èŠ‚ç‚¹ä¹‹é—´å¯ä»¥é€šè¿‡å…„å¼ŸæŒ‡é’ˆè¿›è¡Œéå†ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä½¿ç”¨æ¸¸æ ‡ï¼ˆcursorï¼‰æ¥æ ‡è®°å½“å‰æ£€ç´¢çš„ä½ç½®ã€‚å¹¶ä¸”ä½¿ç”¨ç¼“å­˜å½“å‰é¡µä¸Šç¬¦åˆæ¡ä»¶çš„è®°å½•ã€‚è¿™æ ·å¯ä»¥åŠ é€Ÿé€æ¡éå†æ“ä½œï¼ˆ&amp;ldquo;next-record&amp;rdquo; functionalityï¼‰ã€‚&lt;/p>
&lt;p>é€æ¡éå†æ“ä½œæ˜¯åŸå­çš„ï¼Œä½†æ˜¯é€æ¡éå†æŸä¸€æ®µæ•°æ®åˆ™ä¸æ˜¯åŸå­çš„ã€‚å¦‚æœè¯»å†™åŒæ—¶å‘ç”Ÿåœ¨åŒä¸€é¡µï¼Œåˆ™æˆ‘ä»¬ä¼šæ ¹æ®äº‹åŠ¡çš„åŒæ­¥çº§åˆ«æ¥å†³å®šæ˜¯å¦éœ€è¦é‡å»ºæ£€ç´¢ç¼“å­˜ã€‚&lt;/p>
&lt;h3 id="åƒåœ¾å›æ”¶">åƒåœ¾å›æ”¶ &lt;a href="#%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>æ— é”æ•°æ®ç»“æ„å¯¼è‡´çš„ä¸€ä¸ªç»“æœï¼Œæ˜¯æˆ‘ä»¬æ— æ³•æ˜¾å¼çš„è®©æŸä¸ªé¡µå¤±æ•ˆã€‚è¿™æ„å‘³ç€ï¼Œä¸€äº›çº¿ç¨‹ä¼šæŒæœ‰è¿‡æ—¶çš„æ•°æ®ï¼Œæ‰€ä»¥åœ¨åˆ é™¤è¿™äº›è¿‡æ—¶çš„æ•°æ®æ—¶è¦éå¸¸å°å¿ƒã€‚&lt;/p>
&lt;p>æ‰€ä»¥è¿™é‡Œå¼•å…¥äº†â€œä»£â€ï¼ˆepochï¼‰çš„æ¦‚å¿µï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ¯ä¸€ä¸ªæ“ä½œéƒ½åœ¨æŸä¸€ä¸ªä»£ä¸­ï¼Œå¹¶ä¸”è¿™ä¸€ä»£ä¸­çš„æ‰€æœ‰æ•°æ®ä»¥åŠè¿‡æ—¶æ•°æ®éƒ½ä¸ä¼šè¢«åˆ é™¤ã€‚å½“æŸä¸€ä»£ä¸­æ‰€æœ‰çº¿ç¨‹æ“ä½œéƒ½è¢«æ‰§è¡Œå®Œæ¯•åï¼Œè¿™ä¸€ä»£å°±ä¼šç»“æŸï¼Œå…¶ä¸­çš„è¿‡æ—¶æ•°æ®å°±ä¼šè¢«å®‰å…¨çš„å›æ”¶ã€‚&lt;/p>
&lt;h2 id="bw-treeçš„ç»“æ„æ”¹å˜">Bw-Treeçš„ç»“æ„æ”¹å˜ &lt;a href="#bw-tree%e7%9a%84%e7%bb%93%e6%9e%84%e6%94%b9%e5%8f%98" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>Bw-Treeçš„ç»“æ„ä¼šåœ¨æŸäº›æ“ä½œä¸‹è¿›è¡Œæ”¹å˜ï¼Œä»¥ç»´æŠ¤å…¶æ€§è´¨ã€‚ç»“æ„æ”¹å˜çš„æ“ä½œä»ç„¶æ˜¯æ— é”çš„ã€‚&lt;/p>
&lt;p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å‡è®¾ç»“æ„æ”¹å˜çš„å†™æ“ä½œä¸æ˜¯å¹¶å‘çš„ã€‚&lt;/p>
&lt;h3 id="èŠ‚ç‚¹åˆ†è£‚">èŠ‚ç‚¹åˆ†è£‚ &lt;a href="#%e8%8a%82%e7%82%b9%e5%88%86%e8%a3%82" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>å½“æŸçº¿ç¨‹å‘ç°Bw-Treeä¸­æŸä¸ªèŠ‚ç‚¹çš„å¤§å°è¶…å‡ºäº†ç³»ç»Ÿè®¾å®šçš„é˜ˆå€¼åï¼Œåœ¨æ‰§è¡Œå®Œå…¶é¢„å®šçš„ä»»åŠ¡åï¼Œå°±ä¼šè§¦å‘èŠ‚ç‚¹çš„åˆ†è£‚æ“ä½œã€‚&lt;/p>
&lt;p>èŠ‚ç‚¹åˆ†è£‚åˆ†ä¸ºä¸¤æ­¥æ‰§è¡Œï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯åŸå­çš„ï¼š&lt;/p>
&lt;ol>
&lt;li>å­èŠ‚ç‚¹åˆ†è£‚&lt;/li>
&lt;li>å­èŠ‚ç‚¹æ›´æ–°åï¼Œå‘ä¸Šæ›´æ–°çˆ¶èŠ‚ç‚¹&lt;/li>
&lt;/ol>
&lt;h4 id="å­èŠ‚ç‚¹åˆ†è£‚">å­èŠ‚ç‚¹åˆ†è£‚ &lt;a href="#%e5%ad%90%e8%8a%82%e7%82%b9%e5%88%86%e8%a3%82" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-13/53138696.jpg" alt="">&lt;/p>
&lt;p>ä¸Šå›¾æ˜¯Bw-Treeä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç°åœ¨æˆ‘ä»¬æƒ³åˆ†è£‚&lt;code>PQ&lt;/code>èŠ‚ç‚¹ä¸º&lt;code>P&lt;/code>å’Œ&lt;code>Q&lt;/code>ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚å³å¤§äºæŸä¸ªå€¼&lt;code>KP&lt;/code>çš„æ•°æ®å…¨éƒ¨è¿ç§»åˆ°æ–°èŠ‚ç‚¹&lt;code>Q&lt;/code>ã€‚&lt;/p>
&lt;p>èŠ‚ç‚¹åˆ†è£‚çš„æ“ä½œå¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>å…ˆæ‹·è´Qä¸­çš„æ•°æ®åˆ°ä¸€ä¸ªæ–°çš„æ•°æ®é¡µ&lt;code>Q'&lt;/code>ï¼Œè¿™ä¸€æ­¥å¹¶ä¸ä¼šå½±å“åˆ°å…¶å®ƒçš„çº¿ç¨‹ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-13/52526691.jpg" alt="">&lt;/p>
&lt;ol start="2">
&lt;li>åœ¨PèŠ‚ç‚¹ï¼Œä½¿ç”¨CASæ“ä½œï¼Œæ·»åŠ åˆ†è£‚çš„ä¿¡æ¯Î”ï¼Œæ ‡æ˜è¯¥èŠ‚ç‚¹å·²ç»åˆ†è£‚ï¼Œå…¶ä¸­åŒ…å«ç€&lt;code>KP&lt;/code>çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å½“æŸ¥è¯¢çš„Keyå¤§äº&lt;code>KP&lt;/code>æ—¶ï¼Œä¼šè·³è½¬åˆ°æ–°èŠ‚ç‚¹&lt;code>Q'&lt;/code>è¿›è¡ŒæŸ¥è¯¢ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-13/7152787.jpg" alt="">&lt;/p>
&lt;h4 id="çˆ¶èŠ‚ç‚¹æ›´æ–°">çˆ¶èŠ‚ç‚¹æ›´æ–° &lt;a href="#%e7%88%b6%e8%8a%82%e7%82%b9%e6%9b%b4%e6%96%b0" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>åŒæ ·ï¼Œçˆ¶èŠ‚ç‚¹çš„æ›´æ–°ä»ç„¶æ˜¯é‡‡ç”¨å¢é‡ä¿®æ”¹çš„æ¨¡å¼ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬åœ¨çˆ¶èŠ‚ç‚¹ä½¿ç”¨CASæ“ä½œæ·»åŠ ä¸€æ¡ä¿®æ”¹å¢é‡ï¼ˆindex term delta recordï¼‰ã€‚å½“æŸ¥è¯¢è¯·æ±‚è½åœ¨&lt;code>Q&lt;/code>èŠ‚ç‚¹çš„èŒƒå›´å†…æ—¶ï¼Œä¼šç›´æ¥è·³è½¬åˆ°&lt;code>Q'&lt;/code>èŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-13/29669418.jpg" alt="">&lt;/p>
&lt;h4 id="æ›´æ–°åˆå¹¶">æ›´æ–°åˆå¹¶ &lt;a href="#%e6%9b%b4%e6%96%b0%e5%90%88%e5%b9%b6" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>ä½¿ç”¨å¢é‡æ›´æ–°å¯ä»¥å‡å°‘æ•°æ®æ›´æ–°ã€èŠ‚ç‚¹åˆ†è£‚æ—¶çš„æ—¶é—´å¼€é”€ï¼Œä»è€Œé¿å…å¤±è´¥çš„åˆ†è£‚æ“ä½œï¼ˆfailed splitsï¼‰ã€‚&lt;/p>
&lt;p>ä½†æ˜¯æœ€ç»ˆï¼Œæˆ‘ä»¬ä»ä¼šå°†äº§ç”Ÿçš„æ›´æ–°å¢é‡åˆå¹¶æˆä¸€æ¡å®Œæ•´çš„è®°å½•ï¼Œä»¥é¿å…è¿‡å¤šçš„ç©ºé—´æµªè´¹å’ŒæŒ‡é’ˆè·³è½¬ã€‚&lt;/p>
&lt;h3 id="å­èŠ‚ç‚¹åˆå¹¶">å­èŠ‚ç‚¹åˆå¹¶ &lt;a href="#%e5%ad%90%e8%8a%82%e7%82%b9%e5%90%88%e5%b9%b6" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>åœ¨Bw-Treeæ•°æ®å‡å°‘æ—¶ï¼Œæˆ‘ä»¬ä¸ºäº†é¿å…è¿‡å¤šçš„æŒ‡é’ˆè·³è½¬ï¼Œéœ€è¦è¿›è¡ŒèŠ‚ç‚¹åˆå¹¶ã€‚èŠ‚ç‚¹åˆå¹¶æ¯”èŠ‚ç‚¹åˆ†è£‚å¤æ‚ä¸€ç‚¹ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç³»åˆ—çš„åŸå­æ“ä½œæ¥è¿›è¡Œã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-14/37353459.jpg" alt="">&lt;/p>
&lt;ol>
&lt;li>åˆ é™¤èŠ‚ç‚¹&lt;/li>
&lt;/ol>
&lt;p>åˆ é™¤èŠ‚ç‚¹æ—¶ä½¿ç”¨æ ‡è®°åˆ é™¤ï¼Œä»ç„¶æ˜¯CASæ“ä½œï¼Œæ·»åŠ ä¸€ä¸ªåˆ é™¤å¢é‡ï¼ˆremove node deltaï¼‰åˆ°&lt;code>Q&lt;/code>ã€‚ä¹‹åæ‰€æœ‰çš„è¯»å†™è¯·æ±‚å…¨éƒ¨è½¬å‘åˆ°å…¶å·¦å…„å¼Ÿ&lt;code>P&lt;/code>ã€‚&lt;/p>
&lt;blockquote>
&lt;p>è¿™é‡Œæœ‰ä¸ªçŒœæµ‹ï¼Œåœ¨Qä¸­åŸæœ‰çš„æ•°æ®ä»ç„¶æ˜¯è¦åˆ°QèŠ‚ç‚¹è¿›è¡Œè®¿é—®çš„ã€‚è®ºæ–‡é‡Œæ²¡æœ‰è¯´ï¼Œé€šè¿‡å¸¸è¯†æ¨æ–­ä¸€ä¸‹åº”è¯¥å¦‚æ­¤ã€‚&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-14/79837579.jpg" alt="">&lt;/p>
&lt;ol start="2">
&lt;li>åˆå¹¶å­èŠ‚ç‚¹&lt;/li>
&lt;/ol>
&lt;p>åœ¨&lt;code>P&lt;/code>èŠ‚ç‚¹ä¹‹å‰ç”¨CASæ“ä½œæ·»åŠ åˆå¹¶å¢é‡ï¼ˆnode merge deltaï¼‰ã€‚åˆå¹¶å¢é‡å°†&lt;code>P&lt;/code>èŠ‚ç‚¹å’Œ&lt;code>Q&lt;/code>èŠ‚ç‚¹ä»é€»è¾‘ä¸Šåˆä¸ºä¸€ä¸ªï¼Œå¹¶ä¸”è´Ÿè´£è½¬å‘è¯»å†™è¯·æ±‚ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-14/81902381.jpg" alt="">&lt;/p>
&lt;h4 id="çˆ¶èŠ‚ç‚¹æ›´æ–°-1">çˆ¶èŠ‚ç‚¹æ›´æ–° &lt;a href="#%e7%88%b6%e8%8a%82%e7%82%b9%e6%9b%b4%e6%96%b0-1" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>è¿™ä¸ªå°±éå¸¸ç®€å•ï¼Œå°±æ˜¯CASæ“ä½œåœ¨çˆ¶èŠ‚ç‚¹æ ‡è®°åˆ é™¤&lt;code>Q&lt;/code>èŠ‚ç‚¹çš„Keyå³å¯ã€‚&lt;/p>
&lt;h3 id="åºåˆ—åŒ–ç»“æ„ä¿®æ”¹">åºåˆ—åŒ–ç»“æ„ä¿®æ”¹ &lt;a href="#%e5%ba%8f%e5%88%97%e5%8c%96%e7%bb%93%e6%9e%84%e4%bf%ae%e6%94%b9" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>ä¸Šé¢çš„Bw-Treeç»“æ„ä¿®æ”¹çš„å®ç°éƒ½åŸºäºä¸€ä¸ªå‡è®¾ï¼šæ•°æ®åº“çš„åŒæ­¥æœºåˆ¶ä¼šå¤„ç†å¥½æ•°æ®æ›´æ–°å†²çªé—®é¢˜ã€‚&lt;/p>
&lt;p>åŒæ­¥æœºåˆ¶åŒ…æ‹¬æ•°æ®åº“ç³»ç»Ÿçš„é”ç®¡ç†å™¨ï¼ˆlock managerï¼‰ã€äº‹åŠ¡ç®¡ç†ç»„ä»¶ï¼ˆtransactional componentï¼‰ï¼›æˆ–è€…æ˜¯é‡‡ç”¨å¼ƒç–—æ–¹æ¡ˆï¼Œå…è®¸éšæœºäº¤å‰å†™ã€‚&lt;/p>
&lt;p>ä½†æ˜¯åœ¨Bw-Treeå†…éƒ¨ï¼Œæˆ‘ä»¬éœ€è¦åºåˆ—åŒ–æ ‘çš„ç»“æ„ä¿®æ”¹ï¼ˆä¿—ç§°æ’é˜Ÿï¼‰ã€‚å½“ä¸€ä¸ªSMOæ“ä½œé‡åˆ°äº†æœªå®Œæˆçš„SMOæ“ä½œæ—¶ï¼Œå½“å‰çº¿ç¨‹ä¼šç­‰å¾…ä¹‹å‰çš„SMOæ“ä½œå®Œæˆåå†ç»§ç»­å½“å‰æ“ä½œã€‚&lt;/p>
&lt;p>è¿™æ ·çš„æ–¹æ¡ˆå¯èƒ½ä¼šå½¢æˆä¸€ä¸ªâ€œSMOæ ˆâ€ï¼Œä½†æ˜¯è¿™ç§åœºæ™¯æ¯”è¾ƒå°‘è§ï¼Œå®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ã€‚&lt;/p>
&lt;h2 id="ç¼“å­˜ç®¡ç†">ç¼“å­˜ç®¡ç† &lt;a href="#%e7%bc%93%e5%ad%98%e7%ae%a1%e7%90%86" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>ç¼“å­˜å±‚è´Ÿè´£å†…å­˜ä¸SSDç£ç›˜ä¹‹é—´çš„è¯»ã€å†™å›ä»¥åŠæ¢é¡µæ“ä½œã€‚ç¼“å­˜å±‚ä¸ºBw-Treeå±‚æä¾›äº†é€»è¾‘é¡µçš„æŠ½è±¡ã€‚&lt;/p>
&lt;p>Bw-Treeä½¿ç”¨PIDè®¿é—®é€»è¾‘é¡µï¼Œå½“é€»è¾‘é¡µä½äºç£ç›˜ä¸­æ—¶ï¼Œç¼“å­˜å±‚å…ˆæŠŠé¡µè¯»å–åˆ°å†…å­˜ä¸­ï¼Œå†ä½¿ç”¨CASæ“ä½œå°†PIDæŒ‡é’ˆä»ç£ç›˜åç§»é‡æŒ‡å‘å†…å­˜åç§»é‡ã€‚&lt;/p>
&lt;h3 id="é¢„å†™æ—¥å¿—åè®®ä¸æ—¥å¿—åºåˆ—å·lsn">é¢„å†™æ—¥å¿—åè®®ä¸æ—¥å¿—åºåˆ—å·ï¼ˆLSNï¼‰ &lt;a href="#%e9%a2%84%e5%86%99%e6%97%a5%e5%bf%97%e5%8d%8f%e8%ae%ae%e4%b8%8e%e6%97%a5%e5%bf%97%e5%ba%8f%e5%88%97%e5%8f%b7lsn" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>æ—¥å¿—åºåˆ—å·ï¼ˆLSNï¼‰&lt;/li>
&lt;/ul>
&lt;p>æ’å…¥æˆ–ä¿®æ”¹Bw-Treeçš„å¢é‡éƒ½ä¼šè¢«æ‰“ä¸Šæ—¥å¿—åºåˆ—å·ã€‚æ—¥å¿—åºåˆ—å·ç”±äº‹åŠ¡å­ç³»ç»Ÿäº§ç”Ÿã€‚&lt;/p>
&lt;p>åœ¨é¡µçš„åˆ·å†™å¢é‡ï¼ˆflush deltaï¼‰ä¸­ï¼Œè®°å½•ç€æœ€åè¢«åˆ·å…¥ï¼ˆflushï¼‰ç£ç›˜çš„æ—¥å¿—åºåˆ—å·ã€‚&lt;/p>
&lt;ul>
&lt;li>äº‹åŠ¡æ—¥å¿—åè°ƒ&lt;/li>
&lt;/ul>
&lt;p>äº‹åŠ¡å­ç³»ç»Ÿç»´æŠ¤ç€ä¸€ä¸ªâ€œæœ€å¤§å†™å…¥æ—¥å¿—åºåˆ—å·â€ï¼ˆEnd of Stable Log, ESLï¼‰ã€‚äº‹åŠ¡å­ç³»ç»Ÿé€šè¿‡ESLæ¥é™åˆ¶æ•°æ®ç®¡ç†å­ç³»ç»Ÿçš„æŒä¹…åŒ–è¿›åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®ç®¡ç†å­ç³»ç»Ÿåªèƒ½æŒä¹…åŒ–äº‹åŠ¡å·å°äºESLçš„äº‹åŠ¡ã€‚è¿™ä¿è¯äº†é¢„å†™æ—¥å¿—åè®®çš„å› æœæ€§ã€‚&lt;/p>
&lt;p>æ•°æ®ç®¡ç†å­ç³»ç»Ÿé€šè¿‡å‘äº‹åŠ¡å­ç³»ç»Ÿåé¦ˆæœ€ååˆ·å†™çš„äº‹åŠ¡åºå·ä»¥æä¾›åé¦ˆã€‚å½“äº‹åŠ¡å­ç³»ç»Ÿæƒ³è¦å‘å‰ç§»åŠ¨â€œäº‹åŠ¡é‡åšæŒ‡é’ˆâ€ï¼ˆRedo-Scan-Start-Point, RSSPï¼‰æ—¶ï¼Œä¼šå‘äº‹åŠ¡å­ç³»ç»Ÿå‘é€è¯·æ±‚ã€‚å½“äº‹åŠ¡åºå·å¤§äºRSSPï¼Œä¸”å°äºESLçš„æ‰€ä»¥äº‹åŠ¡å…¨éƒ¨åˆ·å†™åˆ°ç£ç›˜ä¹‹åï¼Œæ•°æ®ç®¡ç†å­ç³»ç»Ÿä¼šå‘äº‹åŠ¡å­ç³»ç»Ÿå‘é€ACKä¿¡å·ã€‚æœ€åäº‹åŠ¡å­ç³»ç»Ÿå‘å‰ç§»åŠ¨RSSPï¼Œå·²ç»è½ç›˜çš„äº‹åŠ¡ä¿¡æ¯æŠ›å¼ƒã€‚&lt;/p>
&lt;ul>
&lt;li>Bw-Treeçš„ç»“æ„ä¿®æ”¹&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬å°†Bw-Treeçš„ç»“æ„ä¿®æ”¹ï¼ˆSMOï¼‰å°è£…æˆä¸ºä¸€ä¸ªç³»ç»Ÿäº‹åŠ¡ã€‚ç”±äºBw-Treeçš„ç»“æ„ä¿®æ”¹æ˜¯æ— é”çš„ï¼Œæ‰€ä»¥ä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€é¡µçš„æƒ…å†µã€‚&lt;/p>
&lt;p>å°†SMOè§†åšäº‹åŠ¡ï¼Œå…è®¸æˆ‘ä»¬å¹¶å‘çš„æ‰§è¡ŒSMOæ“ä½œï¼Œå½“ä¸”ä»…å½“æŸä¸€ä¸ªSMOæ“ä½œâ€œèƒœå‡ºâ€æ—¶ï¼Œæ‰å°†äº‹åŠ¡æäº¤ã€‚&lt;/p>
&lt;h3 id="å°†é¡µå†™å›æ—¥å¿—å¼å­˜å‚¨lss">å°†é¡µå†™å›æ—¥å¿—å¼å­˜å‚¨ï¼ˆLSSï¼‰ &lt;a href="#%e5%b0%86%e9%a1%b5%e5%86%99%e5%9b%9e%e6%97%a5%e5%bf%97%e5%bc%8f%e5%ad%98%e5%82%a8lss" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>é¡µå°è£…ï¼ˆPage Marshallingï¼‰&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬å¦‚æœè¦å°†é¡µå†™å›LSSï¼Œé¦–å…ˆè¦å…ˆé€»è¾‘é¡µè½¬åŒ–æˆçº¿æ€§é¡ºåºå­˜å‚¨çš„ç»“æ„ï¼Œä¾¿äºæˆ‘ä»¬å°†å…¶å­˜å‚¨åˆ°ç£ç›˜ã€‚&lt;/p>
&lt;p>ç„¶åæˆ‘ä»¬è¦å°†é¡µçš„çŠ¶æ€è®¾å®šä¸ºâ€œé”å®šâ€ï¼ˆcapturedï¼‰ï¼Œä»¥é˜²æ­¢åç»­çš„ä¿®æ”¹ç ´åé¢„å†™æ—¥å¿—åè®®ã€‚&lt;/p>
&lt;ul>
&lt;li>å¢é‡åˆ·å†™ï¼ˆIncremental Flushingï¼‰&lt;/li>
&lt;/ul>
&lt;p>å½“åˆ·å†™é¡µé¢æ—¶ï¼Œç¼“å­˜ç®¡ç†å™¨åªä¼šåˆ·å†™ESLä¹‹å‰çš„æ•°æ®è®°å½•ã€‚è¿™æ ·çš„å¥½å¤„æœ‰ï¼š&lt;/p>
&lt;ol>
&lt;li>å‡å°‘ç£ç›˜çš„ä½¿ç”¨&lt;/li>
&lt;li>é¿å…äº§ç”Ÿè¿‡å¤šçš„ç£ç›˜åƒåœ¾&lt;/li>
&lt;li>é¿å…SSDçš„å†™å…¥æ”¾å¤§å¼€é”€&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>åˆ·å†™æ“ä½œ&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨åŒBufferè¿›è¡Œç£ç›˜åˆ·å†™ï¼Œå¯ä»¥é¿å…çº¿ç¨‹ç­‰å¾…IOæ“ä½œã€‚&lt;/p>
&lt;p>åœ¨åˆ·å†™æ“ä½œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬ä¼šæ›´æ–°mapping tableï¼Œå°†é¡µæŒ‡é’ˆæ”¹å˜æˆç£ç›˜çš„åç§»é‡ã€‚å¹¶å°†å†…å­˜ä¸­çš„é¡µæ¢å‡ºã€‚&lt;/p>
&lt;p>ç¼“å­˜ç®¡ç†å™¨ä¼šç›‘è§†ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿç”¨ï¼Œå°±å°†ä¸€éƒ¨åˆ†é¡µä»è‡ªåŠ¨å†…å­˜ä¸­æ¢å‡ºã€‚&lt;/p>
&lt;h2 id="æ€§èƒ½">æ€§èƒ½ &lt;a href="#%e6%80%a7%e8%83%bd" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;h3 id="æˆ‘ä»¬çš„å¯¹æ‰‹">æˆ‘ä»¬çš„å¯¹æ‰‹ &lt;a href="#%e6%88%91%e4%bb%ac%e7%9a%84%e5%af%b9%e6%89%8b" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>BerkeleyDB&lt;/li>
&lt;/ul>
&lt;p>æ€§èƒ½è‰¯å¥½çš„ç‹¬ç«‹å­˜å‚¨å¼•æ“ã€‚æˆ‘ä»¬ä½¿ç”¨Cè¯­è¨€å®ç°ç‰ˆæœ¬ï¼Œå†…ç½®å­˜å‚¨å¼•æ“ä¸ºB-Treeã€‚&lt;/p>
&lt;p>è¿è¡Œæ¨¡å¼ä¸ºæ€§èƒ½è¾ƒå¥½çš„â€œæ— äº‹åŠ¡æ¨¡å¼â€ï¼Œæ”¯æŒä¸€å†™å¤šè¯»ã€‚&lt;/p>
&lt;p>åœ¨æ•´ä¸ªå®éªŒä¸­ï¼Œæˆ‘ä»¬å°†BerkeleyDBçš„ç¼“å­˜å¼€åˆ°è¶³å¤Ÿå¤§ï¼Œå…¨éƒ¨ä½¿ç”¨ä¸»å­˜è¿›è¡Œå­˜å‚¨ä¸æŸ¥è¯¢æ“ä½œã€‚&lt;/p>
&lt;ul>
&lt;li>SkipList&lt;/li>
&lt;/ul>
&lt;p>æ— é”çš„è·³è¡¨å®ç°ã€‚&lt;/p>
&lt;h3 id="æµ‹è¯•æ•°æ®é›†">æµ‹è¯•æ•°æ®é›† &lt;a href="#%e6%b5%8b%e8%af%95%e6%95%b0%e6%8d%ae%e9%9b%86" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>XBox Live &lt;br>
ç½‘æ¸¸æ•°æ®ã€‚Keyçš„å¹³å‡å¤§å°æ˜¯94Bytesï¼ŒValueçš„å¹³å‡å¤§å°æ˜¯1.2Kã€‚è¯»å†™æ¯”å¤§æ¦‚æ˜¯7.5: 1&lt;/li>
&lt;li>å•†ä¸šæ•°æ®åº“çš„å¤‡ä»½æµ &lt;br>
æ€»å…±æœ‰27Mæ•°æ®å—ï¼Œå»é‡åæœ‰12Mã€‚è¯»å†™æ¯”ä¸º2.2ï¼š1ï¼ŒKeyæ˜¯20Bytesçš„SHA1å“ˆå¸Œå€¼ï¼ŒValueæ˜¯44Bytesçš„å…ƒä¿¡æ¯ã€‚&lt;/li>
&lt;li>ç»¼åˆKVæ•°æ® &lt;br>
8Bytesæ•´æ•°Keyï¼Œ8Bytesæ•´æ•°Valueã€‚è¯»å†™æ¯”ä»5ï¼š1ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="æ¯”èµ›é¡¹ç›®">æ¯”èµ›é¡¹ç›® &lt;a href="#%e6%af%94%e8%b5%9b%e9%a1%b9%e7%9b%ae" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;h4 id="å¢é‡é“¾é•¿åº¦é˜ˆå€¼å¯¹æ€§èƒ½çš„å½±å“">å¢é‡é“¾é•¿åº¦é˜ˆå€¼å¯¹æ€§èƒ½çš„å½±å“ &lt;a href="#%e5%a2%9e%e9%87%8f%e9%93%be%e9%95%bf%e5%ba%a6%e9%98%88%e5%80%bc%e5%af%b9%e6%80%a7%e8%83%bd%e7%9a%84%e5%bd%b1%e5%93%8d" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-17/40340311.jpg" alt="">&lt;/p>
&lt;p>å¢é‡é“¾é•¿åº¦é˜ˆå€¼å½±å“è§¦å‘é¡µåˆå¹¶ï¼ˆconsolidationï¼‰çš„é¢‘ç‡ã€‚ä»å›¾ä¸­æˆ‘ä»¬åšå‡ºå¦‚ä¸‹æ¨æµ‹ï¼š&lt;/p>
&lt;ol>
&lt;li>å¢é‡é“¾é•¿åº¦è¾ƒçŸ­æ—¶ï¼Œè¯»å†™æ€§èƒ½å¥½ï¼Œä½†é¡µåˆå¹¶å¼€é”€å¤§&lt;/li>
&lt;li>å¢é‡é“¾é•¿åº¦è½¬é•¿æ—¶ï¼Œè¯»å†™å¼€é”€å¤§ï¼Œé¡µåˆå¹¶å¼€é”€å°&lt;/li>
&lt;/ol>
&lt;p>ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å°±åœ¨è¿™ä¸¤ä¸ªå› ç´ ä¸‹é¢å–ä¸€ä¸ªå¹³è¡¡ã€‚&lt;/p>
&lt;h4 id="æ— é”ç¯å¢ƒä¸‹çš„æ›´æ–°å¤±è´¥">æ— é”ç¯å¢ƒä¸‹çš„æ›´æ–°å¤±è´¥ &lt;a href="#%e6%97%a0%e9%94%81%e7%8e%af%e5%a2%83%e4%b8%8b%e7%9a%84%e6%9b%b4%e6%96%b0%e5%a4%b1%e8%b4%a5" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-17/63409936.jpg" alt="">&lt;/p>
&lt;p>æ•°æ®ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒBw-Treeå†™å…¥å¤±è´¥ï¼ˆFailed Updatesï¼‰æ˜¯éå¸¸å°‘çš„ã€‚ä½†æ˜¯â€œç»¼åˆâ€æ•°æ®é›†çš„â€œé¡µæ‹†åˆ†å¤±è´¥â€å’Œâ€œé¡µåˆå¹¶å¤±è´¥â€æ˜æ˜¾é«˜äºå…¶å®ƒæ•°æ®é›†ã€‚&lt;/p>
&lt;p>è¿™æ˜¯å› ä¸ºâ€œç»¼åˆâ€æ•°æ®é›†ä¸­çš„æ•°æ®éƒ½æ¯”è¾ƒå°ï¼Œæ›´æ–°èµ·æ¥æ¯”è¾ƒå¿«ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ¯”è¾ƒå¤šçš„çº¿ç¨‹ç«äº‰ã€‚&lt;/p>
&lt;h4 id="ä¸ä¼ ç»Ÿb-treeçš„æ¯”è¾ƒ">ä¸ä¼ ç»ŸB-Treeçš„æ¯”è¾ƒ &lt;a href="#%e4%b8%8e%e4%bc%a0%e7%bb%9fb-tree%e7%9a%84%e6%af%94%e8%be%83" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-17/63409936.jpg" alt="">&lt;/p>
&lt;p>Bw-Treeæ˜æ˜¾èƒœå‡ºï¼Œå…¶åŸå› æœ‰ï¼š&lt;/p>
&lt;ol>
&lt;li>Bw-Treeæ˜¯æ— é”çš„ï¼Œæ‰€ä»¥å¹¶å‘ç¨‹åº¦æ›´é«˜&lt;/li>
&lt;li>Bw-Treeå¯¹CPU cacheæ›´åŠ å‹å¥½&lt;/li>
&lt;/ol>
&lt;h4 id="bw-treeä¸æ— é”è·³è¡¨æ¯”è¾ƒ">Bw-Treeä¸æ— é”è·³è¡¨æ¯”è¾ƒ &lt;a href="#bw-tree%e4%b8%8e%e6%97%a0%e9%94%81%e8%b7%b3%e8%a1%a8%e6%af%94%e8%be%83" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-17/63409936.jpg" alt="">&lt;/p>
&lt;p>Bw-Treeä»ç„¶æ˜æ˜¾èƒœå‡ºï¼Œå…¶åŸå› å½’äºBw-Treeæ›´å‹å¥½ä½¿ç”¨äº†CPU cacheã€‚&lt;/p>
&lt;h4 id="ç¼“å­˜æ€§èƒ½">ç¼“å­˜æ€§èƒ½ &lt;a href="#%e7%bc%93%e5%ad%98%e6%80%a7%e8%83%bd" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/17-12-17/63354469.jpg" alt="">&lt;/p>
&lt;p>Bw-Treeçš„ä¼˜åŠ¿æœ‰ï¼š&lt;/p>
&lt;ol>
&lt;li>ä¸è·³è¡¨ç›¸æ¯”ä¸éœ€è¦è¿‡å¤šçš„æŒ‡é’ˆè·³è½¬&lt;/li>
&lt;li>å†…å­˜ä½¿ç”¨æ›´åŠ é«˜æ•ˆ&lt;/li>
&lt;/ol>
&lt;h2 id="åç»­201026">åç»­ï¼ˆ201026ï¼‰ &lt;a href="#%e5%90%8e%e7%bb%ad201026" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>åˆ°äº†æ–°ç»„ä¹‹åï¼Œå‘ç°äº†ä¸€ä¸ªä½¿ç”¨BW-Treeçš„å­˜å‚¨å¼•æ“ã€‚ä¸è¿‡å·²ç»å³å°†åºŸå¼ƒäº†ï¼ˆæŒ¥æ‰‹&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>ç‰¹æŒ‡Redisçš„ä¸€äº›ä¸»è¦åŠŸèƒ½&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>tree-basedæ•°æ®ç»“æ„çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯å›¾ä¹¦é¦†ã€‚å›¾ä¹¦é¦†ç”¨A-Zä»£è¡¨å¤§ç±»ï¼Œç„¶åä½¿ç”¨æ•°å­—ä»£è¡¨å°ç±»ï¼Œæœ€ååŠ ä¸Šä¸€ä¸ªæ•°å­—ç¡®å®šè¿™æœ¬ä¹¦çš„ä¹¦å·ã€‚ &lt;br>
å›¾ä¹¦é¦†è—ä¹¦çš„é¡ºåºæ˜¯æŒ‰ç…§ä¹¦å·çš„é¡ºåºè¿›è¡Œæ’åºçš„ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨æŸ¥æ‰¾ä¸€æœ¬ä¹¦çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹å®šçš„ä¹¦å·ï¼Œåˆ©ç”¨å…¶ä¸­çš„å±‚æ¬¡ä¿¡æ¯æŸ¥æ‰¾æŸä¸€æœ¬ä¹¦ï¼Œä¹Ÿå¯ä»¥æ ¹æ®æŸä¸€ä¸ªä¹¦å·èŒƒå›´è¿›è¡ŒæŸ¥æ‰¾ä¸€ç³»åˆ—è¿ç»­çš„ä¹¦ã€‚ &lt;br>
å¦‚æœè¿˜å¼„ä¸æ˜ç™½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨&lt;a href="http://www.ztflh.com/">ä¸­å›½å›¾ä¹¦é¦†åˆ†ç±»æ³•ç½‘ç«™&lt;/a>åŠ æ·±ä¸€ä¸‹ç†è§£ã€‚&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item></channel></rss>