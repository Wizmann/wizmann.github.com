<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Distributed System on Maerlyn's Rainbow</title><link>https://wizmann.top/tags/distributed-system/</link><description>Recent content in Distributed System on Maerlyn's Rainbow</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Wed, 27 Dec 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://wizmann.top/tags/distributed-system/index.xml" rel="self" type="application/rss+xml"/><item><title>[tl;dr] è®ºæ–‡é˜…è¯»ï¼šBorg - Large-scale cluster management at Google</title><link>https://wizmann.top/posts/tl-dr-borg/</link><pubDate>Wed, 27 Dec 2023 00:00:00 +0000</pubDate><guid>https://wizmann.top/posts/tl-dr-borg/</guid><description>&lt;ul>
&lt;li>
&lt;h2 id="ç³»ç»Ÿæ¦‚è§ˆ">ç³»ç»Ÿæ¦‚è§ˆ &lt;a href="#%e7%b3%bb%e7%bb%9f%e6%a6%82%e8%a7%88" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>Borgæ˜¯è°·æ­Œå¼€å‘çš„ä¸€ç§é«˜æ•ˆçš„é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œæ—¨åœ¨ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡å’Œæé«˜ç³»ç»Ÿçš„å¯é æ€§åŠå¯ç”¨æ€§
&lt;ul>
&lt;li>éšè—èµ„æºç®¡ç†ç»†èŠ‚ä¸æ•…éšœå¤„ç†ï¼Œå…è®¸ç”¨æˆ·ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å¼€å‘&lt;/li>
&lt;li>ä¿è¯éå¸¸é«˜çš„å¯é æ€§å’Œå¯ç”¨æ€§ï¼Œä»¥æ”¯æŒç”¨æˆ·åº”ç”¨ç¨‹åºçš„é«˜å¯é æ€§å’Œé«˜å¯ç”¨æ€§&lt;/li>
&lt;li>æ”¯æŒè¿è¡Œæ¥è‡ªä¼—å¤šåº”ç”¨çš„æ•°åä¸‡ä¸ªä½œä¸šï¼Œå¹¶é«˜æ•ˆè¿è¡Œäºæ•°ä»¥ä¸‡è®¡çš„æœºå™¨ä¸Š&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h2 id="ç”¨æˆ·è§†è§’">ç”¨æˆ·è§†è§’ &lt;a href="#%e7%94%a8%e6%88%b7%e8%a7%86%e8%a7%92" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>ç”¨æˆ·é€šè¿‡å®šä¹‰&lt;em>job&lt;/em>å’Œ&lt;em>task&lt;/em>ä¸Borgè¿›è¡Œäº¤äº’
&lt;ul>
&lt;li>ä¸€ä¸ª&lt;em>job&lt;/em>ç”±è¿è¡Œç›¸åŒç¨‹åºçš„ä¸€ä¸ªæˆ–å¤šä¸ª&lt;em>task&lt;/em>ç»„æˆ&lt;/li>
&lt;li>æ¯ä¸€ä¸ª&lt;em>job&lt;/em>è¿è¡Œäºä¸€ä¸ª&lt;em>Borg cell&lt;/em>ï¼ˆå•å…ƒï¼‰ä¹‹ä¸­ï¼Œ&lt;em>cell&lt;/em>æ˜¯ä¸€ç»„æœºå™¨çš„é›†åˆï¼Œæ˜¯Borgç®¡ç†çš„åŸºæœ¬å•å…ƒ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Borgçš„å·¥ä½œè´Ÿè½½
&lt;ul>
&lt;li>é•¿æœŸè¿è¡Œçš„æ—¶å»¶æ•æ„Ÿå‹æœåŠ¡&lt;/li>
&lt;li>æ‰¹å¤„ç†ä½œä¸š&lt;/li>
&lt;li>è¿è¡Œåœ¨å®ä½“æœºä¸Šï¼Œé¿å…VMçš„è™šæ‹ŸåŒ–å¼€é”€&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>Allocs&lt;/em>
&lt;ul>
&lt;li>é¢„ç•™ç»™ä¸€é¡¹æˆ–å¤šé¡¹ä»»åŠ¡çš„ä¸€ç»„èµ„æº&lt;/li>
&lt;li>&lt;em>Alloc&lt;/em>å¯ä»¥å°†ä¸åŒ &lt;em>jobs&lt;/em> çš„ &lt;em>tasks&lt;/em> èšé›†åˆ°åŒä¸€å°æœºå™¨ä¸Š&lt;/li>
&lt;li>å¦‚æœä¸€ä¸ª &lt;em>alloc&lt;/em> å¿…é¡»é‡æ–°åˆ†é…åˆ°å¦å¤–ä¸€å°ä¸»æœºï¼Œå±äºå®ƒçš„ &lt;em>task(s)&lt;/em> ä¹Ÿä¼šåŒå®ƒä¸€èµ·é‡æ–°è¢«è°ƒåº¦&lt;/li>
&lt;li>ä¸€æ—¦åˆ›å»ºä¸€ä¸ª &lt;em>alloc&lt;/em> é›†åˆï¼Œå°±å¯ä»¥æäº¤ä¸€ä¸ªæˆ–å¤šä¸ª jobs è¿è¡Œå…¶ä¸­&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å‘½åæœåŠ¡å’Œç›‘æ§
&lt;ul>
&lt;li>BorgåŒ…å«ä¸€ä¸ªç¨³å®šçš„ &lt;em>Borgå‘½åæœåŠ¡&lt;/em> (BNS)ï¼ŒåŒ…æ‹¬ cell åï¼Œjob åå’Œ task id&lt;/li>
&lt;li>Borgå°† &lt;em>task&lt;/em> çš„ä¸»æœºåå’Œç«¯å£å†™å…¥ Chubbyï¼Œç”¨äº RPC ç³»ç»ŸæŸ¥æ‰¾ task endpoint&lt;/li>
&lt;li>Borgè¿˜ä¼šå°† &lt;em>job&lt;/em> sizeä¸å…¶è¿è¡ŒçŠ¶æ€å†™å…¥Chubbyï¼Œä¾¿äºload balancerå¹³è¡¡æµé‡&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h2 id="borgçš„æ¶æ„">Borgçš„æ¶æ„ &lt;a href="#borg%e7%9a%84%e6%9e%b6%e6%9e%84" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&lt;em>Borgmaster&lt;/em>
&lt;ul>
&lt;li>ä¸»ç®¡ç†è¿›ç¨‹
&lt;ul>
&lt;li>é€»è¾‘ä¸Šçš„â€œå•ç‚¹â€ï¼Œæœ‰5ä¸ªåœ¨çº¿å¤‡ä»½ï¼Œä½¿ç”¨Paxosé€‰ä¸¾master&lt;/li>
&lt;li>çŠ¶æ€å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”å¤‡ä»½åœ¨é«˜å¯é æ€§çš„Paxoså­˜å‚¨ä¸­&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>è°ƒåº¦è¿›ç¨‹
&lt;ul>
&lt;li>å¯è¡Œæ€§æ£€æŸ¥
&lt;ul>
&lt;li>ç”¨äºæ‰¾åˆ°æ»¡è¶³ä»»åŠ¡çº¦æŸã€å…·å¤‡è¶³å¤Ÿå¯ç”¨èµ„æºçš„ä¸€ç»„æœºå™¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ‰“åˆ†ï¼ˆscoringï¼‰
&lt;ul>
&lt;li>åœ¨â€œå¯è¡Œæœºå™¨â€ä¸­æ ¹æ®ç”¨æˆ·åå¥½ï¼Œä¸ºæœºå™¨æ‰“åˆ†&lt;/li>
&lt;li>æ‰“åˆ†ç­–ç•¥
&lt;ul>
&lt;li>worst fitï¼ˆE-PVNçš„å˜ç§ï¼‰ä¼šå°†ä»»åŠ¡åˆ†æ•£åˆ°ä¸åŒçš„æœºå™¨ä¸Š
&lt;ul>
&lt;li>æœ‰ä½™é‡åº”å¯¹æµé‡çš„å°–å³°&lt;/li>
&lt;li>ä¼šå¯¼è‡´èµ„æºçš„ç¢ç‰‡åŒ–ï¼Œé˜»ç¢å¤§å‹&lt;em>task&lt;/em>çš„éƒ¨ç½²&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>best fitï¼Œä¼šå°½é‡â€œç´§å‡‘â€çš„ä½¿ç”¨æœºå™¨ï¼Œä»¥å‡å°‘èµ„æºç¢ç‰‡
&lt;ul>
&lt;li>ä¾¿äºå¤§å‹&lt;em>task&lt;/em>çš„éƒ¨ç½²&lt;/li>
&lt;li>é”™è¯¯çš„èµ„æºä¼°è®¡ä¼šè¢«â€œæƒ©ç½šâ€ï¼Œå°¤å…¶å½±å“çªå‘çš„è´Ÿè½½&lt;/li>
&lt;li>å½±å“åˆ©äºå¯Œè£•è®¡ç®—èµ„æºçš„batch jobs&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ··åˆæ¨¡å‹ï¼Œå°½é‡å‡å°‘â€œå—å›°èµ„æºâ€ï¼Œå³å› ä¸ºå…¶å®ƒèµ„æºè¢«å®Œå…¨å ç”¨è€Œæ— æ³•åˆ†é…å‡ºå»çš„èµ„æº&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä¼˜åŒ–
&lt;ul>
&lt;li>å¯åŠ¨æ—¶é—´ä¼˜åŒ–
&lt;ul>
&lt;li>ä¸­ä½æ•°å¯åŠ¨æ—¶é—´ä¸º25sï¼Œ80%ç”¨äºå®‰è£…ç›¸å…³ä¾èµ–&lt;/li>
&lt;li>å°†ç›¸å…³&lt;em>task&lt;/em>ä¼˜å…ˆåˆ†é…åˆ°æ‹¥æœ‰ç›¸å…³ä¾èµ–çš„æœºå™¨ä¸Š&lt;/li>
&lt;li>ä½¿ç”¨ &lt;em>tree-like&lt;/em> æˆ– &lt;em>torrent-like&lt;/em> æœºåˆ¶ï¼Œå¹¶å‘çš„åˆ†å‘ç›¸å…³ä¾èµ–&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>è®¡ç®—å¼€é”€ä¼˜åŒ–
&lt;ul>
&lt;li>ä½¿å¾—Borgèƒ½ç®¡ç†æ›´å¤šçš„æœºå™¨&lt;/li>
&lt;li>æ‰“åˆ†ç¼“å­˜ï¼šå°†å¯è¡Œæ€§æ£€æŸ¥å’Œæ‰“åˆ†ç»“æœç¼“å­˜&lt;/li>
&lt;li>ç­‰ä»·ç±»ï¼šåŒä¸€ &lt;em>job&lt;/em> ä¸­çš„ &lt;em>task&lt;/em> é€šå¸¸å…·æœ‰ç±»ä¼¼çš„çº¦æŸï¼Œå› æ­¤å¯ä»¥å°†å¤šä¸ªä»»åŠ¡è§†ä¸ºä¸€ä¸ªç­‰ä»·ç±»&lt;/li>
&lt;li>æ¾å¼›éšæœºåŒ–ï¼šè®¡ç®—æ‰€æœ‰æœºå™¨çš„å¯è¡Œæ€§å’Œå¾—åˆ†ä»£ä»·å¤ªé«˜ï¼Œå¯ä»¥éšæœºå–æ ·ä¸€æ‰¹æœºå™¨ï¼Œç„¶åé€‰æ‹©å…¶ä¸­ä¸€ä¸ªâ€œè¶³å¤Ÿå¥½â€çš„æœºå™¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;em>Borglet&lt;/em>
&lt;ul>
&lt;li>&lt;em>Borglet&lt;/em> æ˜¯è¿è¡Œåœ¨æ¯å°æœºå™¨ä¸Šçš„æœ¬åœ°ä»£ç†ï¼Œç®¡ç†æœ¬åœ°çš„ä»»åŠ¡å’Œèµ„æº&lt;/li>
&lt;li>&lt;em>Borgmaster&lt;/em> ä¼šå‘¨æœŸæ€§åœ°å‘æ¯ä¸€ä¸ªBorgletæ‹‰å–å½“å‰çŠ¶æ€ï¼Œæ˜“äºæ§åˆ¶é€šä¿¡é€Ÿåº¦ï¼Œé¿å…â€œæ¢å¤é£æš´â€&lt;/li>
&lt;li>ä¸ºäº†æ€§èƒ½å¯æ‰©å±•æ€§ï¼Œæ¯ä¸ªBorgmasterå‰¯æœ¬ä¼šè¿è¡Œæ— çŠ¶æ€çš„ &lt;em>link shard&lt;/em> å»å¤„ç†ä¸éƒ¨åˆ†Borgleté€šä¿¡
&lt;ul>
&lt;li>å½“ &lt;em>Borgmaster&lt;/em> é‡æ–°é€‰ä¸¾æ—¶ï¼Œ&lt;em>link shard&lt;/em> ä¼šé‡æ–°åˆ’åˆ†åˆ†åŒº&lt;/li>
&lt;li>&lt;em>link shard&lt;/em> ä¼šèšåˆå’Œå‹ç¼©ä¿¡æ¯ï¼Œä»…ä»…å‘è¢«BorgmasteræŠ¥å‘ŠçŠ¶æ€çš„æ›´æ–°ï¼Œä»¥æ­¤å‡å°‘æ›´æ–°è´Ÿè½½&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¦‚æœ &lt;em>Borglet&lt;/em> å¤šè½®æ²¡æœ‰å“åº”èµ„æºæŸ¥è¯¢ï¼Œåˆ™ä¼šè¢«æ ‡è®°ä¸ºdownã€‚è¿è¡Œå…¶ä¸Šçš„ä»»åŠ¡ä¼šè¢«é‡æ–°è°ƒåº¦åˆ°å…¶ä»–æœºå™¨ã€‚å¦‚æœæ¢å¤é€šä¿¡ï¼Œåˆ™ &lt;em>Borgmaster&lt;/em> ä¼šé€šçŸ¥ &lt;em>Borglet&lt;/em> æ€æ­»å·²ç»é‡æ–°è°ƒåº¦çš„ä»»åŠ¡ï¼Œä»¥æ­¤ä¿è¯ä»»åŠ¡çš„å”¯ä¸€æ€§&lt;/li>
&lt;li>Borgletä¸Borgmasterå¤±å»è”ç³»æ—¶ï¼Œä»ä¼šç»§ç»­å¤„ç†ç›¸å…³ä»»åŠ¡ã€‚ä»¥åº”å¯¹ &lt;em>Borgmaster&lt;/em> çš„æš‚æ—¶å¤±æ•ˆ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h2 id="å¯é æ€§">å¯é æ€§ &lt;a href="#%e5%8f%af%e9%9d%a0%e6%80%a7" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>è‡ªåŠ¨é‡æ–°è°ƒåº¦å™¨è¢«é©±é€çš„ä»»åŠ¡&lt;/li>
&lt;li>å°†ä»»åŠ¡åˆ†æ•£åˆ°ä¸åŒçš„å¤±è´¥åŸŸä¸­&lt;/li>
&lt;li>é™åˆ¶ä¸€ä¸ªä½œä¸šä¸­åŒæ—¶å¤±è´¥ä»»åŠ¡çš„ä¸ªæ•°å’Œä¸­æ–­ç‡&lt;/li>
&lt;li>ä½¿ç”¨å£°æ˜å¼çš„æœŸæœ›çŠ¶æ€è¡¨ç¤ºå’Œå¹‚ç­‰çš„å˜æ›´æ“ä½œï¼Œä»¥ä¾¿æ— å®³åœ°é‡æ–°æäº¤è¯·æ±‚&lt;/li>
&lt;li>å¯¹äºæœºå™¨çº§åˆ«çš„å¤±æ•ˆï¼Œé™åˆ¶å…¶é‡æ–°è°ƒåº¦çš„é€Ÿç‡ï¼Œå› ä¸ºéš¾ä»¥åŒºåˆ†å¤§è§„æ¨¡æœºå™¨æ•…éšœå’Œç½‘ç»œåˆ†åŒº&lt;/li>
&lt;li>é¿å…é‡è¯•å¼•å‘é”™è¯¯çš„&amp;lt;ä»»åŠ¡-æœºå™¨&amp;gt;åŒ¹é…å¯¹&lt;/li>
&lt;li>å…³é”®æ•°æ®æŒä¹…åŒ–ï¼Œå†™å…¥ç£ç›˜&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h2 id="èµ„æºåˆ©ç”¨å’Œæ•ˆç‡">èµ„æºåˆ©ç”¨å’Œæ•ˆç‡ &lt;a href="#%e8%b5%84%e6%ba%90%e5%88%a9%e7%94%a8%e5%92%8c%e6%95%88%e7%8e%87" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>è¯„ä¼°æ–¹æ³•
&lt;ul>
&lt;li>&lt;em>cell compaction&lt;/em>ï¼šé€šè¿‡ç§»é™¤æœºå™¨æ¥æ‰¾å‡ºç»™å®šå·¥ä½œè´Ÿè½½èƒ½é€‚åº”çš„æœ€å°çš„å•å…ƒå¤§å°ï¼Œç„¶ååå¤ä»å¤´å¼€å§‹é‡æ–°æ‰“åŒ…å·¥ä½œè´Ÿè½½ï¼Œä»¥ç¡®ä¿ä¸ä¼šå› é”™è¯¯çš„é…ç½®è€Œé™·å…¥å›°å¢ƒ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>â€œå•å…ƒå…±äº«â€ï¼šåœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œç”Ÿäº§ä»»åŠ¡å’Œéç”Ÿäº§ä»»åŠ¡ï¼Œä»¥ä¼˜åŒ–èµ„æºä½¿ç”¨
&lt;ul>
&lt;li>å®éªŒè¡¨æ˜ï¼Œå…±äº«èµ„æºä¼šå½±å“å®é™…çš„CPUè®¡ç®—æ€§èƒ½&lt;/li>
&lt;li>ä½†æ˜¯åœ¨èŠ‚çº¦æˆæœ¬çš„å·¨å¤§ä¼˜åŠ¿ä¸Šé¢ï¼ŒCPUæ€§èƒ½çš„é€€åŒ–æ˜¯å¯ä»¥å®¹å¿çš„&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>â€œå¤§å‹å•å…ƒâ€ï¼šå…è®¸è¶…å¤§å‹è®¡ç®—ä»»åŠ¡ï¼Œå‡å°‘ä»»åŠ¡çš„ç¢ç‰‡åŒ–&lt;/li>
&lt;li>ç»†ç²’åº¦èµ„æºè¯·æ±‚
&lt;ul>
&lt;li>ä»¥åƒåˆ†ä¹‹ä¸€çš„CPUæ ¸ï¼Œå’Œå†…å­˜ã€ç£ç›˜çš„å­—èŠ‚æ•°ä¸ºèµ„æºè¯·æ±‚çš„æœ€å°å•å…ƒ&lt;/li>
&lt;li>ç›¸æ¯”é¢„è®¾èµ„æºåˆ†é…ï¼ˆå¥—é¤ï¼‰ï¼Œå¯ä»¥é¿å…é¢å¤–çš„èµ„æºå¼€é”€&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>èµ„æºå›æ”¶
&lt;ul>
&lt;li>å¯¹äºå¯ä»¥å®¹å¿ä½è´¨é‡èµ„æºçš„å·¥ä½œï¼ˆä¾‹å¦‚æ‰¹å¤„ç†ä½œä¸šï¼‰ï¼ŒBorgä¼šè¯„ä¼°ä»»åŠ¡å°†ä½¿ç”¨çš„èµ„æºï¼Œå¹¶å›æ”¶ç©ºé—²èµ„æº&lt;/li>
&lt;li>æœ€åˆçš„é¢„ç•™å€¼ä¸å…¶èµ„æºè¯·æ±‚ä¸€è‡´ï¼Œç„¶å300ç§’ä¹‹åï¼Œä¼šæ…¢æ…¢é™ä½åˆ°å®é™…ä½¿ç”¨ç‡å¤–åŠ ä¸€ä¸ªå®‰å…¨è¾¹ç¼˜&lt;/li>
&lt;li>å¦‚æœåˆ©ç”¨ç‡è¶…è¿‡èµ„æºé¢„ç•™å€¼ï¼Œé¢„ç•™å€¼ä¼šå¿«é€Ÿå¢é•¿ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h2 id="éš”ç¦»ä¸å®‰å…¨æ€§">éš”ç¦»ä¸å®‰å…¨æ€§ï¼š &lt;a href="#%e9%9a%94%e7%a6%bb%e4%b8%8e%e5%ae%89%e5%85%a8%e6%80%a7" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>å®‰å…¨éš”ç¦»
&lt;ul>
&lt;li>ä½¿ç”¨Linux chroot jailåœ¨å…±äº«åŒä¸€å°æœºå™¨çš„ä»»åŠ¡ä¹‹é—´ç¡®ä¿å®‰å…¨æ€§&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ€§èƒ½éš”ç¦»
&lt;ul>
&lt;li>åŸºäºcgroupçš„èµ„æºå®¹å™¨ï¼Œå…è®¸è¯¦ç»†çš„èµ„æºæ ¸ç®—å¹¶æ‰§è¡Œé™åˆ¶ï¼Œé˜²æ­¢ä»»åŠ¡ç›¸äº’å¹²æ‰°ï¼Œç¡®ä¿ç¨³å®šå’Œå¯é¢„æµ‹çš„æ€§èƒ½&lt;/li>
&lt;li>ä½¿ç”¨&lt;em>appclass&lt;/em>ï¼Œå°½å¯èƒ½ä¿è¯å»¶è¿Ÿæ•æ„ŸæœåŠ¡çš„èµ„æºä½¿ç”¨&lt;/li>
&lt;li>åŒºåˆ†&lt;em>å¯å‹ç¼©èµ„æº&lt;/em> å’Œ &lt;em>ä¸å¯å‹ç¼©èµ„æº&lt;/em>
&lt;ul>
&lt;li>å¯å‹ç¼©èµ„æºï¼ˆcompressiableï¼‰ - CPU%å’ŒDisk IOï¼Œå¯ä»¥æš‚æ—¶é™æµ&lt;/li>
&lt;li>ä¸å¯å‹ç¼©èµ„æºï¼ˆnon-compressibleï¼‰ - å†…å­˜ã€ç£ç›˜å ç”¨ï¼Œéœ€è¦æ¸…é™¤ä¼˜å…ˆçº§ä½çš„çº¿ç¨‹&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å†…æ ¸çš„CPUè°ƒåº¦å™¨ï¼Œå…è®¸æ ¹æ®æ¯ä¸ªèµ„æºå®¹å™¨çš„è´Ÿè½½çŠ¶å†µæ¥åŠ¨æ€å†³å®šæ˜¯å¦è¦é©±é€ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼ŒåŒæ—¶é¿å…å¤šä¸ªé«˜ä¼˜å…ˆçº§ä»»åŠ¡åœ¨ä¸€ä¸ªcpuä¸Šäº‰æŠ¢
&lt;ul>
&lt;li>ä»åœ¨å°è¯•cpuè°ƒåº¦æ—¶æ›´å¥½çš„è€ƒè™‘çº¿ç¨‹äº²å’Œã€NUMAäº²å’Œç­‰ç­–ç•¥&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h2 id="ç»éªŒæ•™è®­">ç»éªŒæ•™è®­ï¼š &lt;a href="#%e7%bb%8f%e9%aa%8c%e6%95%99%e8%ae%ad" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>
&lt;h3 id="è´Ÿé¢ç»éªŒ">è´Ÿé¢ç»éªŒ &lt;a href="#%e8%b4%9f%e9%9d%a2%e7%bb%8f%e9%aa%8c" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>&lt;em>Job&lt;/em>ä½œä¸º&lt;em>Task&lt;/em>çš„å”¯ä¸€åˆ†ç»„æœºåˆ¶çš„å±€é™æ€§
&lt;ul>
&lt;li>ç¼ºä¹å°†æ•´ä¸ªå¤š&lt;em>Job&lt;/em>æœåŠ¡ä½œä¸ºå•ä¸€å®ä½“è¿›è¡Œç®¡ç†ï¼Œæˆ–å¼•ç”¨æœåŠ¡ç›¸å…³&lt;em>Job&lt;/em>ï¼ˆå¦‚Canaryä¸Prodæ»šåŠ¨æ›´æ–°ï¼‰çš„æ–¹å¼&lt;/li>
&lt;li>ç”¨æˆ·ä¼šåœ¨&lt;em>Job&lt;/em>åç§°ä¸­ç¼–å…¥æ‹“æ‰‘ï¼Œå¹¶æ„å»ºå¤–éƒ¨ç®¡ç†å·¥å…·æ¥è§£æè¿™äº›åç§°ï¼Œè¿™å¯¼è‡´äº†æ»šåŠ¨æ›´æ–°å’Œä½œä¸šè°ƒæ•´å¤§å°ç­‰é—®é¢˜çš„ä¸çµæ´»è¯­ä¹‰&lt;/li>
&lt;li>Kubernetesé€šè¿‡ä½¿ç”¨æ ‡ç­¾ç»„ç»‡å…¶è°ƒåº¦å•å…ƒï¼ˆPodsï¼‰ï¼Œæä¾›äº†æ›´å¤šçµæ´»æ€§&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å•ä¸ªIPåœ°å€å¸¦æ¥çš„å¤æ‚æ€§
&lt;ul>
&lt;li>åŒä¸€å°æœºå™¨ä¸Šçš„æ‰€æœ‰ä»»åŠ¡å…±äº«è¯¥æœºå™¨çš„å•ä¸ªIPåœ°å€å’Œç«¯å£ç©ºé—´&lt;/li>
&lt;li>å¯¼è‡´ç«¯å£ä¹Ÿæˆä¸ºä¸€ç§èµ„æºï¼Œåœ¨è°ƒåº¦æ—¶å€™éœ€è¦è¢«è€ƒè™‘&lt;/li>
&lt;li>Kubernetesé‡‡ç”¨äº†æ›´å‹å¥½çš„æ–¹æ³•ï¼Œæ¯ä¸ªPodå’ŒæœåŠ¡éƒ½è·å–è‡ªå·±çš„IPåœ°å€ï¼Œä»è€Œç®€åŒ–äº†è¿™äº›å¤æ‚æ€§ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>åå‘äºé«˜çº§ç”¨æˆ·
&lt;ul>
&lt;li>Borgæä¾›äº†ä¸€æ•´å¥—é¢å‘â€œé«˜çº§ç”¨æˆ·â€çš„åŠŸèƒ½ï¼Œå…è®¸ä»–ä»¬ç»†è‡´è°ƒæ•´ç¨‹åºè¿è¡Œæ–¹å¼&lt;/li>
&lt;li>è¿™ç§APIçš„ä¸°å¯Œæ€§ä½¿å¾—å¯¹äºâ€œæ™®é€šâ€ç”¨æˆ·æ›´åŠ å›°éš¾ï¼Œå¹¶é™åˆ¶äº†å…¶æ¼”å˜&lt;/li>
&lt;li>Googleæ„å»ºäº†è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå¯¹äºå…è®¸â€œå¤±è´¥â€çš„åº”ç”¨ç¨‹åºï¼Œé€šè¿‡å®éªŒæ¥æ¢æµ‹é€‚å½“é…ç½®&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="ç§¯æç»éªŒ">ç§¯æç»éªŒ &lt;a href="#%e7%a7%af%e6%9e%81%e7%bb%8f%e9%aa%8c" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>Allocsæ˜¯æœ‰ç”¨çš„
&lt;ul>
&lt;li>Kubernetesä¸­çš„Allocç­‰æ•ˆç‰©æ˜¯Podï¼Œå®ƒæ˜¯ä¸€ä¸ªèµ„æºåŒ…ï¼Œç”¨äºä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ï¼Œæ€»æ˜¯è¢«è°ƒåº¦åˆ°åŒä¸€å°æœºå™¨ä¸Šå¹¶å¯ä»¥å…±äº«èµ„æº&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>é›†ç¾¤ç®¡ç†ä¸ä»…æ˜¯ä»»åŠ¡ç®¡ç†
&lt;ul>
&lt;li>å°½ç®¡Borgçš„ä¸»è¦è§’è‰²æ˜¯ç®¡ç†ä»»åŠ¡å’Œæœºå™¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†è¿è¡Œåœ¨Borgä¸Šçš„åº”ç”¨ç¨‹åºä»è®¸å¤šå…¶ä»–é›†ç¾¤æœåŠ¡ä¸­å—ç›Šï¼ŒåŒ…æ‹¬å‘½åå’Œè´Ÿè½½å‡è¡¡&lt;/li>
&lt;li>Kubernetesä½¿ç”¨æœåŠ¡æŠ½è±¡æ”¯æŒå‘½åå’Œè´Ÿè½½å‡è¡¡ï¼ŒæœåŠ¡æœ‰ä¸€ä¸ªåç§°å’Œä¸€ç»„ç”±æ ‡ç­¾é€‰æ‹©å™¨å®šä¹‰çš„åŠ¨æ€Podsã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>è‡ªçœè‡³å…³é‡è¦
&lt;ul>
&lt;li>å°½ç®¡Borgå‡ ä¹æ€»æ˜¯â€œè¿è¡Œè‰¯å¥½â€ï¼Œä½†å½“å‡ºç°é—®é¢˜æ—¶ï¼Œæ‰¾åˆ°æ ¹æœ¬åŸå› å¯èƒ½å…·æœ‰æŒ‘æˆ˜æ€§&lt;/li>
&lt;li>Borgçš„é‡è¦è®¾è®¡å†³ç­–ä¹‹ä¸€æ˜¯å‘æ‰€æœ‰ç”¨æˆ·å±•ç¤ºè°ƒè¯•ä¿¡æ¯&lt;/li>
&lt;li>Kubernetesæ—¨åœ¨å¤åˆ¶Borgçš„è®¸å¤šå†…çœæŠ€æœ¯ï¼Œä¾‹å¦‚ï¼Œå®ƒé…å¤‡äº†cAdvisorç­‰å·¥å…·è¿›è¡Œèµ„æºç›‘æ§å’ŒåŸºäºElasticsearch/Kibanaå’ŒFluentdçš„æ—¥å¿—èšåˆ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä¸»æ§èŠ‚ç‚¹æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒ
&lt;ul>
&lt;li>Borgmasteræœ€åˆè¢«è®¾è®¡ä¸ºä¸€ä¸ªå•ä½“ç³»ç»Ÿï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒå˜å¾—æ›´åƒæ˜¯ä¸€ä¸ªå†…æ ¸ï¼Œä½äºåä½œç®¡ç†ç”¨æˆ·ä½œä¸šçš„ä¸€ç³»åˆ—æœåŠ¡çš„ä¸­å¿ƒ&lt;/li>
&lt;li>Kubernetesæ¶æ„æ›´è¿›ä¸€æ­¥ï¼Œå®ƒæœ‰ä¸€ä¸ªæ ¸å¿ƒçš„APIæœåŠ¡å™¨ï¼Œä»…è´Ÿè´£å¤„ç†è¯·æ±‚å’Œæ“çºµåº•å±‚çŠ¶æ€å¯¹è±¡ï¼Œé›†ç¾¤ç®¡ç†é€»è¾‘è¢«æ„å»ºä¸ºå°å‹å¯ç»„åˆçš„å¾®æœåŠ¡ï¼Œè¿™äº›æœåŠ¡æ˜¯è¿™ä¸ªAPIæœåŠ¡å™¨çš„å®¢æˆ·ç«¯â€‹â€‹&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://research.google/pubs/large-scale-cluster-management-at-google-with-borg/">è®ºæ–‡&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="alert alert-info" role="alert">æœ¬æ–‡éƒ¨åˆ†å†…å®¹ç”±ChatGPT4ç”Ÿæˆ&lt;/div></description></item><item><title>[tl;dr] è®ºæ–‡é˜…è¯»ï¼šRarest First and Choke Algorithms Are Enough</title><link>https://wizmann.top/posts/tl-dr-rarest-first-and-choke-algorithms-are-enough/</link><pubDate>Fri, 08 Dec 2023 00:00:00 +0000</pubDate><guid>https://wizmann.top/posts/tl-dr-rarest-first-and-choke-algorithms-are-enough/</guid><description>&lt;ul>
&lt;li>
&lt;h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ &lt;a href="#%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&lt;strong>Peer&lt;/strong>ï¼šBitTorrent P2Pä¸‹è½½çš„å‚ä¸è€…&lt;/li>
&lt;li>&lt;strong>Leecher&lt;/strong>ï¼šâ€œå¸è¡€è€…â€ï¼Œä»åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­çš„peer&lt;/li>
&lt;li>&lt;strong>Seeder&lt;/strong>ï¼šåšç§è€…ï¼Œä¸‹è½½å®Œæˆåè¿˜åœ¨ç»§ç»­åšç§çš„peer&lt;/li>
&lt;li>&lt;strong>Piece&lt;/strong>ï¼šPieceæ˜¯æ–‡ä»¶çš„æ•°æ®å•å…ƒã€‚å½“æ–‡ä»¶è¢«åˆ†äº«æ—¶ï¼Œå®ƒè¢«åˆ†å‰²æˆå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‰‡æ®µï¼Œç§°ä¸º&amp;quot;pieces&amp;quot;ã€‚è¿™äº›piecesæ˜¯peeré—´ä¼ è¾“çš„åŸºæœ¬å•ä½&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h2 id="æœ€ç¨€æœ‰ä¼˜å…ˆç®—æ³•rarest-first-algorithm">&amp;ldquo;æœ€ç¨€æœ‰ä¼˜å…ˆç®—æ³•&amp;rdquo;ï¼ˆRarest First Algorithmï¼‰ &lt;a href="#%e6%9c%80%e7%a8%80%e6%9c%89%e4%bc%98%e5%85%88%e7%ae%97%e6%b3%95rarest-first-algorithm" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&amp;ldquo;æœ€ç¨€æœ‰ä¼˜å…ˆç®—æ³•&amp;rdquo;ï¼ˆRarest First Algorithmï¼‰æ˜¯BitTorrentåè®®ä¸­çš„ä¸€ä¸ªå…³é”®ç­–ç•¥ï¼Œç”¨äºå†³å®šå“ªäº›æ•°æ®å—ï¼ˆpieceï¼‰é¦–å…ˆè¢«ä¸‹è½½å’Œåˆ†äº«ã€‚è¿™ä¸ªç®—æ³•çš„æ ¸å¿ƒç›®æ ‡æ˜¯ä¼˜åŒ–æ•´ä¸ªç½‘ç»œä¸­æ•°æ®çš„åˆ†å¸ƒï¼Œç¡®ä¿æ›´å¿«çš„ä¸‹è½½é€Ÿåº¦å’Œæ›´é«˜çš„æ•ˆç‡ã€‚&lt;/li>
&lt;li>
&lt;h3 id="åŸºæœ¬åŸç†">åŸºæœ¬åŸç† &lt;a href="#%e5%9f%ba%e6%9c%ac%e5%8e%9f%e7%90%86" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>&lt;strong>æ•°æ®å—çš„ç¨€æœ‰åº¦&lt;/strong>
&lt;ul>
&lt;li>åœ¨BitTorrentç½‘ç»œä¸­ï¼Œæ–‡ä»¶è¢«åˆ†å‰²æˆè®¸å¤šå°çš„æ•°æ®å—ã€‚
&lt;ul>
&lt;li>â€œæœ€ç¨€æœ‰ä¼˜å…ˆâ€ç®—æ³•çš„ç›®çš„æ˜¯ä¼˜å…ˆä¸‹è½½é‚£äº›ç½‘ç»œä¸­æ•°é‡æœ€å°‘çš„æ•°æ®å—ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>é€‰æ‹©ä¸‹è½½çš„å—&lt;/strong>ï¼š
&lt;ul>
&lt;li>å½“ä¸€ä¸ªpeeråŠ å…¥Torrentç½‘ç»œï¼Œå¹¶å¼€å§‹ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œå®ƒé¦–å…ˆä¼šä»æ‰€æœ‰è¿æ¥çš„peeré‚£é‡Œè·å–æœ‰å…³å“ªäº›æ•°æ®å—æ˜¯ç¨€æœ‰çš„ä¿¡æ¯ã€‚
&lt;ul>
&lt;li>ç„¶åï¼Œå®ƒä¼˜å…ˆè¯·æ±‚ä¸‹è½½é‚£äº›æœ€ç¨€æœ‰çš„æ•°æ®å—ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>åŠ¨æ€è°ƒæ•´&lt;/strong>ï¼š
&lt;ul>
&lt;li>éšç€ä¸‹è½½çš„è¿›è¡Œï¼Œæ¯ä¸ªpeerä¼šä¸æ–­æ›´æ–°å’Œé‡æ–°è¯„ä¼°ç½‘ç»œä¸­æ¯ä¸ªæ•°æ®å—çš„ç¨€æœ‰åº¦ï¼Œå¹¶ç›¸åº”åœ°è°ƒæ•´å…¶ä¸‹è½½ä¼˜å…ˆçº§ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="ç®—æ³•çš„é‡è¦æ€§">ç®—æ³•çš„é‡è¦æ€§ &lt;a href="#%e7%ae%97%e6%b3%95%e7%9a%84%e9%87%8d%e8%a6%81%e6%80%a7" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>&lt;strong>æé«˜æ•ˆç‡&lt;/strong>ï¼šé€šè¿‡ä¼˜å…ˆä¸‹è½½æœ€ç¨€æœ‰çš„å—ï¼Œè¿™ä¸ªç®—æ³•å¸®åŠ©åŠ å¿«äº†æ–‡ä»¶çš„æ•´ä½“ä¸‹è½½é€Ÿåº¦ã€‚ä¸€æ—¦æœ€ç¨€æœ‰çš„å—è¢«æ›´å¤špeerè·å–ï¼Œå®ƒä»¬å°±æ›´å®¹æ˜“è¢«è¿›ä¸€æ­¥åˆ†äº«å’Œåˆ†å‘ã€‚&lt;/li>
&lt;li>&lt;strong>é˜²æ­¢ç“¶é¢ˆ&lt;/strong>ï¼šå¦‚æœæ²¡æœ‰è¿™ä¸ªç®—æ³•ï¼ŒæŸäº›æ•°æ®å—å¯èƒ½ä¼šå˜å¾—å¾ˆéš¾è·å¾—ï¼Œå¯¼è‡´ä¸‹è½½è¿‡ç¨‹åœ¨æ¥è¿‘å®Œæˆæ—¶æ”¾æ…¢ï¼Œè¿™è¢«ç§°ä¸ºâ€œæœ€åä¸€å—é—®é¢˜â€ï¼ˆLast Piece Problemï¼‰ã€‚&lt;/li>
&lt;li>&lt;strong>ä¿ƒè¿›å¹³ç­‰åˆ†äº«&lt;/strong>ï¼šè¿™ç§æ–¹æ³•é¼“åŠ±peeråˆ†äº«å®ƒä»¬æ‹¥æœ‰çš„ç¨€æœ‰å—ï¼Œä»è€Œæé«˜äº†æ•´ä¸ªç½‘ç»œä¸­çš„åˆä½œå’Œèµ„æºå…±äº«ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="å®é™…åº”ç”¨">å®é™…åº”ç”¨ &lt;a href="#%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>åœ¨BitTorrentç½‘ç»œä¸­ï¼Œè¿™ä¸ªç®—æ³•å¯¹äºç¡®ä¿é«˜æ•ˆçš„æ•°æ®åˆ†å‘è‡³å…³é‡è¦ã€‚å®ƒä¸ä»…æé«˜äº†å•ä¸ªç”¨æˆ·çš„ä¸‹è½½é€Ÿåº¦ï¼Œè€Œä¸”è¿˜æé«˜äº†æ•´ä¸ªç½‘ç»œçš„æ•ˆç‡ï¼Œç¡®ä¿äº†èµ„æºåœ¨ç”¨æˆ·ä¹‹é—´çš„å‡è¡¡åˆ†é…ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒBitTorrentç½‘ç»œèƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…ç“¶é¢ˆå’Œæé«˜æ•°æ®çš„å¯ç”¨æ€§ï¼Œå³ä½¿åœ¨é¢å¯¹å¤§é‡ç”¨æˆ·çš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="ç»“è®º">ç»“è®º &lt;a href="#%e7%bb%93%e8%ae%ba" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>æœ€ç¨€æœ‰ä¼˜å…ˆç®—æ³•æ˜¯BitTorrentç½‘ç»œé«˜æ•ˆè¿è¡Œçš„å…³é”®ç»„æˆéƒ¨åˆ†ã€‚å®ƒé€šè¿‡æ™ºèƒ½åœ°é€‰æ‹©ä¸‹è½½å’Œåˆ†äº«ç½‘ç»œä¸­æœ€ç¨€æœ‰çš„æ•°æ®å—ï¼Œæé«˜äº†èµ„æºçš„æ•´ä½“åˆ†å¸ƒå’Œå¯ç”¨æ€§ï¼Œç¡®ä¿äº†å¿«é€Ÿã€å¹³è¡¡çš„æ–‡ä»¶å…±äº«ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h2 id="çª’æ¯ç®—æ³•choking-algorithm">&amp;ldquo;çª’æ¯ç®—æ³•&amp;rdquo;ï¼ˆChoking Algorithmï¼‰ &lt;a href="#%e7%aa%92%e6%81%af%e7%ae%97%e6%b3%95choking-algorithm" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&amp;ldquo;çª’æ¯ç®—æ³•&amp;rdquo;ï¼ˆChoking Algorithmï¼‰æ˜¯BitTorrentåè®®ä¸­çš„ä¸€ä¸ªå…³é”®ç»„æˆéƒ¨åˆ†ï¼Œç”¨äºç®¡ç†å¤šä¸ªpeerä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚è¿™ä¸ªç®—æ³•å¸®åŠ©ä¼˜åŒ–å¸¦å®½çš„ä½¿ç”¨ï¼Œç¡®ä¿ç½‘ç»œä¸­çš„èµ„æºè¢«é«˜æ•ˆåˆç†åœ°åˆ†é…ã€‚å…¶æ ¸å¿ƒç›®çš„æ˜¯ä¿ƒè¿›peeré—´çš„åˆä½œå’Œæ•°æ®çš„å¿«é€Ÿåˆ†å‘ã€‚&lt;/li>
&lt;li>
&lt;h3 id="çª’æ¯ç®—æ³•çš„åŸºæœ¬åŸç†">çª’æ¯ç®—æ³•çš„åŸºæœ¬åŸç† &lt;a href="#%e7%aa%92%e6%81%af%e7%ae%97%e6%b3%95%e7%9a%84%e5%9f%ba%e6%9c%ac%e5%8e%9f%e7%90%86" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>&lt;strong>é€‰æ‹©å’Œçª’æ¯ï¼ˆChoking and Unchokingï¼‰&lt;/strong>
&lt;ul>
&lt;li>åœ¨BitTorrentç½‘ç»œä¸­ï¼Œæ¯ä¸ªpeeråŒæ—¶ç»´æŠ¤ç€ä¸€ç»„â€œçª’æ¯â€ï¼ˆchokedï¼‰å’Œâ€œæœªçª’æ¯â€ï¼ˆunchokedï¼‰çš„peeråå•ã€‚
&lt;ul>
&lt;li>è¢«â€œçª’æ¯â€çš„peeræ— æ³•ä»çª’æ¯æ–¹æ¥æ”¶æ–‡ä»¶æ•°æ®ï¼Œè€Œâ€œæœªçª’æ¯â€çš„peerå¯ä»¥è¿›è¡Œæ•°æ®äº¤æ¢ã€‚&lt;/li>
&lt;li>è¿™ç§çŠ¶æ€æ˜¯åŠ¨æ€çš„ï¼Œpeeræ ¹æ®ç®—æ³•å®šæœŸæ›´æ–°å®ƒä»¬çš„çª’æ¯/æœªçª’æ¯peeråå•ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>åˆ©ç›Šé©±åŠ¨çš„å†³ç­–&lt;/strong>
&lt;ul>
&lt;li>ç®—æ³•æ ¸å¿ƒæ˜¯â€œåˆ©ç›Šé©±åŠ¨â€ï¼ˆtit-for-tatï¼‰ç­–ç•¥ï¼Œå³peeræ›´å€¾å‘äºå‘é‚£äº›èƒ½ç»™å®ƒæä¾›æ•°æ®çš„peeræä¾›æ•°æ®ã€‚
&lt;ul>
&lt;li>è¿™ç§æ–¹æ³•é¼“åŠ±peeråˆ†äº«æ•°æ®ï¼Œå› ä¸ºåˆ†äº«è¶Šå¤šï¼Œè·å¾—æ•°æ®çš„æœºä¼šä¹Ÿè¶Šå¤§ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>ä¼˜åŒ–å™¨&lt;/strong>ï¼š
&lt;ul>
&lt;li>é™¤äº†åŸºäºäº¤æ¢æ•°æ®çš„é‡æ¥å†³å®šçª’æ¯çŠ¶æ€å¤–ï¼Œå¤§å¤šæ•°BitTorrentå®¢æˆ·ç«¯è¿˜å®ç°äº†ä¸€ä¸ªâ€œä¼˜åŒ–å™¨â€ï¼ˆOptimizerï¼‰ï¼Œç”¨äºæ¢ç´¢æ–°çš„peerã€‚
&lt;ul>
&lt;li>é€šå¸¸ï¼Œè¿™æ˜¯é€šè¿‡å®šæœŸâ€œæœªçª’æ¯â€ä¸€ä¸ªéšæœºé€‰æ‹©çš„peeræ¥å®ç°çš„ï¼Œå³ä½¿å®ƒåœ¨è¿‡å»çš„æ•°æ®äº¤æ¢ä¸­è¡¨ç°ä¸ä½³æˆ–æ²¡æœ‰æ•°æ®äº¤æ¢ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>çª’æ¯å‘¨æœŸ&lt;/strong>ï¼š
&lt;ul>
&lt;li>peerå®šæœŸè¯„ä¼°å…¶è¿æ¥ï¼Œå¹¶æ ¹æ®ä»å…¶ä»–peeræ¥æ”¶åˆ°çš„æ•°æ®é€Ÿç‡æ¥æ›´æ–°å…¶çª’æ¯/æœªçª’æ¯åå•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="çª’æ¯ç®—æ³•çš„é‡è¦æ€§">çª’æ¯ç®—æ³•çš„é‡è¦æ€§ &lt;a href="#%e7%aa%92%e6%81%af%e7%ae%97%e6%b3%95%e7%9a%84%e9%87%8d%e8%a6%81%e6%80%a7" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>&lt;strong>åˆä½œä¿ƒè¿›&lt;/strong>ï¼šé€šè¿‡å¥–åŠ±é‚£äº›åˆ†äº«èµ„æºçš„peerï¼Œçª’æ¯ç®—æ³•é¼“åŠ±åˆä½œï¼Œæé«˜äº†ç½‘ç»œä¸­çš„èµ„æºå…±äº«æ•ˆç‡ã€‚&lt;/li>
&lt;li>&lt;strong>é˜²æ­¢è‡ªç§è¡Œä¸º&lt;/strong>ï¼šç®—æ³•å‡å°‘äº†è‡ªç§peerï¼ˆåªä¸‹è½½ä¸ä¸Šä¼ çš„ï¼‰çš„ä¼˜åŠ¿ï¼Œå› ä¸ºè¿™äº›peerä¸å¤ªå¯èƒ½è¢«å…¶ä»–peerâ€œæœªçª’æ¯â€ã€‚&lt;/li>
&lt;li>&lt;strong>ç½‘ç»œæ‹¥å¡æ§åˆ¶&lt;/strong>ï¼šå®ƒå¸®åŠ©æ§åˆ¶ç½‘ç»œæ‹¥å¡ï¼Œé€šè¿‡é™åˆ¶peerçš„è¿æ¥æ•°é‡å’Œæ•°æ®ä¼ è¾“ï¼Œä¼˜åŒ–å¸¦å®½ä½¿ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="ç»“è®º-1">ç»“è®º &lt;a href="#%e7%bb%93%e8%ae%ba-1" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>çª’æ¯ç®—æ³•æ˜¯BitTorrentåè®®é«˜æ•ˆæ€§çš„å…³é”®ï¼Œå®ƒé€šè¿‡ä¸€ç§ç®€å•ä½†æœ‰æ•ˆçš„æ–¹å¼æ¥é¼“åŠ±æ•°æ®å…±äº«å’Œåˆä½œï¼Œä¿è¯äº†æ•´ä¸ªç½‘ç»œçš„å¥åº·å’Œé«˜æ•ˆè¿è¡Œã€‚é€šè¿‡è¿™ç§åŠ¨æ€çš„çª’æ¯/æœªçª’æ¯æœºåˆ¶ï¼ŒBitTorrentç½‘ç»œèƒ½å¤Ÿæœ‰æ•ˆåœ°ç®¡ç†å¸¦å®½å’Œè¿æ¥ï¼Œç¡®ä¿èµ„æºåœ¨ç½‘ç»œä¸­çš„å¿«é€Ÿä¸”å…¬å¹³çš„åˆ†é…ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h2 id="ä¸ºä»€ä¹ˆè¯´å·²ç»è¶³å¤Ÿäº†">ä¸ºä»€ä¹ˆè¯´â€œå·²ç»è¶³å¤Ÿäº†â€ &lt;a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%af%b4%e5%b7%b2%e7%bb%8f%e8%b6%b3%e5%a4%9f%e4%ba%86" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>
&lt;blockquote>
&lt;p>å› ä¸ºè¿™æ˜¯ä¸€é—¨å®éªŒç§‘å­¦&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;h3 id="æœ€ç¨€æœ‰ä¼˜å…ˆç®—æ³•rarest-first-algorithm-1">&amp;ldquo;æœ€ç¨€æœ‰ä¼˜å…ˆç®—æ³•&amp;rdquo;ï¼ˆRarest First Algorithmï¼‰ &lt;a href="#%e6%9c%80%e7%a8%80%e6%9c%89%e4%bc%98%e5%85%88%e7%ae%97%e6%b3%95rarest-first-algorithm-1" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>
&lt;h3 id="ç§å­çš„ç†µ">ç§å­çš„ç†µ &lt;a href="#%e7%a7%8d%e5%ad%90%e7%9a%84%e7%86%b5" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>æè¿°äº†ç§å­ä¸­å„ä¸ªæ•°æ®å—åœ¨æ‰€æœ‰peeré—´çš„åˆ†å¸ƒæƒ…å†µ&lt;/li>
&lt;li>é«˜ç†µæ„å‘³ç€æ•°æ®å—åœ¨æ‰€æœ‰peerä¸­åˆ†å¸ƒå¾—å¾ˆå‡åŒ€ï¼Œpeerä¹‹é—´æ›´æœ‰å¯èƒ½æ‹¥æœ‰å½¼æ­¤å°šæœªä¸‹è½½çš„å—&lt;/li>
&lt;li>é«˜ç†µçš„ç§å­é€šå¸¸æ„å‘³ç€æ›´é«˜çš„æ•°æ®äº¤æ¢æ•ˆç‡&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="ç†æƒ³ç†µideal-entrophy">ç†æƒ³ç†µï¼ˆIdeal Entrophyï¼‰ &lt;a href="#%e7%90%86%e6%83%b3%e7%86%b5ideal-entrophy" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>æ˜¯æŒ‡ç½‘ç»œä¸­çš„æ•°æ®å—ï¼ˆpiecesï¼‰åœ¨æ‰€æœ‰leechersä¹‹é—´å‡åŒ€åˆ†å¸ƒ&lt;/li>
&lt;li>æ¯ä¸ªleecherséƒ½æŒæœ‰ä¸€äº›å…¶ä»–leecherséœ€è¦çš„æ•°æ®å—ï¼Œä»è€Œç¡®ä¿äº†ç½‘ç»œä¸­çš„æ¯ä¸ªleecherséƒ½å¯¹å…¶ä»–leechersæ„Ÿå…´è¶£ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="å†·å¯åŠ¨transient-state">å†·å¯åŠ¨ï¼ˆTransient Stateï¼‰ &lt;a href="#%e5%86%b7%e5%90%af%e5%8a%a8transient-state" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>å½“ç§å­åˆšå¼€å§‹ä¼ æ’­æ—¶çš„åŠ¨æ€ï¼Œä¼˜å…ˆä¼ æ’­ç¨€æœ‰å—ï¼Œæé«˜ä¸‹è½½æ•ˆç‡&lt;/li>
&lt;li>Rarest First Algorithmè§£å†³äº†ç§å­çš„å†·å¯åŠ¨é—®é¢˜ï¼Œç¡®ä¿äº†æœ€ä¸å¸¸è§çš„å—è¢«ä¼˜å…ˆä¼ æ’­ï¼Œæé«˜äº†æ•´ä¸ªç½‘ç»œçš„ä¸‹è½½æ•ˆç‡&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="ç¨³å®šæ€steady-state">ç¨³å®šæ€ï¼ˆSteady Stateï¼‰ &lt;a href="#%e7%a8%b3%e5%ae%9a%e6%80%81steady-state" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>ç½‘ç»œä¸­çš„å¤§éƒ¨åˆ†å—å·²ç»è¢«æ¯”è¾ƒå‡åŒ€åœ°ä¼ æ’­ã€‚æœ€ç¨€æœ‰ä¼˜å…ˆç®—æ³•åœ¨è¿™ä¸€é˜¶æ®µç»§ç»­ç¡®ä¿æ•°æ®å—çš„å¤šæ ·æ€§ï¼Œä»è€Œå‡å°‘äº†ä»»ä½•ç‰¹å®šå—æˆä¸ºç“¶é¢ˆçš„å¯èƒ½æ€§&lt;/li>
&lt;li>ç®—æ³•é¼“åŠ±peeré—´çš„æœ‰æ•ˆåˆä½œï¼Œå› ä¸ºæ¯ä¸ªpeeréƒ½å¯èƒ½æŒæœ‰å…¶ä»–peeréœ€è¦çš„ç¨€æœ‰å—&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="æœ€åä¸€å—é—®é¢˜last-pieces-problem">â€œæœ€åä¸€å—â€é—®é¢˜ï¼ˆLast Pieces Problemï¼‰ &lt;a href="#%e6%9c%80%e5%90%8e%e4%b8%80%e5%9d%97%e9%97%ae%e9%a2%98last-pieces-problem" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>ä¸‹è½½æ¥è¿‘å®Œæˆæ—¶ï¼ŒæŸäº›å—å˜å¾—éå¸¸ç¨€æœ‰ï¼Œä»è€Œå»¶ç¼“æ•´ä¸ªä¸‹è½½è¿‡ç¨‹&lt;/li>
&lt;li>ç®—æ³•ç¡®ä¿å³ä½¿åœ¨ä¸‹è½½çš„åæœŸï¼Œæ‰€æœ‰å‚ä¸çš„peerä»ç„¶æœ‰æ¿€åŠ±å»äº¤æ¢å½¼æ­¤ä¹‹é—´ç¼ºå°‘çš„å—&lt;/li>
&lt;li>é¿å…äº†ä¸‹è½½æœ«æœŸçš„ç¨€æœ‰å—ç“¶é¢ˆ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="çª’æ¯ç®—æ³•choking-algorithm-1">&amp;ldquo;çª’æ¯ç®—æ³•&amp;rdquo;ï¼ˆChoking Algorithmï¼‰ &lt;a href="#%e7%aa%92%e6%81%af%e7%ae%97%e6%b3%95choking-algorithm-1" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>
&lt;h3 id="å¯¹ç­‰åŸåˆ™tit-for-tat-fairness">â€œå¯¹ç­‰åŸåˆ™â€ï¼ˆTit-for-tat Fairnessï¼‰ &lt;a href="#%e5%af%b9%e7%ad%89%e5%8e%9f%e5%88%99tit-for-tat-fairness" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>å¦‚æœAä»Bä¸‹è½½çš„æ•°æ®å°‘äºBä»Aä¸‹è½½çš„æ•°æ®ï¼ŒAä¼šæ‹’ç»ç»§ç»­ä¸Båˆ†äº«æ•°æ®&lt;/li>
&lt;li>ç”¨æ¥ä¿è¯å…¬å¹³æ€§ï¼Œæœç»free rider&lt;/li>
&lt;li>åœ¨åŠ¨æ€æˆ–éå¯¹ç§°ç½‘ç»œç¯å¢ƒä¸­å¯èƒ½æ•ˆç‡ä½ä¸‹&lt;/li>
&lt;li>ä¼šå¯¼è‡´ç½‘ç»œç©ºé—²èµ„æºçš„æµªè´¹&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="æ—§ç‰ˆçª’æ¯ç®—æ³•">æ—§ç‰ˆçª’æ¯ç®—æ³• &lt;a href="#%e6%97%a7%e7%89%88%e7%aa%92%e6%81%af%e7%ae%97%e6%b3%95" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>æ—§ç‰ˆçª’æ¯ç®—æ³•åªè€ƒè™‘äº†peerä¹‹é—´çš„ä¸‹è½½é€Ÿåº¦ï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„ä¸Šä¼ è´¡çŒ®
&lt;ul>
&lt;li>å°‘é‡ä¸Šä¼ é€Ÿåº¦å¿«çš„leecherä¼šå æ®å¤§é‡å¸¦å®½ï¼Œä¸åˆ©äºç§å­ç†µçš„å¢åŠ &lt;/li>
&lt;li>ä¸‹è½½é€Ÿåº¦å¿«çš„free riderså¾—åˆ°äº†æ¯”å®é™…è´¡çŒ®æ›´å¤šçš„å›æŠ¥&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>åŸºäºæ›´å®è§‚çš„æ€§èƒ½æŒ‡æ ‡ï¼ˆå¦‚æ•´ä½“ä¸Šä¼ è´¡çŒ®ï¼‰çš„ç­–ç•¥èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”è¿™äº›å˜åŒ–&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;h3 id="æ–°ç‰ˆçª’æ¯ç®—æ³•">æ–°ç‰ˆçª’æ¯ç®—æ³• &lt;a href="#%e6%96%b0%e7%89%88%e7%aa%92%e6%81%af%e7%ae%97%e6%b3%95" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;ul>
&lt;li>ä¸Šä¼ é€Ÿåº¦å¿«çš„leecherä¸€å®šæ¯”ä¸Šä¼ é€Ÿåº¦æ…¢çš„leecherè·å¾—æ›´å¤šçš„ä¸‹è½½é€Ÿåº¦ï¼Œä¿è¯äº†è¿‘ä¼¼çš„å¯¹ç­‰åŸåˆ™&lt;/li>
&lt;li>å¯¹äºseedï¼ˆåšç§è€…ï¼‰è€Œè¨€ï¼Œåº”è¯¥å¯¹æ¯ä¸ªleecheræä¾›ç›¸åŒçš„æœåŠ¡æ—¶é—´ã€‚ä¿è¯äº†ç½‘ç»œä¸­çš„å…¬å¹³æ€§å’Œæ•ˆç‡&lt;/li>
&lt;li>å› ä¸ºæ–‡ä»¶å—å¯ä»¥è¢«æ›´å¹³å‡çš„åˆ†é…ç»™äº†å…¶å®ƒpeerï¼Œåœ¨å†·å¯åŠ¨æ—¶çš„å¼¹æ€§æ›´å¼ºï¼Œå¯¹äºfree ridersçš„æŠµæŠ—æ€§ä¹Ÿæ›´å¼º&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Link
&lt;ul>
&lt;li>&lt;a href="http://conferences.sigcomm.org/imc/2006/papers/p20-legout.pdf">Rarest First and Choke Algorithms Are Enough&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="alert alert-info" role="alert">æœ¬æ–‡éƒ¨åˆ†å†…å®¹ç”±ChatGPT4ç”Ÿæˆ&lt;/div></description></item><item><title>Introduction to Ceph</title><link>https://wizmann.top/posts/introduction-to-ceph/</link><pubDate>Sun, 29 Nov 2020 00:00:00 +0000</pubDate><guid>https://wizmann.top/posts/introduction-to-ceph/</guid><description>&lt;h2 id="ä»€ä¹ˆæ˜¯ceph">ä»€ä¹ˆæ˜¯Ceph &lt;a href="#%e4%bb%80%e4%b9%88%e6%98%afceph" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>Cephæ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„ï¼Œé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿã€‚æä¾›äº†ä¸‰ç§ä¸åŒç±»å‹çš„æ¥å£ä»¥é€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼š&lt;/p>
&lt;ul>
&lt;li>block-based: å—å­˜å‚¨ï¼Œå¯ä»¥ç”¨åšVMçš„è™šæ‹Ÿç£ç›˜&lt;/li>
&lt;li>object-based: å¯¹è±¡å­˜å‚¨ï¼Œä¸Amazon S3ç­‰å¸¸ç”¨å¯¹è±¡å­˜å‚¨å…¼å®¹&lt;/li>
&lt;li>file system: POSIXå…¼å®¹çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥è¢«æœ¬åœ°ç³»ç»ŸæŒ‚è½½ï¼Œå¹¶ä¸”èƒ½è¢«å¤šä¸ªå®¢æˆ·ç«¯å…±äº«&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://raw.githubusercontent.com/Wizmann/assets/master/wizmann-pic/20-11-28/2020-11-28_22-04-49.png" alt="">&lt;/p>
&lt;h3 id="cephçš„ç‰¹æ€§">Cephçš„ç‰¹æ€§ &lt;a href="#ceph%e7%9a%84%e7%89%b9%e6%80%a7" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>ç”±äºé‡‡ç”¨äº†CRUSHç®—æ³•ï¼ŒCephæœ‰ç€ä¼˜å¼‚çš„å¯æ‰©å±•æ€§ï¼ˆå®£ç§°å¯ä»¥æ— é™æ‰©å±•ï¼‰ã€‚å¹¶ä¸”å€ŸåŠ©å¯æ‰©å±•æ€§ï¼Œè¿›è€Œå®ç°é«˜æ€§èƒ½ã€é«˜å¯é æ€§å’Œé«˜å¯ç”¨æ€§ã€‚&lt;/p>
&lt;p>Cephæ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„å­˜å‚¨ç³»ç»Ÿï¼Œæ— éœ€ä¸­å¿ƒèŠ‚ç‚¹è¿›è¡Œèµ„æºçš„ç®¡ç†ä¸è°ƒåº¦ï¼Œå…¨éƒ¨çš„ç®¡ç†åŠŸèƒ½ç”±å­˜å‚¨èŠ‚ç‚¹è‡ªæ²»å®Œæˆã€‚ä½¿å¾—æ•´ä¸ªç³»ç»Ÿå¯ä»¥è‡ªæˆ‘ç®¡ç†ä¸è‡ªæˆ‘æ¢å¤ï¼Œå‡å°‘è¿ç»´æˆæœ¬ä¸ç®¡ç†æˆæœ¬ã€‚&lt;/p>
&lt;h2 id="rados---cephçš„å­˜å‚¨å¼•æ“">RADOS - Cephçš„å­˜å‚¨å¼•æ“ &lt;a href="#rados---ceph%e7%9a%84%e5%ad%98%e5%82%a8%e5%bc%95%e6%93%8e" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>RADOS=Reliable Autonomic Distributed Object Storeã€‚RADOSæ˜¯Cephåº•å±‚çš„å­˜å‚¨å¼•æ“ï¼Œæ‰€æœ‰çš„æ¥å£éƒ½å»ºç«‹åœ¨RADOSçš„åŠŸèƒ½ä¹‹ä¸Šã€‚&lt;/p>
&lt;h3 id="radosä¸­çš„å­˜å‚¨ç»“æ„">RADOSä¸­çš„å­˜å‚¨ç»“æ„ &lt;a href="#rados%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8%e7%bb%93%e6%9e%84" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>&lt;img src="https://raw.githubusercontent.com/Wizmann/assets/master/wizmann-pic/20-11-28/2020-11-28_22-24-56.png" alt="">&lt;/p>
&lt;ul>
&lt;li>å­˜å‚¨æ± ï¼ˆpoolï¼‰ï¼šé€»è¾‘å±‚ï¼Œæ¯ä¸€ä¸ªpoolé‡Œéƒ½åŒ…å«ä¸€äº›æ”¾ç½®ç»„&lt;/li>
&lt;li>æ”¾ç½®ç»„ï¼ˆplacement-group, PG)ï¼šé€»è¾‘å±‚ï¼Œä¸€ä»½æ•°æ®ä¼šåœ¨PGå½“ä¸­è¿›è¡Œç¾å¤‡å¤åˆ¶ã€‚æ¯ä¸€ä¸ªPGéƒ½å¯¹åº”ç€ä¸€ç³»åˆ—çš„å­˜å‚¨èŠ‚ç‚¹&lt;/li>
&lt;li>å­˜å‚¨èŠ‚ç‚¹ï¼ˆOSDï¼‰ï¼šç”¨ä»¥å­˜å‚¨æ•°æ®çš„ç‰©ç†èŠ‚ç‚¹ã€‚ä¸PGä¹‹é—´å½¢æˆå¤šå¯¹å¤šçš„å…³ç³»ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä»½æ•°æ®åœ¨å†™å…¥RADOSæ—¶ï¼Œä¼šå…ˆé€‰ä¸­ä¸€ä¸ªpoolã€‚Poolä¸­å†ä½¿ç”¨ä¸€å®šçš„hashè§„åˆ™ï¼Œä¼ªéšæœºçš„é€‰ä¸­æŸä¸€ä¸ªPGã€‚PGä¼šå°†æ•°æ®å†™å…¥å¤šä¸ªOSDä¸­ã€‚è¯»å–æ•°æ®æ—¶ï¼Œä¹Ÿæ˜¯ç±»ä¼¼çš„è§„åˆ™ã€‚&lt;/p>
&lt;p>Poolæ˜¯ç”¨æˆ·å¯è§çš„ç®¡ç†æ•°æ®çš„åŸºæœ¬å•ä½ï¼Œç”¨æˆ·å¯ä»¥å¯¹Poolè¿›è¡Œä¸€ç³»åˆ—çš„é…ç½®ï¼ˆæƒé™æ§åˆ¶ã€ä½¿ç”¨SSD or HDDã€ä½¿ç”¨æ•°æ®æ‹·è´ or çº åˆ ç ï¼Œetc.ï¼‰ã€‚è€ŒPGä¸OSDå¯¹äºç”¨æˆ·æ˜¯ä¸å¯è§çš„ã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/Wizmann/assets/master/wizmann-pic/20-11-28/2020-11-28_23-00-51.png" alt="">&lt;/p>
&lt;h4 id="pgçš„ç»„ç»‡">PGçš„ç»„ç»‡ &lt;a href="#pg%e7%9a%84%e7%bb%84%e7%bb%87" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>åœ¨ä¸€è‡´æ€§å“ˆå¸Œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨èŠ‚ç‚¹æ¥åˆ’åˆ†å“ˆå¸Œå€¼åŸŸã€‚è¿™ç§æ–¹æ³•çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœäº§ç”Ÿäº†æ•°æ®ä¸å¹³è¡¡ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è¿›è¡Œåˆ’åˆ†å€¼åŸŸæ¥è¿›è¡Œå†å¹³è¡¡ã€‚è¿™ä¼šé€ æˆå¤§é‡çš„æ•°æ®è¿ç§»ã€‚&lt;/p>
&lt;p>CRUSHé‡‡ç”¨äº†è™šæ‹ŸèŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯PGï¼‰å°†å“ˆå¸Œå€¼åŸŸåˆ’åˆ†æˆäº†å›ºå®šçš„ç­‰é•¿åŒºåŸŸã€‚è¿™ç§æ–¹æ³•åœ¨å•æ¡æ•°æ®ä¸ç‰©ç†èŠ‚ç‚¹ä¹‹é—´åŠ å…¥äº†ä¸€ä¸ªè™šæ‹Ÿå±‚ã€‚ä¹‹åï¼Œå†ä½¿ç”¨å“ˆå¸Œå–æ¨¡çš„ç®—æ³•ç¡®å®šæ•°æ®å±äºå“ªä¸ªPGã€‚ä½¿å¾—æ•°æ®çš„è¿ç§»æ˜¯ä»¥è™šæ‹ŸèŠ‚ç‚¹ä¸ºå•ä½ï¼Œè€Œä¸æ˜¯å¯¹æ¯ä¸€æ¡æ•°æ®éƒ½é‡æ–°è®¡ç®—ã€‚Cephå®˜æ–¹çš„å»ºè®®æ˜¯ï¼Œæ¯1ä¸ªOSDå¯¹åº”ç€100ä¸ªPGã€‚&lt;/p>
&lt;p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨è§„åˆ’çš„åˆæœŸéœ€è¦ç¡®å®šPGçš„æ•°ç›®ï¼Œå¦‚æœåæœŸéœ€è¦è°ƒæ•´PGï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„æ•°æ®è¿ç§»ï¼Œç”šè‡³éœ€è¦æœåŠ¡æš‚æ—¶åœæ­¢æœåŠ¡ã€‚&lt;/p>
&lt;h3 id="ç›‘æ§å­é›†ç¾¤monä¸cluster-map">ç›‘æ§å­é›†ç¾¤ï¼ˆMONï¼‰ä¸Cluster Map &lt;a href="#%e7%9b%91%e6%8e%a7%e5%ad%90%e9%9b%86%e7%be%a4mon%e4%b8%8ecluster-map" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>&lt;img src="https://raw.githubusercontent.com/Wizmann/assets/master/wizmann-pic/20-11-28/2020-11-28_22-48-10.png" alt="">&lt;/p>
&lt;p>RADOSé›†ç¾¤ä¸­é™¤äº†OSDå­˜å‚¨èŠ‚ç‚¹ä¹‹å¤–ï¼Œè¿˜æœ‰ç›‘æ§å­é›†ç¾¤ï¼ˆMONï¼‰ï¼Œç”¨äºå­˜å‚¨ç³»ç»Ÿçš„æ‹“æ‰‘ç»“æ„â€”â€”Cluster Mapã€‚&lt;/p>
&lt;blockquote>
&lt;p>å…ƒæ•°ç»„ç®¡ç†ï¼ˆMDSï¼‰èŠ‚ç‚¹ç”¨äºç®¡ç†CephFSä¸­çš„æ–‡ä»¶å…ƒä¿¡æ¯ï¼Œåæ–‡ä¼šæœ‰ä»‹ç»ã€‚&lt;/p>&lt;/blockquote>
&lt;p>ä¸åŒäºä¼ ç»Ÿçš„ä¸­å¿ƒåŒ–ç®¡ç†èŠ‚ç‚¹ï¼ŒMONå¹¶ä¸ä¼šå¯¹èµ„æºè¿›è¡Œè°ƒé…ä¸è°ƒåº¦ï¼Œè€Œä»…ä»…æ˜¯ä¸€ä¸ªè§‚æµ‹è€…ï¼Œç”¨ä»¥å­˜å‚¨ç³»ç»Ÿå½“å‰çš„æ‹“æ‰‘ä¸çŠ¶æ€ã€‚&lt;/p>
&lt;p>MONä¸OSDã€OSDä¸OSDä¹‹é—´ä¼šå®šæ—¶å‘é€å¿ƒè·³åŒ…ï¼Œæ£€æµ‹OSDæ˜¯å¦å¥åº·ã€‚å¦‚æœæŸä¸ªèŠ‚ç‚¹å¤±æ•ˆï¼ŒMONä¼šæ›´æ–°å†…éƒ¨å­˜å‚¨çš„æ‹“æ‰‘ç»“æ„ä¿¡æ¯ï¼ˆClusterMapï¼‰ï¼Œå¹¶ä¸”é€šè¿‡P2Påè®®å¹¿æ’­å‡ºå»ï¼Œä»è€Œä½¿å¾—æ•´ä¸ªç³»ç»Ÿéƒ½æœ‰ç€ï¼ˆæœ€ç»ˆï¼‰ä¸€è‡´çš„æ‹“æ‰‘ä¿¡æ¯ã€‚&lt;/p>
&lt;h3 id="ä¸»ä»åŒæ­¥ä¸èŠ‚ç‚¹è‡ªæ²»">ä¸»ä»åŒæ­¥ä¸èŠ‚ç‚¹è‡ªæ²» &lt;a href="#%e4%b8%bb%e4%bb%8e%e5%90%8c%e6%ad%a5%e4%b8%8e%e8%8a%82%e7%82%b9%e8%87%aa%e6%b2%bb" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>åœ¨ä¸€ä¸ªPGä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆPrimaryï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªä»èŠ‚ç‚¹ï¼ˆSecondaryï¼‰ã€‚ä¸»èŠ‚ç‚¹è´Ÿè´£ç»´æŠ¤ä»èŠ‚ç‚¹çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬æ•°æ®å¤åˆ¶ï¼ˆreplicationï¼‰ã€å¤±æ•ˆæ£€æµ‹ï¼ˆfailure detectionï¼‰å’Œå¤±æ•ˆæ¢å¤ï¼ˆfailure recoveryï¼‰ã€‚&lt;/p>
&lt;h2 id="crush---cephçš‡å† ä¸Šçš„æ˜ç ">CRUSH - Cephçš‡å† ä¸Šçš„æ˜ç  &lt;a href="#crush---ceph%e7%9a%87%e5%86%a0%e4%b8%8a%e7%9a%84%e6%98%8e%e7%8f%a0" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>CRUSHæ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„ï¼Œä¼ªéšæœºçš„æ•°æ®æ”¾ç½®ç®—æ³•ã€‚ä»¥å»ä¸­å¿ƒåŒ–æ–¹æ³•ï¼Œå°†PGæŒ‰è§„åˆ™æ˜ å°„åˆ°ç›¸åº”çš„å­˜å‚¨è®¾å¤‡ä¸Šã€‚å¹¶ä¸”ç³»ç»Ÿçš„æ‹“æ‰‘ç»“æ„å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°½å¯èƒ½çš„å‡å°‘æ•°æ®çš„è¿ç§»ã€‚&lt;/p>
&lt;h3 id="crushçš„ä¼˜åŠ¿">CRUSHçš„ä¼˜åŠ¿ &lt;a href="#crush%e7%9a%84%e4%bc%98%e5%8a%bf" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>CRUSHå¯¹äºæ¯ä¸€ä¸ªæ•°æ®å…ƒç´ ä½¿ç”¨ä¸€ä¸ªä¼ªéšæœºç®—æ³•ï¼Œå†³å®šå…¶æ”¾ç½®çš„ä½ç½®ã€‚æ‰€ä»¥ï¼Œåªè¦æ‰€æœ‰å‚ä¸è€…éƒ½æ‹¥æœ‰ç›¸åŒçš„ç³»ç»Ÿæ‹“æ‰‘ç»“æ„ä¿¡æ¯ï¼Œé‚£ä¹ˆæ•°æ®çš„ä½ç½®å°±æ˜¯ä¸€å®šçš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å»æ‰ä¸­å¿ƒèŠ‚ç‚¹ï¼Œé‡‡ç”¨P2Pçš„æ–¹æ³•æ¥è¿›è¡Œæ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢ã€‚&lt;/p>
&lt;p>å¹¶ä¸”ï¼Œç”±äºä¼ªéšæœºç®—æ³•åªä¸å•ä¸ªPGç›¸å…³ï¼Œå¦‚æœæˆ‘ä»¬æ“ä½œå¾—å½“ï¼ŒèŠ‚ç‚¹æ•°é‡çš„å˜åŒ–å¹¶ä¸ä¼šå¼•èµ·å¤§é‡çš„æ•°æ®è¿ç§»ï¼Œè€Œæ˜¯ä¼šæ¥è¿‘ç†è®ºæœ€ä¼˜å€¼ã€‚&lt;/p>
&lt;h3 id="æ•°æ®æ”¾ç½®data-placement">æ•°æ®æ”¾ç½®ï¼ˆData Placementï¼‰ &lt;a href="#%e6%95%b0%e6%8d%ae%e6%94%be%e7%bd%aedata-placement" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>CRUSHçš„æ•°æ®æ”¾ç½®ç®—æ³•æœ‰å¾ˆå¤šä¸åŒçš„å®ç°ï¼Œè¿™é‡Œåªä»‹ç»æœ€å¸¸ç”¨çš„strawç®—æ³•ã€‚&lt;/p>
&lt;p>Cephä¸­ï¼Œæ¯ä¸€ä¸ªOSDèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæƒå€¼wï¼Œä»£è¡¨ç€æŸä¸ªèŠ‚ç‚¹èƒ½æ”¯æŒå¤šå°‘æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæƒå€¼ä¸èŠ‚ç‚¹çš„å®¹é‡æˆæ­£æ¯”ã€‚&lt;/p>
&lt;p>å‡è®¾ä¸€ä¸ªpoolé‡Œé¢æœ‰nä¸ªPGï¼Œåœ¨ä¸€æ¡æ–°çš„æ•°æ®å†™å…¥æ—¶ï¼Œæˆ‘ä»¬åˆ†åˆ«ä¼šè®¡ç®—è¿™nä¸ªPGçš„lengthå€¼ã€‚&lt;/p>
&lt;p>$$ length_{i} = f(w_{i}) * hash(x) $$&lt;/p>
&lt;p>$f(w_{i})$æ˜¯ä¸€ä¸ªåªäºå½“å‰OSDèŠ‚ç‚¹æƒå€¼æœ‰å…³çš„å‡½æ•°ã€‚$hash(x)$ä»£è¡¨å½“å‰PGçš„å“ˆå¸Œå€¼ã€‚æ‰€ä»¥ï¼ŒPGä¼šæ”¾ç½®åœ¨å“ªä¸ªOSDä¸Šï¼Œä»…ä¸å…¶æƒå€¼ç›¸å…³ã€‚&lt;/p>
&lt;p>å‡è®¾æŸä¸ªOSDèŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆæ–°åŠ ã€åˆ é™¤ã€æƒå€¼å˜åŒ–ï¼‰ï¼Œåœ¨æ­¤å—å½±å“èŠ‚ç‚¹çš„æ•°æ®ä¼šè¿ç§»åˆ°å…¶å®ƒçš„OSDèŠ‚ç‚¹ã€‚å…¶å®ƒOSDèŠ‚ç‚¹çš„åŸæœ‰æ•°æ®å¹¶ä¸ä¼šå—åˆ°å½±å“ã€‚&lt;/p>
&lt;blockquote>
&lt;p>Cephå½“ä¸­çš„strawç®—æ³•æœ‰&lt;code>straw1&lt;/code>å’Œ&lt;code>straw2&lt;/code>ã€‚&lt;code>straw1&lt;/code>çš„å®ç°é‡‡ç”¨äº†æœ‰ç¼ºé™·f(w)å‡½æ•°ï¼Œä¼šå¯¼è‡´æ„å¤–çš„æ•°æ®è¿ç§»ã€‚&lt;code>straw2&lt;/code>è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚
è¯¦æƒ…è¯·æˆ³&lt;a href="https://www.spinics.net/lists/ceph-devel/msg21635.html">è¿™é‡Œ&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h4 id="ä¸»ä»æ¶æ„">ä¸»ä»æ¶æ„ &lt;a href="#%e4%b8%bb%e4%bb%8e%e6%9e%b6%e6%9e%84" class="anchor">ğŸ”—&lt;/a>&lt;/h4>&lt;p>æ¯ä¸ªPGæ‰€åŒ…å«çš„OSDéƒ½ç”±CRUSHç®—æ³•è®¡ç®—å¾—å‡ºï¼Œå¹¶æ ¹æ®é…ç½®é€‰å‡ºå‰rä¸ªOSDè¿›è¡Œä¸»ä»é…å¯¹ã€‚åˆ—è¡¨ä¸­çš„ç¬¬1ä¸ªOSDåšä¸ºä¸»èŠ‚ç‚¹ï¼ˆPrimaryï¼‰ï¼Œå…¶å®ƒçš„èŠ‚ç‚¹ä¸ºä»èŠ‚ç‚¹ï¼ˆSecondaryï¼‰ã€‚&lt;/p>
&lt;p>ä¸»ä»èŠ‚ç‚¹çš„åˆ†é…ä¸ç®¡ç†ç”±PGå†…éƒ¨è¿›è¡Œè‡ªæ²»ï¼Œä¸éœ€è¦é¢å¤–çš„å¤–éƒ¨ç³»ç»Ÿè¿›è¡Œç®¡ç†ã€‚&lt;/p>
&lt;h2 id="cephfs">CephFS &lt;a href="#cephfs" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>CephFSæ˜¯ä¸€ä¸ªPOSIXå…¼å®¹çš„ï¼ˆå…±äº«ï¼‰æ–‡ä»¶ç³»ç»Ÿã€‚CephFSåˆ©ç”¨æ–‡ä»¶å…ƒæ•°æ®å­ç³»ç»Ÿï¼ˆMDSï¼‰æ¥ç»´æŠ¤ç›®å½•æ ‘ç»“æ„å’Œæ–‡ä»¶å’Œç›®å½•çš„å…ƒä¿¡æ¯ï¼ˆowner, timestamps, inodes, etc.)ç­‰ã€‚&lt;/p>
&lt;p>MDSå­ç³»ç»Ÿä¼šåœ¨å†…å­˜é‡Œé¢ç»´æŠ¤ä¸€ä»½Cacheï¼Œå¯¹äºéœ€è¦æŒä¹…åŒ–çš„ä¿¡æ¯ï¼Œä¼šä½¿ç”¨WALçš„æ–¹å¼å†™å…¥RADOSé‡Œä¸€ä¸ªä¸“ç”¨çš„Poolå½“ä¸­ã€‚&lt;/p>
&lt;h3 id="åŠ¨æ€æ ‘åˆ’åˆ†dynamic-tree-partitioningdtp">åŠ¨æ€æ ‘åˆ’åˆ†ï¼ˆDynamic Tree Partitioningï¼ŒDTPï¼‰ &lt;a href="#%e5%8a%a8%e6%80%81%e6%a0%91%e5%88%92%e5%88%86dynamic-tree-partitioningdtp" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>CephFSçš„æ‰©å±•æ€§çš„å…³é”®ä¹‹ä¸€ï¼Œåœ¨äºå…ƒä¿¡æ¯å­ç³»ç»Ÿçš„æ‰©å±•æ€§ã€‚CephFSå®ç°äº†åŠ¨æ€æ ‘åˆ’åˆ†çš„ç®—æ³•ï¼Œå°†ç›®å½•æ ‘ç»“æ„æ ¹æ®å½“å‰ç³»ç»Ÿçš„è´Ÿè½½ï¼Œå°†å…¶åˆ’åˆ†åˆ°ä¸åŒçš„MDSèŠ‚ç‚¹ä¸Šå»ã€‚&lt;/p>
&lt;p>ç»´æŠ¤ç›®å½•æ ‘ç»“æ„çš„ä¼˜åŠ¿åœ¨äºåˆ©ç”¨äº†æ–‡ä»¶ç³»ç»Ÿçš„å±€éƒ¨æ€§ï¼ˆlocalityï¼‰ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œé¢„å–ï¼ˆprefetchï¼‰ã€‚åŠ¨æ€çš„æ ‘åˆ’åˆ†ï¼Œå¯ä»¥ä¿è¯å…ƒä¿¡æ¯å¯ä»¥çº¿æ€§å¢é•¿ï¼Œä»¥ä¿æŒé«˜å¯æ‰©å±•æ€§ã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/Wizmann/assets/master/wizmann-pic/20-11-29/2020-11-29_18-53-09.png" alt="">&lt;/p>
&lt;h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å &lt;a href="#%e5%86%99%e5%9c%a8%e6%9c%80%e5%90%8e" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>æœ¬æ–‡åŸºäºCephçš„ä¸‰ç¯‡è®ºæ–‡ç»¼åˆè€Œæˆï¼ˆCephFSã€RADOSã€CRUSHï¼‰ã€‚å…¶ä¸­åŠ å…¥äº†ä¸€äº›è‡ªå·±çš„çœ‹æ³•ï¼Œä½¿å…¶é€»è¾‘é€šé¡ºï¼Œå¹¶ä¸ä¿è¯ä¸è®ºæ–‡çš„æ€è·¯å®Œå…¨ä¸€è‡´ã€‚&lt;/p>
&lt;p>è¿™ä¸‰ç¯‡è®ºæ–‡å¹¶æ²¡æœ‰æ˜ç¡®çš„ä¾èµ–å…³ç³»ï¼Œæ¢å¥è¯è¯´ï¼Œéœ€è¦ç»¼åˆé˜…è¯»ï¼Œæ‰èƒ½æœ‰æ¯”è¾ƒæ˜ç¡®çš„ç†è§£ã€‚&lt;/p>
&lt;p>å»ºè®®åœ¨é€šè¯»è®ºæ–‡åï¼Œå»å­¦ä¹ ä¸€ä¸‹&lt;a href="https://www.youtube.com/watch?v=PmLPbrf-x9g&amp;amp;ab_channel=Ceph">è¿™ä¸ªè§†é¢‘&lt;/a>ï¼Œä¼šå¯¹ç†è§£Cephæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚Youtubeä¸Šé¢è¿˜æœ‰å¾ˆå¤šCephçš„tech talkï¼Œå¯ä»¥ä¸€å¹¶çš„äº†è§£ä¸€ä¸‹ã€‚&lt;/p>
&lt;p>Cephç›¸å…³çš„ä¹¦ç±ä»¥å®è·µå±…å¤šï¼Œåªæ¨è&lt;a href="https://www.oreilly.com/library/view/learning-ceph-/9781787127913/">Learning Ceph&lt;/a>ã€‚&lt;/p>
&lt;h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ &lt;a href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&lt;a href="https://crossoverjie.top/2018/01/08/Consistent-Hash/">ä¸€è‡´æ€§ Hash ç®—æ³•åˆ†æ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://zhuanlan.zhihu.com/p/60963885">ä»ä¸€è‡´æ€§ hash åˆ° ceph crush&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://ceph.io/publications/">Ceph Publications&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>ZeroMQå¯ç¤ºå½•</title><link>https://wizmann.top/posts/inspiration-from-zeromq/</link><pubDate>Tue, 07 Apr 2015 10:01:34 +0000</pubDate><guid>https://wizmann.top/posts/inspiration-from-zeromq/</guid><description>&lt;h2 id="Ã¸mqæ˜¯ä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿ">Ã˜MQæ˜¯ä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿ &lt;a href="#%c3%b8mq%e6%98%af%e4%b8%80%e4%b8%aa%e6%b6%88%e6%81%af%e7%b3%bb%e7%bb%9f" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>ZeroMQæ˜¯ä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿï¼Œä¹Ÿè¢«ç§°ä¸ºâ€œæ¶ˆæ¯ä¸­é—´ä»¶â€ã€‚å®ƒè¢«å¹¿æ³›çš„ç”¨äºç»æµã€æ¸¸æˆã€åµŒå…¥å¼ç­‰é¢†åŸŸã€‚&lt;/p>
&lt;h3 id="ä»€ä¹ˆæ˜¯æ¶ˆæ¯ç³»ç»Ÿ">ä»€ä¹ˆæ˜¯æ¶ˆæ¯ç³»ç»Ÿ &lt;a href="#%e4%bb%80%e4%b9%88%e6%98%af%e6%b6%88%e6%81%af%e7%b3%bb%e7%bb%9f" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>æ‰“ä¸ªæ¯”æ–¹ï¼Œæ¶ˆæ¯ç³»ç»Ÿå°±åƒæˆ‘ä»¬ä½¿ç”¨çš„IMè½¯ä»¶ä¸€æ ·ã€‚é¦–å…ˆï¼Œä¸€æ–¹å†³å®šå°†æ¶ˆæ¯å‘å¾€ä½•å¤„ï¼ˆä¸€å¯¹ä¸€æˆ–ä¸€å¯¹å¤šï¼‰ã€‚ç„¶åå°†ä¿¡æ¯æ‰“åŒ…ï¼Œç‚¹å‡»å‘é€æŒ‰é’®ã€‚ä¹‹åï¼ŒIMç³»ç»Ÿä¼šå¸®ä½ æ–™ç†å‰©ä½™çš„äº‹åŠ¡ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ï¼Œå®ƒä»¬ä¹Ÿæœ‰å¾ˆå¤§çš„ä¸åŒç‚¹ã€‚IMç³»ç»Ÿå¯¹äºæ¶ˆæ¯ç³»ç»Ÿä¼¼ä¹å¤ªä½æ•ˆäº†ä¸€ç‚¹ã€‚å¦å¤–ï¼Œæ¶ˆæ¯ç³»ç»Ÿæ˜¯æ²¡æœ‰ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰çš„ã€‚åœ¨é”™è¯¯å‘ç”Ÿæ—¶ï¼Œæ¶ˆæ¯çš„å¦ä¸€ç«¯ä¹Ÿä¸ä¼šæœ‰äººæ¥æ™ºèƒ½çš„ä»‹å…¥å¤„ç†ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ä¸‹å®šä¹‰ã€‚æ¶ˆæ¯ç³»ç»Ÿæ˜¯å…·æœ‰é«˜æ•ˆæ€§å’Œå®¹é”™æ€§çš„æ¶ˆæ¯ä¼ é€’è§£å†³æ–¹æ¡ˆã€‚&lt;/p>
&lt;h3 id="zeromqçš„èµ·æºå’Œå‘å±•">ZeroMQçš„èµ·æºå’Œå‘å±• &lt;a href="#zeromq%e7%9a%84%e8%b5%b7%e6%ba%90%e5%92%8c%e5%8f%91%e5%b1%95" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>ZeroMQæœ€å…ˆçš„è®¾æƒ³æ˜¯å®ç°ä¸€ä¸ªç‚’é¸¡å¿«çš„ç”¨äºè¯åˆ¸äº¤æ˜“çš„æ¶ˆæ¯ç³»ç»Ÿï¼Œæ‰€ä»¥åœ¨è®¾è®¡åˆæœŸçš„å…³æ³¨ç‚¹å°±æ˜¯åœ¨æè‡´çš„ä¼˜åŒ–ä¸Šã€‚&lt;/p>
&lt;p>ç¬¬ä¸€å¹´çš„å·¥ä½œé‡ç‚¹ï¼Œåœ¨äºå‘æ˜æ€§èƒ½æµ‹è¯•çš„æ–¹æ³•ï¼Œå’Œè®¾è®¡é«˜æ•ˆæ¶æ„ã€‚&lt;/p>
&lt;p>ä¹‹åï¼Œå¤§çº¦åœ¨ç¬¬äºŒå¹´ï¼Œå·¥ä½œé‡ç‚¹è½¬ç§»åˆ°å®ç°ä¸€ä¸ªé€šç”¨çš„æ¶ˆæ¯ç³»ç»Ÿï¼Œä»¥åº”ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä½¿å…¶å¯ä»¥åˆ©ç”¨&lt;strong>ä¸åŒçš„ç¼–ç¨‹è¯­è¨€&lt;/strong>ï¼Œä½¿ç”¨&lt;strong>ä¸åŒæ–¹å¼&lt;/strong>ï¼Œæ¥ä¼ é€’&lt;strong>å„ç§æ¨¡å¼&lt;/strong>çš„ä¿¡æ¯ã€‚&lt;/p>
&lt;h2 id="å¯ç¤º1ç‹¬ç«‹åº”ç”¨-vs-ç¨‹åºåº“">å¯ç¤º1ï¼šç‹¬ç«‹åº”ç”¨ vs. ç¨‹åºåº“ &lt;a href="#%e5%90%af%e7%a4%ba1%e7%8b%ac%e7%ab%8b%e5%ba%94%e7%94%a8-vs-%e7%a8%8b%e5%ba%8f%e5%ba%93" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>ZeroMQæ˜¯ä¸€ä¸ªç¨‹åºåº“ï¼Œä¸æ˜¯ä¸€ä¸ªæ¶ˆæ¯æœåŠ¡å™¨ã€‚è¿™æ ·è®¾è®¡çš„ä¸»è¦åŸå› æ˜¯ï¼šæ€§èƒ½ã€‚&lt;/p>
&lt;p>ä½¿ç”¨ä¸€ä¸ªä¸­é—´æ¶ˆæ¯æœåŠ¡å™¨ï¼ˆBrokerï¼‰ï¼Œæ¯ä¸€æ¡æ¶ˆæ¯éƒ½ä¼šè¢«åœ¨ç½‘ç»œä¸Šä¼ é€’ä¸¤æ¬¡ï¼ˆSender-&amp;gt;Broker-&amp;gt;Receiver)ã€‚è¿™æ ·çš„è®¾è®¡ä¼šå½±å“æ—¶å»¶å’Œååé‡ã€‚æ›´ä¸¥é‡çš„æ˜¯ï¼Œå¦‚æœæ‰€æœ‰æ¶ˆæ¯éƒ½é€šè¿‡ä¸­é—´æœåŠ¡å™¨ï¼Œé‚£ä¹ˆè¿™ä¸ªç‚¹å°±ä¼šæˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆã€‚&lt;/p>
&lt;p>ä½¿ç”¨ä¸­é—´æ¶ˆæ¯æœåŠ¡å™¨çš„å¦ä¸€ä¸ªå¼Šç«¯ï¼Œæ˜¯ä¸åˆ©äºå¤§è§„æ¨¡éƒ¨ç½²ã€‚å¯¹äºè¯åˆ¸äº¤æ˜“æ¥è¯´ï¼ˆZeroMQæœ€åˆçš„åº”ç”¨åœºæ™¯ï¼‰ï¼Œè·¨ç»„ç»‡çš„æ¶ˆæ¯ä¼ è¾“æ˜¯ä¸å¯é¿å…çš„ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸­å¤®é›†æƒå¼çš„æ¶ˆæ¯ä¼ è¾“å°±ä¸åœ¨æœ‰æ•ˆäº†ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç¼©å°æ¶ˆæ¯ç³»ç»Ÿçš„ç²’åº¦ï¼Œä½¿ä¹‹æˆä¸ºä¸€ä¸ªç¨‹åºåº“ã€‚ä½¿å…¶æ›´è½»é‡ï¼Œæ›´æ˜“äºéƒ¨ç½²ã€‚åŒæ ·ï¼Œæ›´è½»é‡çš„æ¶ˆæ¯ç³»ç»Ÿå¯ä»¥å®ç°æ›´å¤æ‚çš„æ‹“æ‰‘ç»“æ„ã€‚&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šå¯¹äºä¸€ä¸ªæ–°é¡¹ç›®æ¥è¯´ï¼Œå¦‚æœå¯èƒ½ï¼Œå°½é‡æŠŠå®ƒå®ç°ä¸ºä¸€ä¸ªç¨‹åºåº“ã€‚å°†ä¸€ä¸ªæ–°åº“è”ç¼–åˆ°åŸæœ‰ç¨‹åºä¸­ï¼Œåªéœ€è¦å°‘é‡çš„äººåŠ›ï¼Œä¹Ÿæä¾›äº†è¶³å¤Ÿçš„çµæ´»æ€§ã€‚&lt;/p>
&lt;h2 id="å¯ç¤º2å…¨å±€çŠ¶æ€">å¯ç¤º2ï¼šå…¨å±€çŠ¶æ€ &lt;a href="#%e5%90%af%e7%a4%ba2%e5%85%a8%e5%b1%80%e7%8a%b6%e6%80%81" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>å¯¹äºç¨‹åºåº“æ¥è¯´ï¼Œå…¨å±€çŠ¶æ€å¾€å¾€ä¸èƒ½æ­£ç¡®çš„å·¥ä½œã€‚&lt;/p>
&lt;p>ç”±äºä¸€ä¸ªç¨‹åºåº“å¯èƒ½è¢«ä¸€ä¸ªåº”ç”¨ç¨‹åºåŠ è½½å¤šæ¬¡ï¼Œè¿™å°±ä¸èƒ½ä¿è¯åªæœ‰ç‹¬ä¸€æ— äºŒçš„å…¨å±€çŠ¶æ€ã€‚&lt;/p>
&lt;p>ZeroMQçš„è§£å†³æ–¹æ³•æ˜¯ç”±åº“çš„è°ƒç”¨è€…æ˜¾å¼çš„ç»´æŠ¤ä¸€ä¸ªâ€œç¯å¢ƒâ€ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚&lt;code>libA&lt;/code>å’Œ&lt;code>libB&lt;/code>éƒ½æœ‰å…¶ç‹¬æœ‰çš„â€œç¯å¢ƒâ€ä¿¡æ¯ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/71080471bf8bbf4d4e186c353d6b512c" alt="Alt text">&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šä¸è¦åœ¨ç¨‹åºåº“ä¸­ä½¿ç”¨å…¨å±€çŠ¶æ€ã€‚å¦‚æœä½ è¿™ä¹ˆåšäº†ï¼Œå½“åº“æ°å¥½éœ€è¦åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­å®ä¾‹åŒ–ä¸¤æ¬¡æ—¶ï¼Œå®ƒå¾ˆå¯èƒ½ä¼šå´©æºƒã€‚&lt;/p>
&lt;h2 id="å¯ç¤º3æ€§èƒ½">å¯ç¤º3ï¼šæ€§èƒ½ &lt;a href="#%e5%90%af%e7%a4%ba3%e6%80%a7%e8%83%bd" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/4ae6721a94012d877709075558562f2b" alt="Alt text">&lt;/p>
&lt;p>ZeroMQåœ¨æœ€åˆè®¾è®¡æ—¶ï¼Œæ€§èƒ½è°ƒä¼˜å°±æ˜¯é¦–è¦çš„ç›®æ ‡ã€‚åšä¸ºä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿï¼Œå…¶æ€§èƒ½æŒ‡æ ‡ä¸»è¦æœ‰ä¸¤ä¸ªï¼šååé‡å’Œå»¶æ—¶ã€‚&lt;/p>
&lt;p>ä½†æ˜¯æˆ‘ä»¬æ€ä¹ˆåº¦é‡å®ƒä»¬å‘¢ï¼Ÿ&lt;/p>
&lt;p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒAå‘Bå‘é€ä¿¡æ¯ã€‚Båœ¨6ç§’å†…æ¥æ”¶åˆ°äº†5æ¡ä¿¡æ¯ï¼Œå› æ­¤ååé‡ä¸º0.83æ¶ˆæ¯/ç§’ï¼Œå¹³å‡æ—¶å»¶ä¸º1.2ç§’ã€‚&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬æ¢ä¸€ç§è®¡é‡æ–¹å¼ï¼ŒAå‘Bå‘é€æ¶ˆæ¯ï¼Œå¯¹äºå•æ¡ä¿¡æ¯æ¥è¯´ï¼Œå…¶å¹³å‡æ—¶å»¶ä¸º3ç§’ã€‚AèŠ±è´¹2ç§’ï¼Œå‘é€äº†æ‰€æœ‰çš„æ¶ˆæ¯ï¼›BèŠ±è´¹äº†4ç§’ï¼Œæ¥æ”¶åˆ°äº†æ‰€æœ‰çš„æ¶ˆæ¯ã€‚æ‰€ä»¥Açš„ååé‡ä¸º2.5æ¶ˆæ¯/ç§’ï¼ŒBçš„ååé‡ä¸º1.25æ¶ˆæ¯/ç§’ã€‚è¿™ä¸ªæ•°æ®ä¸æˆ‘ä»¬ä¸Šé¢å¾—å‡ºçš„æ•°æ®ç›¸å·®ç”šè¿œã€‚&lt;/p>
&lt;p>ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ä¸åŒçš„è®¡é‡æ ‡å‡†ï¼Œå¯¹äºæˆ‘ä»¬ä¼°è®¡ç³»ç»Ÿçš„æ€§èƒ½ï¼Œä¼šå¸¦æ¥å¾ˆå¤§çš„ä¸åŒã€‚&lt;/p>
&lt;p>æ—¶å»¶åªæœ‰åœ¨ä¸¤ä¸ªèŠ‚ç‚¹é€šä¿¡æ—¶ï¼Œæ‰å¯èƒ½å‘ç”Ÿã€‚æ‰€ä»¥ï¼Œå¹¶ä¸èƒ½æœ‰â€œæŸèŠ‚ç‚¹çš„æ—¶å»¶â€è¿™ç§åº¦é‡æ ‡å‡†çš„å‡ºç°ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å¤šæ¡æ¶ˆæ¯çš„æ—¶å»¶è¿›è¡Œå¹³å‡ï¼Œä½†æ˜¯å¹¶ä¸èƒ½æœ‰â€œä¸€ä¸ªæ¶ˆæ¯æµçš„å¹³å‡æ—¶å»¶â€ã€‚&lt;/p>
&lt;p>ååé‡ï¼Œä¸æ—¶å»¶ä¸åŒï¼Œåªèƒ½åœ¨å•ä¸ªèŠ‚ç‚¹ä¸Šè¿›è¡Œåº¦é‡ã€‚æ‰€ä»¥ï¼Œå¹¶ä¸èƒ½æœ‰â€œèŠ‚ç‚¹é—´çš„ååé‡â€è¿™ç§åº¦é‡æ–¹æ³•ã€‚&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šæ·±å…¥äº†è§£ä½ æ‰€è¦è§£å†³çš„é—®é¢˜ã€‚å¦åˆ™ï¼Œä½ ä¼šåœ¨è§£å†³é—®é¢˜æ—¶ä¼šå¼•å…¥ï¼ˆé”™è¯¯çš„ï¼‰å‡å®šå’Œç„å­¦ï¼Œå†™å‡ºæœ‰ç¼ºé™·çš„å¤æ‚ä»£ç ã€‚&lt;/p>
&lt;h2 id="å¯ç¤º4å…³é”®è·¯å¾„">å¯ç¤º4ï¼šå…³é”®è·¯å¾„ &lt;a href="#%e5%90%af%e7%a4%ba4%e5%85%b3%e9%94%ae%e8%b7%af%e5%be%84" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>ä»£ç ä¸­ç»å¸¸è¢«è°ƒç”¨çš„ä»£ç ï¼Œè¢«ç§°ä¸º&lt;strong>å…³é”®è·¯å¾„&lt;/strong>ã€‚&lt;/p>
&lt;p>å¯¹äºZeroMQæ¥è¯´ï¼Œå»ºç«‹é“¾æ¥ä¸å†…å­˜ç”³è¯·éƒ½ä¸æ˜¯å½±å“æ€§èƒ½çš„æœ€ä¸»è¦å› ç´ ã€‚å› ä¸ºZeroMQä½¿ç”¨é•¿é“¾æ¥è¿›è¡Œé€šä¿¡ï¼Œæ‰€ä»¥å»ºç«‹é“¾æ¥çš„å¼€é”€å‡æ‘Šåˆ°æ¯ä¸€æ¡ä¿¡æ¯å¾®ä¹å…¶å¾®ã€‚åŒæ ·ï¼ŒZeroMQä½¿ç”¨é«˜æ•ˆçš„å†…å­˜ç»´æŠ¤æœºåˆ¶ï¼Œå°½å¯èƒ½å°‘çš„å‘ç³»ç»Ÿç›´æ¥ç”³è¯·å†…å­˜ç©ºé—´ã€‚&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šåªåœ¨ç³»ç»Ÿçš„å…³é”®è·¯å¾„ä¸Šåšä¼˜åŒ–ã€‚å¦åˆ™åªæ˜¯æµªè´¹æ—¶é—´ã€‚&lt;/p>
&lt;h2 id="å¯ç¤º5å†…å­˜ç”³è¯·">å¯ç¤º5ï¼šå†…å­˜ç”³è¯· &lt;a href="#%e5%90%af%e7%a4%ba5%e5%86%85%e5%ad%98%e7%94%b3%e8%af%b7" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>å¯¹äºä¸€ä¸ªé«˜æ•ˆçš„ç³»ç»Ÿæ¥è¯´ï¼Œé«˜æ•ˆçš„å¤„ç†å†…å­˜çš„æ–¹æ³•å¾€å¾€æ˜¯åœ¨å†…å­˜ç”³è¯·ä¸å†…å­˜æ‹·è´ä¹‹é—´å¯»æ±‚ä¸€ä¸ªå¹³è¡¡ã€‚&lt;/p>
&lt;p>å¯¹äºå°å‹æ•°æ®æ¥è¯´ï¼Œç›´æ¥æ‹·è´æ•°æ®ï¼Œå³â€œæ·±æ‹·è´â€ï¼Œçš„å¼€é”€æ›´å°ã€‚è€Œå¯¹äºå¤§å‹æ•°æ®æ¥è¯´ï¼Œæ‰€è°“â€œæµ…æ‹·è´â€çš„å¼€é”€æ›´å°ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/48deb1742653d61ba04f6e9591f71902" alt="Alt text">&lt;/p>
&lt;p>ZeroMQä½¿ç”¨é€æ˜çš„æ–¹å¼æ¥å¤„ç†ä¸¤ç§ä¸åŒçš„åœºæ™¯ã€‚å¹¶ä¸”ï¼Œå¯¹äºè§„æ¨¡è¾ƒå¤§çš„æ•°æ®ï¼Œä½¿ç”¨å¼•ç”¨è®¡æ•°çš„ç­–ç•¥ï¼Œæœ€å¤§é™åº¦çš„å¤ç”¨ä¸èŠ‚çœå†…å­˜ä½¿ç”¨ã€‚&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šå½“æˆ‘ä»¬ä¼˜åŒ–æ€§èƒ½æ—¶ï¼Œä¸è¦å‡å®šåªæœ‰ä¸€ä¸ªå…¨å±€æœ€ä¼˜è§£ã€‚åœ¨ä¸åŒçš„åœºæ™¯ä¸‹ï¼Œæœ€ä¼˜è§£çš„å®šä¹‰å¯èƒ½å¤§ä¸ç›¸åŒã€‚&lt;/p>
&lt;h2 id="å¯ç¤º6æ‰¹å¤„ç†">å¯ç¤º6ï¼šæ‰¹å¤„ç† &lt;a href="#%e5%90%af%e7%a4%ba6%e6%89%b9%e5%a4%84%e7%90%86" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>å¯¹äºä¸€ä¸ªé«˜æ€§èƒ½æ¶ˆæ¯ç³»ç»Ÿæ¥è¯´ï¼Œç³»ç»Ÿè°ƒç”¨çš„ç»å¯¹æ•°é‡å°±æ˜¯ç³»ç»Ÿçš„ç“¶é¢ˆã€‚è¿™å…¶å®æ˜¯ä¸€ä¸ªå¾ˆæ™®éçš„é—®é¢˜ï¼Œæ¶ˆæ¯åœ¨è°ƒç”¨æ ˆä¹‹é—´ä¼ é€’ï¼Œä¼šå¸¦æ¥ä¸å¯å¿½ç•¥çš„æ€§èƒ½æŸå¤±ã€‚æ‰€ä»¥ï¼Œåœ¨æ„å»ºä¸€ä¸ªé«˜æ€§èƒ½ç³»ç»Ÿæ—¶ï¼Œåº”è¯¥å°½é‡é¿å…æ¶ˆæ¯åœ¨æ ˆé—´çš„ä¼ é€’ã€‚&lt;/p>
&lt;p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹äºå››æ¡æ¶ˆæ¯ï¼Œæˆ‘ä»¬éœ€è¦éå†æ•´ä¸ªç½‘ç»œæ ˆå››æ¬¡ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/b99f65135b0f0e840131c58d2cc57896" alt="Alt text">&lt;/p>
&lt;p>ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™äº›æ¶ˆæ¯æ‰“åŒ…æˆä¸€æ¡æ¶ˆæ¯ã€‚æˆ‘ä»¬åªéœ€è¦éå†ç½‘ç»œæ ˆä¸€æ¬¡ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/cd2ea1ae7a71443b3ff85ebbc7cb1c3b" alt="Alt text">&lt;/p>
&lt;p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„ç­–ç•¥ä¸TCP/IPåè®®ä¸­çš„Nagleç®—æ³•ç±»ä¼¼ã€‚Nagleç®—æ³•æ˜¯ä¸ºäº†å……åˆ†åˆ©ç”¨å¸¦å®½ï¼Œè€ŒZeroMQçš„Batchingç­–ç•¥æ˜¯ä¸ºäº†å‡æ‘Šç½‘ç»œæ ˆçš„æ—¶é—´å¼€é”€ã€‚&lt;/p>
&lt;p>å…·ä½“çš„å®ç°å¦‚ä¸‹:&lt;/p>
&lt;ul>
&lt;li>å½“æ¶ˆæ¯çš„é¢‘ç‡æ²¡æœ‰è¶…è¿‡ç½‘ç»œæ ˆçš„å¸¦å®½æ—¶ï¼ŒZeroMQä¼šæŠŠæ‰€æœ‰batchingå…³æ‰ï¼Œä»¥CPUåˆ©ç”¨ç‡æ¥æ¢å–ä½æ—¶å»¶ã€‚&lt;/li>
&lt;li>å½“æ¶ˆæ¯çš„é¢‘ç‡è¶…è¿‡ç½‘çº¿æ ˆçš„å¸¦å®½æ—¶ï¼ŒZeroMQä¼šå¯ç”¨batchingï¼Œä»¥æ—¶å»¶ä¸ºä»£ä»·æ¥ä¼˜åŒ–ååé‡ã€‚&lt;/li>
&lt;li>å½“æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯è¿‡å¤šæ—¶ï¼ŒZeroMQä¼šé‡‡ç”¨æ›´æ¿€è¿›çš„batchingç­–ç•¥ã€‚å› ä¸ºæ¶ˆæ¯çš„å †ç§¯é€ æˆçš„æ—¶å»¶å¢é•¿å·²ç»ä¸å¯é¿å…ï¼Œç´¢æ€§å°†æ›´å¤šçš„ä¿¡æ¯æ‰“åŒ…ï¼Œè¿™æ ·å¯ä»¥æ›´å¿«çš„æ¸…ç©ºæ¶ˆæ¯çš„ç§¯å‹ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦å¤–ï¼Œbatchingç­–ç•¥åªåº”è¯¥è¢«åº”ç”¨äºé¡¶å±‚ã€‚åœ¨é¡¶å±‚é‡‡ç”¨batchingä¹‹åï¼Œä½å±‚çš„batchingå°±æ²¡æœ‰æ„ä¹‰äº†ã€‚&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨ä¸€ä¸ªå¼‚æ­¥ç³»ç»Ÿä¸­ï¼Œæƒ³è¦è·å¾—æœ€ä½³çš„å“åº”æ—¶é—´ï¼Œåº”è¯¥æŠŠåº•å±‚çš„batchingç­–ç•¥è½¬ç§»åˆ°é¡¶å±‚ã€‚&lt;/li>
&lt;li>batchingåªåº”è¯¥åœ¨æ–°æ•°æ®åˆ°æ¥çš„é€Ÿåº¦è¶…è¿‡ç³»ç»Ÿå¸¦å®½æ—¶æ‰é‡‡ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="å¯ç¤º7æ•´ä½“æ¶æ„">å¯ç¤º7ï¼šæ•´ä½“æ¶æ„ &lt;a href="#%e5%90%af%e7%a4%ba7%e6%95%b4%e4%bd%93%e6%9e%b6%e6%9e%84" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/22f7b30fb17c9a128bbb6dd66ad27a13" alt="Alt text">&lt;/p>
&lt;p>ç”¨æˆ·åˆ©ç”¨â€œsocketâ€ä¸ZeroMQè¿›è¡Œäº¤äº’ï¼Œä¸€ä¸ªsocketå¯ä»¥åŒå¤šä¸ªpeerè¿›è¡Œäº¤äº’ã€‚&lt;/p>
&lt;p>socketå­˜åœ¨äºç”¨æˆ·çº¿ç¨‹ä¸­ã€‚è€Œä¸€äº›å·¥ä½œçº¿ç¨‹ä¼šå¤„ç†å¼‚æ­¥çš„äº¤äº’è¿‡ç¨‹ï¼Œå¦‚ï¼šä»ç½‘ç»œè¯»å–æ¶ˆæ¯ï¼Œå°†æ¶ˆæ¯æ”¾å…¥é˜Ÿåˆ—ï¼Œæ¥å—æ–°çš„è¿æ¥è¯·æ±‚ç­‰ã€‚&lt;/p>
&lt;p>sessionè´Ÿè´£ä¸ZeroMQä¸­çš„socketè¿›è¡Œäº¤äº’ï¼Œengineè´Ÿè´£ç½‘ç»œäº¤äº’ã€‚sessionåªæœ‰ä¸€ç§ï¼Œè€Œengineæ ¹æ®ä½¿ç”¨çš„åè®®ä¸åŒï¼Œå¯ä»¥æœ‰å¾ˆå¤šç§ã€‚&lt;/p>
&lt;p>sessionä¸socketä¹‹é—´ä½¿ç”¨pipeè¿›è¡Œé€šä¿¡ï¼Œpipeè¢«å®ç°ä¸ºçº¿ç¨‹å®‰å…¨çš„åŒç«¯é˜Ÿåˆ—ï¼Œç”¨æ¥åœ¨çº¿ç¨‹é—´ä¼ é€’ä¿¡æ¯ã€‚&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šå­¦ä¹ äº†æ•´ä½“çš„è®¾è®¡æ€è·¯ï¼ˆç¬‘&lt;/p>
&lt;h2 id="å¯ç¤º8å¹¶å‘æ¨¡å‹">å¯ç¤º8ï¼šå¹¶å‘æ¨¡å‹ &lt;a href="#%e5%90%af%e7%a4%ba8%e5%b9%b6%e5%8f%91%e6%a8%a1%e5%9e%8b" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>é«˜æ•ˆçš„ZeroMQå¿…ç„¶è¦åˆ©ç”¨å¤šæ ¸çš„è®¡ç®—èµ„æºï¼Œè€Œä¼ ç»Ÿçš„å¤šçº¿ç¨‹æ¨¡å‹ä¼šå¼•å…¥é”ã€ä¿¡å·é‡ç­‰çº¿ç¨‹åŒæ­¥æœºåˆ¶ï¼Œä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚è€Œä½¿ç”¨ç‹¬ç«‹çš„çº¿ç¨‹åˆä¼šå¼•å…¥ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚&lt;/p>
&lt;p>ZeroMQä½¿ç”¨çš„å¹¶å‘æ¨¡å‹æ˜¯Actorï¼Œå…¶ç›®æ ‡æ˜¯å®Œå…¨é¿å…é”çš„ä½¿ç”¨ï¼Œè®©æ‰€æœ‰çš„ç»„ä»¶å…¨é€Ÿè¿è¡Œã€‚&lt;/p>
&lt;p>æ¯ä¸€ä¸ªCPUæ ¸å¿ƒåªæœ‰ä¸€ä¸ªworkerçº¿ç¨‹ï¼Œæ‰€æœ‰å†…éƒ¨å¯¹è±¡éƒ½æ˜¯çº¿ç¨‹ä¸“æœ‰çš„ï¼Œè¿™æ ·å°±å®Œå…¨é¿å…äº†é”çš„ä½¿ç”¨ã€‚&lt;/p>
&lt;p>è¿™æ ·ä¸€æ¥ï¼Œè®¸å¤šå¯¹è±¡éƒ½è¦åˆ†äº«æœ‰é™ä¸ªæ•°çš„workerã€‚æ‰€ä»¥ï¼Œç³»ç»Ÿåº”å½“æ˜¯å…¨å¼‚æ­¥çš„ã€‚å› ä¸ºæ¯ä¸€ä¸ªworkerçš„é˜»å¡ï¼Œéƒ½ä¼šé˜»å¡å…¶å®ƒä½¿ç”¨workerçš„å¯¹è±¡ã€‚&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šActoræ¨¡å‹æ˜¯æè‡´è§£å†³æ€§èƒ½ä¸æ‰©å±•æ€§é—®é¢˜çš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸æ˜¯åœ¨ä½¿ç”¨ZeroMQæˆ–Erlangï¼Œä½ éœ€è¦æ‰‹å†™è®¸å¤šç›¸å…³çš„Test Caseæ¥æµ‹è¯•ç³»ç»Ÿçš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚å¦å¤–ï¼Œå¦‚æœä½ æ— æ³•åº”å¯¹æ¨¡å‹ä¸­çš„å¤æ‚æ¨¡å—ï¼ˆå¦‚ZeroMQçš„shutdownï¼‰ï¼Œè¯·ä¸è¦è½»æ˜“å°è¯•ä½¿ç”¨Actoræ¨¡å‹ã€‚&lt;/p>
&lt;h2 id="å¯ç¤º9æ— é”ç®—æ³•">å¯ç¤º9ï¼šæ— é”ç®—æ³• &lt;a href="#%e5%90%af%e7%a4%ba9%e6%97%a0%e9%94%81%e7%ae%97%e6%b3%95" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>æ— é”ç®—æ³•ä½¿ç”¨ç®€å•çš„æ–¹æ³•è¿›è¡Œçº¿ç¨‹é—´çš„é€šä¿¡ï¼Œè€Œä¸ä¾èµ–å†…æ ¸çº§çš„åŒæ­¥åŸè¯­ã€‚æ— é”ç®—æ³•çš„å…³é”®æ˜¯CPUä¸­çš„åŸå­æ“ä½œï¼Œä¾‹å¦‚compare-and-swapï¼ˆCASï¼‰æ“ä½œã€‚ä½†æ˜¯ï¼Œè¦è®°ä½ï¼Œæ— é”æ“ä½œå¹¶ä¸æ˜¯çœŸæ­£çš„â€œæ— é”â€ï¼Œè€Œæ˜¯æŠŠé”æ“ä½œæ”¾åˆ°äº†è¾ƒä¸ºé«˜æ•ˆçš„ç¡¬ä»¶å±‚ã€‚&lt;/p>
&lt;p>ZeroMQä½¿ç”¨ä¸€ä¸ªæ— é”é˜Ÿåˆ—åœ¨ç”¨æˆ·çº¿ç¨‹ä¸å·¥ä½œçº¿ç¨‹é—´è¿›è¡Œæ¶ˆæ¯ä¼ é€’ã€‚ZeroMQä¸­çš„æ— é”é˜Ÿåˆ—æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š&lt;/p>
&lt;p>ç¬¬ä¸€ï¼Œæ¯ä¸€ä¸ªé˜Ÿåˆ—ä¸ºâ€œä¸€å†™ä¸€è¯»â€ã€‚å½“æœ‰ä¸€å¯¹å¤šçš„è¯»å†™éœ€æ±‚å­˜åœ¨æ—¶ï¼ŒZeroMQä¼šåˆ›å»ºå¤šæ¡é˜Ÿåˆ—ã€‚è¿™æ ·çš„è®¾è®¡ä½¿å¾—æˆ‘ä»¬ä¸ç”¨å…³å¿ƒå¤šçº¿ç¨‹è¯»å†™å¸¦æ¥çš„åŒæ­¥é—®é¢˜ï¼Œæœ‰åˆ©äºæˆ‘ä»¬å¯¹å…¶æ€§èƒ½çš„ä¼˜åŒ–ã€‚&lt;/p>
&lt;p>ç¬¬äºŒï¼Œå³ä½¿æ— é”ç®—æ³•æ¯”ä¼ ç»Ÿçš„é”ç®—æ³•è¦å¿«å¾ˆå¤šï¼Œä½†æ˜¯å…¶ä»£ä»·ä»ç„¶æ˜¯è¿‡é«˜çš„ï¼ˆå°¤å…¶æ˜¯åœ¨CPUæ ¸å¿ƒä¹‹é—´çš„é€šä¿¡ï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä»ç„¶ä¾èµ–äºâ€œbatchingâ€ç®—æ³•ï¼Œå°†æ˜‚è´µçš„åŒæ­¥æ“ä½œå‡æ‘Šåˆ°å¤šæ¡æ¶ˆæ¯ä¸Šã€‚åœ¨ä»é˜Ÿåˆ—çœŸæ­£çš„è¯»å†™æ“ä½œä¹‹å‰ï¼ŒåŠ å…¥ä¸€æ¬¡é¢„å¤„ç†ï¼ˆpre-write / pre-readï¼‰ï¼Œå°†æ¶ˆæ¯æ‰“ä¸ªåŒ…ï¼Œå‘ç”³é€šã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/Wizmann/assets/raw/master/wizmann-pic/9d97e2979db40e413e43cf7d642d1570" alt="Alt text">&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šæ— é”ç®—æ³•æ˜¯éå¸¸ç²¾å·§çš„ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œå°½é‡ä½¿ç”¨æˆç†Ÿçš„è®¾è®¡ã€‚å¦‚æœä½ éœ€è¦æè‡´çš„æ€§èƒ½ï¼Œä¸è¦ä»…ä»…ä¾èµ–äºæ— é”ç®—æ³•ã€‚å°½ç®¡æ— é”ç®—æ³•éå¸¸å¿«ï¼Œä½ ä»ç„¶å¯ä»¥é€šè¿‡batchingç­–ç•¥ä¼˜åŒ–å®ƒã€‚ï¼ˆå¦å¤–ï¼ŒåŠ é’±ä¸Šèˆ¹ä¹Ÿå¯ä»¥ã€‚ï¼‰&lt;/p>
&lt;h2 id="å¯ç¤º10apiè®¾è®¡">å¯ç¤º10ï¼šAPIè®¾è®¡ &lt;a href="#%e5%90%af%e7%a4%ba10api%e8%ae%be%e8%ae%a1" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>&lt;strong>è®¾è®¡APIï¼Œå°±åƒè®¾è®¡ä¸€æ¬¾äº§å“ã€‚&lt;/strong>&lt;/p>
&lt;p>ç”¨æˆ·å¯¹äºä¸€ä¸ªç¨‹åºåº“çš„ç¬¬ä¸€æ„Ÿè§‰æ¥è‡ªäºç”¨æˆ·æ¥å£ã€‚ZeroMQç®€åŒ–äº†è‡ªå·±çš„ç”¨æˆ·æ¥å£ï¼Œå°†å…¶ç”±åŸæ¥çš„â€œç‚’é¸¡å¤æ‚ä¸€ä¸å°å¿ƒå‘æ­»ä½ çš„ä¼ä¸šçº§æ¶ˆæ¯æ¡†æ¶â€å˜ä¸ºäº†â€œæƒ³å‘æ¶ˆæ¯è°ƒç”¨ä¸‹å°±OKâ€çš„ææ˜“ä¸Šæ‰‹çš„å…¥é—¨çº§äº§å“ã€‚&lt;/p>
&lt;p>å¦å¤–ä¸€ä¸ªé‡è¦çš„æ–¹é¢ï¼ŒZeroMQä½¿ç”¨äº†å¹¿ä¸ºä½¿ç”¨çš„BSD Sockets APIã€‚è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>è¿™æ˜¯ä¸€ä¸ªå¤§å®¶éƒ½ç†ŸçŸ¥çš„APIï¼Œå­¦ä¹ æ›²çº¿ç›¸å½“å¹³ç¼“&lt;/li>
&lt;li>ä½¿ZeroMQä¸ç°æœ‰çš„æŠ€æœ¯è¿æ¥èµ·æ¥ï¼Œæœ‰åˆ©äºå¤ç”¨å·²ç”¨çš„æ¡†æ¶ä¸è®¾è®¡&lt;/li>
&lt;li>æœ€é‡è¦çš„æ˜¯ï¼Œä½¿ç”¨ä¸€ä¸ªæˆç†Ÿä¸ä¹…ç»è€ƒéªŒçš„æ¡†æ¶ï¼Œå¯ä»¥é¿å…è¸©å‰äººè¸©è¿‡çš„å‘ã€&lt;/li>
&lt;/ul>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šé™¤äº†ä»£ç å¤ç”¨ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä»¥ä¸€ç§æ›´ä¸€èˆ¬çš„æ–¹æ³•ï¼Œå¤ç”¨æˆç†Ÿçš„æŠ€æœ¯ã€‚å½“ä½ è®¾è®¡ä¸€ä¸ªæ–°äº§å“æ—¶ï¼Œå€Ÿé‰´ä¸€ä¸‹ç±»ä¼¼çš„äº§å“ï¼ˆè…¾è®¯ï¼ï¼‰ã€‚ä¸è¦çŠ¯â€œåœ¨è¿™é‡Œè¿˜æ²¡æœ‰è¢«å‘æ˜â€ï¼ˆNot Invented Hereï¼‰ç»¼åˆç—‡ã€‚å¤ç”¨ä¸€åˆ‡åˆé€‚çš„æƒ³æ³•ã€APIã€æ¡†æ¶æŠ½è±¡ã€‚å…è®¸ç”¨æˆ·ä½¿ç”¨å·²æœ‰çš„çŸ¥è¯†ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è®©æˆ‘ä»¬è§„é¿æœªçŸ¥çš„é£é™©ã€‚&lt;/p>
&lt;h2 id="å¯ç¤º11æ¶ˆæ¯æ¨¡å¼">å¯ç¤º11ï¼šæ¶ˆæ¯æ¨¡å¼ &lt;a href="#%e5%90%af%e7%a4%ba11%e6%b6%88%e6%81%af%e6%a8%a1%e5%bc%8f" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>ZeroMQçš„è®¾è®¡æ€è·¯æ˜¯&lt;strong>ä¸“æ³¨äºä¸€ä¸ªé¢†åŸŸï¼ŒæŠŠå®ƒåšåˆ°æœ€å¥½&lt;/strong>ã€‚å› ä¸ºï¼Œå¤§è€Œå…¨çš„äº§å“åªèƒ½ç»™é¢†åŸŸä¸“å®¶æ¥ä½¿ç”¨ï¼Œè€Œå°è€Œç²¾çš„äº§å“çš„å—ä¼—åˆ™æ˜¯ä»»ä½•å—è¿‡è®­ç»ƒçš„ç¨‹åºå‘˜ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>s &lt;span style="color:#f92672">=&lt;/span> socket (REQ)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>s.connect (&lt;span style="color:#e6db74">&amp;#34;tcp://192.168.0.111:5555&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>s.send (&lt;span style="color:#e6db74">&amp;#34;Hello World!&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>reply &lt;span style="color:#f92672">=&lt;/span> s.recv ()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“æˆ‘ä»¬è¦ç»™ç”¨æˆ·æä¾›æ›´ä¸€èˆ¬æ€§çš„è§£å†³æ–¹æ¡ˆæ—¶ï¼Œä¸€ä¸ªæŠ€æœ¯æ ˆï¼Œæ ˆçš„æ¯ä¸€å±‚å¯ä»¥æœ‰ä¸åŒçš„å®ç°ï¼Œä»è€Œé€‚åº”ä¸åŒäººç¾¤çš„éœ€è¦ã€‚&lt;/p>
&lt;p>è¿™å’ŒInternetæ ˆçš„è®¾è®¡æ€è·¯éå¸¸ç›¸ä¼¼ï¼šTCPå¯ä»¥è§£å†³åŸºäºé“¾æ¥çš„ã€å¯é çš„æ•°æ®æµä¼ è¾“ï¼ŒUDPå¯ä»¥è§£å†³ä¸å¯é çš„æ•°æ®åŒ…ä¼ è¾“ï¼ŒSCTPå¯ä»¥è§£å†³å¤šç”¨æˆ·æ•°æ®æµä¼ è¾“é—®é¢˜ç­‰ç­‰ã€‚&lt;/p>
&lt;p>è¿™æ ·ä¸€æ¥ï¼Œæ‰€æœ‰çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯æ­£äº¤çš„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å…¶ä¸­å¥½çš„è®¾è®¡ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰é¢å¤–ä»£ä»·çš„æŠ›å¼ƒä¸å¥½çš„è®¾è®¡ã€‚&lt;/p>
&lt;p>è·å¾—çš„å¯ç¤ºï¼šå½“è§£å†³ä¸€ä¸ªå¤æ‚ä¸”å¤šé¢åŒ–çš„é—®é¢˜æ—¶ï¼Œå•ä¸ªé€šç”¨å‹çš„è§£å†³æ–¹æ¡ˆå¯èƒ½å¹¶ä¸æ˜¯æœ€å¥½çš„æ–¹å¼ã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé—®é¢˜çš„é¢†åŸŸæƒ³è±¡æˆä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå¹¶åŸºäºè¿™ä¸ªå±‚æ¬¡æä¾›å¤šä¸ªå®ç°ï¼Œæ¯ç§å®ç°åªè‡´åŠ›äºè§£å†³ä¸€ç§å®šä¹‰è‰¯å¥½çš„æƒ…å†µã€‚&lt;/p>
&lt;p>å½“æˆ‘ä»¬è¿™ä¹ˆåšæ—¶ï¼Œç¡®å®šé—®é¢˜çš„ç²’åº¦éå¸¸é‡è¦ã€‚å¦‚æœç²’åº¦è¿‡ç»†ï¼Œè½¯ä»¶çš„ä¸€èˆ¬æ€§å°±ä¼šå—åˆ°é™åˆ¶ã€‚å¦‚æœç²’åº¦è¿‡ç²—ï¼Œé‚£ä¹ˆäº§å“å°±ä¼šå˜å¾—éå¸¸å¤æ‚ï¼Œç»™ç”¨æˆ·å¸¦æ¥æ¨¡ç³Šå’Œæ··ä¹±çš„æ„Ÿè§‰ã€‚&lt;/p>
&lt;h2 id="åè®°">åè®° &lt;a href="#%e5%90%8e%e8%ae%b0" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;ul>
&lt;li>åŸæ–‡é“¾æ¥ï¼šhttp://www.aosabook.org/en/zeromq.html&lt;/li>
&lt;li>ä¸­æ–‡ç¿»è¯‘ï¼šhttp://www.ituring.com.cn/article/4669&lt;/li>
&lt;/ul>
&lt;p>æœ¬æ–‡ä¸­å€Ÿé‰´äº†ä¸­æ–‡ç¿»è¯‘çš„éƒ¨åˆ†è¯å¥ï¼Œå¯¹æ­¤è¡¨ç¤ºæ„Ÿè°¢ã€‚&lt;/p></description></item></channel></rss>