<!doctype html><html lang=zh-cn dir=auto><head><meta name=generator content="Hugo 0.146.0"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Maerlyn's Rainbow</title>
<meta name=description content><meta name=author content="wizmann"><link rel=canonical href=https://wizmann.top/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://wizmann.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wizmann.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wizmann.top/favicon-32x32.png><link rel=apple-touch-icon href=https://wizmann.top/apple-touch-icon.png><link rel=mask-icon href=https://wizmann.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wizmann.top/index.xml><link rel=alternate hreflang=zh-cn href=https://wizmann.top/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://wizmann.top/"><meta property="og:site_name" content="Maerlyn's Rainbow"><meta property="og:title" content="Maerlyn's Rainbow"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Maerlyn's Rainbow"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Maerlyn's Rainbow","url":"https://wizmann.top/","description":"","logo":"https://wizmann.top/favicon.ico","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wizmann.top/ accesskey=h title="Maerlyn's Rainbow (Alt + H)">Maerlyn's Rainbow</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2018-05-02 00:39:00 Title: 实现一个无锁消息队列 Tags: multi-thread, cas, cmpxchg Slug: implement-non-blocking-queue
240414更新：后续补充了一篇勘误文章，见这里
目标 实现一个多读多写的无锁消息队列。
cmpxchg - 比较并替换 比较并替换（compare-and-swap, CAS）是一个用于多线程同步的原子操作。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/implement-non-blocking-queue/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2014-05-20 13:23:03 Title: How to implement a queue with stack(s)? Tags: algorithm, stack, queue Slug: implement-queue-with-stacks status: draft
This problem is from the book Algorithms, 4th Edition.
Queue with three stacks. Implement a queue with three stacks so that each queue operation takes a constant (worst-case) number of stack operations.
Warning : high degree of difficulty.
When I search the Internet to find a solution, I find varieties of this problem, such as “implement a queue with ONE stack”, “implement a queue with TWO stack”, etc.
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/implement-queue-with-stacks/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2018-10-14 Title: 容斥原理以及一些题目 Tags: Algorithm, 容斥原理, 计数 Slug: inclusive-exclusive-principle
什么是容斥原理 容斥原理是一种计数手段。例如在下图中，我们想不重复、不遗漏的求出包含在ABC三个集合中所包含的元素的个数，应该使用怎么样的方法呢？
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/inclusive-exclusive-principle/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2015-04-07 10:01:34 Title: ZeroMQ启示录 Tags: zeromq, distributed system, system-design Slug: inspiration-from-zeromq
ØMQ是一个消息系统 ZeroMQ是一个消息系统，也被称为“消息中间件”。它被广泛的用于经济、游戏、嵌入式等领域。
什么是消息系统 打个比方，消息系统就像我们使用的IM软件一样。首先，一方决定将消息发往何处（一对一或一对多）。然后将信息打包，点击发送按钮。之后，IM系统会帮你料理剩余的事务。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/inspiration-from-zeromq/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2014-07-19 11:00:38 Title: 玩玩算法题1：Sherlock and Queries Tags: algorithm, interview Slug: interview-problem-1-sherlock-and-queries status: draft
题目大意 给你三个数组:A[N], B[M], C[M]。让你按如下pseudo-code给出的规则计算，求出最终A[N]每一项的值。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/interview-problem-1-sherlock-and-queries/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2020-11-29 Title: Introduction to Ceph Tags: Ceph, Distributed System, Storage System, Storage, System Design Slug: introduction-to-ceph
什么是Ceph Ceph是一个可扩展的，高性能的分布式存储系统。提供了三种不同类型的接口以适应不同的应用场景：
block-based: 块存储，可以用做VM的虚拟磁盘 object-based: 对象存储，与Amazon S3等常用对象存储兼容 file system: POSIX兼容的分布式文件系统，可以被本地系统挂载，并且能被多个客户端共享 ...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/introduction-to-ceph/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2020-10-26 Title: 2020 计蒜之道 线上决赛 - C. 攀登山峰 Tags: algorithm, 算法 Slug: jisuanke-climb-the-hill
本文使用了一种概率算法，不是正解，只求骗分。
题意 原题
给一个长度为n的数组A[1…n]。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/jisuanke-climb-the-hill/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2025-02-17 Title: 论文阅读：LavaStore - 高性能、本地存储引擎的演进 Tags: 论文阅读, LavaStore, RocksDB Slug: lava-store status: draft
引言 在云服务的快速发展中，持久化键值（KV）存储引擎的性能和成本效率成为了关键挑战。字节跳动（ByteDance）在其大规模云服务中广泛使用 RocksDB 作为本地存储引擎。然而，由于 RocksDB 在高写入密集型负载、成本优化以及尾延迟控制上的局限性，字节跳动团队开发了 LavaStore，一个专门针对云服务优化的高性能、本地存储引擎。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/lava-store/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2013-11-28 Title: Linux内核中的少锁链表 Tags: linux, lock-less, 链表, 并发编程 Slug: linux-lockless-llist
前言 最近在stackexchange上看到一个问答，讨论我们常用的数据结构与算法在实际工程中的应用。(戳我)
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/linux-lockless-llist/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2017-07-26 Title: Metaprogramming in .NET 读书笔记 - 1 Tags: Metaprogramming, .NET, C# Slug: metaprogramming-in-dotnet-1 status: draft
什么是 Metaprogramming (元编程) 元编程从字面上理解就是“能处理程序的程序”。
这里的“处理”，有两个意思。
一是“编写”、“生成”，最经典例子就是编译器，它将我们的所编写的高级语言翻译成机器代码。编译器就像建筑工人，将“蓝图”（高级语言）转化成“高楼大厦”（机器语言）。还有一个我们经常用到的就是“宏”(Macro)。我们可以在代码中使用预先编写好的宏，在编译期，宏会被自动展开成相应的代码。这样的好处是用机器带替人类劳动。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/metaprogramming-in-dotnet-1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2014-09-17 00:46:16 Title: 最小表示法及其证明 Tags: string, 字符串, 最小表示法, algorithm Slug: minimal-round-string
问题 对于一个字符串S，求S的循环的同构字符串S’中字典序最小的一个。
我们举例说明，字符串"abcd"的循环同构字符串有：["abcd", "bcda", "cdab", "dabc"]。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/minimal-round-string/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2014-01-09 14:55 Title: 用Misaka做为pelican的Markdown解析器 Tags: markdown, misaka, pelican, 糙快猛, metadata Slug: misaka-pelican
为啥？ Pelican内置python-markdown做为默认解析器，用来将用户的Markdown格式的文章转为网页格式展示。
然而，python-markdown模块的解析逻辑有严重的Bug。例如一个未标明语言的代码块会被标出很多莫名奇妙的错误；还有C++中的指针符号*会被解析为斜体的符号*SomeText*，在代码块中会产生大量和语法高亮无关的斜体字。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/misaka-pelican/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2013-11-29 Title: 機器學習基石 - PLA算法初步 Tags: 公开课, 分类器 Slug: ml-foundations-pla status: draft
什么是PLA算法 PLA = Perceptrons Learning Alogrithm
WikiPedia上有一个大概的历史背景介绍。
感知机（英语：Perceptron）是Frank Rosenblatt在1957年就职于Cornell航空实验室(Cornell Aeronautical Laboratory)时所发明的一种人工神经网络。它可以被视为一种最简单形式的前馈式人工神经网络，是一种二元线性分类器。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/ml-foundations-pla/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2016-11-11 22:04:13 Title: Mosca源码阅读 Tags: mosca, mq, message queue Slug: mosca
先在前面 最近心血来潮看了看一个比较有名的开源MQTT broker —— Mosca。不读不知道，读完才恍然大悟 —— 这是啥破玩意（哈哈）。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/mosca/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2021-08-15 Title: 论文阅读-WiscKey：SSD友好的KV分离存储引擎 Tags: wisckey, rocksdb, leveldb, lsm-tree, storage, system, storage system Slug: paper-wisckey
背景 基于LSM-Tree的存储引擎 Log-Structed Merge-Tree (a.k.a. LSM-Tree)是当下常用的一种基于磁盘的存储引擎。与Hash索引和B-Tree同为数据库核心的数据结构。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/paper-wisckey/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2017-01-22 22:52:28 Title: Parallel patterns in C# Tags: csharp, parallel, thread, async Slug: parallel-in-csharp
写在前面 与C/C++所使用的，传统的基于线程的并行模式不同，C#实现了丰富的并发编程模型，其中以异步模型最为流行。
本文中我们重点讨论C#在发展过程中出现的几种异步编程模型：
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/parallel-in-csharp/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2018-11-25 Title: 白话一致性协议 - Paxos、Raft和PacificA[0] Tags: paxos, basic paxos, 数据库, 分布式系统, 一致性 Slug: paxos-raft-pecifaca[0]
一致性协议 - Paxos 在分布式系统当中，我们往往需要保持节点之间的一致性。在绝大多数情况下，我们需要让系统中的节点相互协调通力合作，有可能的让系统正确的工作。但是，由于分布式系统本身的特性，需要我们在不可靠的硬件上尽可能的构建可靠的系统。所以，看似简单的一致性问题成为了分布式系统领域的一个重要的课题。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/paxos-raft-pecifica0/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2018-12-05 Title: 白话一致性协议 - Paxos、Raft和PacificA1 Tags: paxos, basic paxos, multi paxos, raft, 数据库, 分布式系统, 一致性 Slug: paxos-raft-pecifaca1
书接上文 - Multi Paxos 在上一篇文章中，我们提到了Basic Paxos和Multi Paxos的异同。在Paxos Made Simple论文中，作者提到了Multi Paxos的一种实现。这个实现允许我们对一个连续的数据流（也可以称为复制日志，replicated log）达成共识，从而实现节点状态的一致性复制。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/paxos-raft-pecifica1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2019-02-18 Title: 白话一致性协议 - Paxos、Raft和PacificA[2] Tags: pecificA, 数据库, 分布式系统, 主从复制 Slug: paxos-raft-pecifaca[2]
PacificA是一个框架 虽然在题目中我们把Paxos、Raft和PacificA并列，但是Paxos和Raft在论文中称自己为一种“算法”（algorithm）；而PacificA对自己的定位是一种通用的，强一致的数据同步框架。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/paxos-raft-pecifica2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent></h2></header><div class=entry-content><p>Date: 2016-09-28 22:35:55 Title: 自定义你的stream buffer - phxrpc阅读笔记(1) Tags: System Design, RPC, streambuf, C++, phxrpc Slug: phxrpc-1
写在前面 phxrpc是微信团队开源的一个轻量级RPC框架。
我对RPC这些东西了解不多，看到phxrpc的代码相对简单，而且还在初步开发阶段（在本文写作时，版本号是0.8）。所以想读一读，提高一下姿势水平。
...</p></div><footer class=entry-footer>wizmann</footer><a class=entry-link aria-label="post link to " href=https://wizmann.top/posts/phxrpc-1/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://wizmann.top/page/2/>«&nbsp;&nbsp;
</a><a class=next href=https://wizmann.top/page/4/>&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://wizmann.top/>Maerlyn's Rainbow</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>